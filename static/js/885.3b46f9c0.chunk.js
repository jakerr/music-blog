/*! For license information please see 885.3b46f9c0.chunk.js.LICENSE.txt */
(self.webpackChunkmusic_blog=self.webpackChunkmusic_blog||[]).push([[885],{8667:function(t,e,n){!function(t,e,n,i){"use strict";var r=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},o=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},a=function(t,e){return{startTime:e,type:"setValue",value:t}},s=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},u=function(t,e,n){var i=n.startTime,r=n.target,o=n.timeConstant;return r+(e-r)*Math.exp((i-t)/o)},c=function(t){return"exponentialRampToValue"===t.type},l=function(t){return"linearRampToValue"===t.type},h=function(t){return c(t)||l(t)},f=function(t){return"setValue"===t.type},p=function(t){return"setValueCurve"===t.type},d=function t(e,n,i,r){var o=e[n];return void 0===o?r:h(o)||f(o)?o.value:p(o)?o.values[o.values.length-1]:u(i,t(e,n-1,o.startTime,r),o)},v=function(t,e,n,i,r){return void 0===n?[i.insertTime,r]:h(n)?[n.endTime,n.value]:f(n)?[n.startTime,n.value]:p(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,d(t,e-1,n.startTime,r)]},y=function(t){return"cancelAndHold"===t.type},m=function(t){return"cancelScheduledValues"===t.type},_=function(t){return y(t)||m(t)?t.cancelTime:c(t)||l(t)?t.endTime:t.startTime},g=function(t,e,n,i){var r=i.endTime,o=i.value;return n===o?o:0<n&&0<o||n<0&&o<0?n*Math.pow(o/n,(t-e)/(r-e)):0},k=function(t,e,n,i){return n+(t-e)/(i.endTime-e)*(i.value-n)},x=function(t,e){var n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]},w=function(t,e){var n=e.duration,i=e.startTime,r=e.values,o=(t-i)/n*(r.length-1);return x(r,o)},b=function(t){return"setTarget"===t.type},Z=function(t){function x(t){n(this,x),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return i(x,[{key:t,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=_(t);if(y(t)||m(t)){var n=this._automationEvents.findIndex((function(n){return m(t)&&p(n)?n.startTime+n.duration>=e:_(n)>=e})),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),y(t)){var u=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&h(i)){if(b(u))throw new Error("The internal list is malformed.");var f=p(u)?u.startTime+u.duration:_(u),d=p(u)?u.values[u.values.length-1]:u.value,v=c(i)?g(e,f,d,i):k(e,f,d,i),x=c(i)?r(v,e,this._currenTime):o(v,e,this._currenTime);this._automationEvents.push(x)}void 0!==u&&b(u)&&this._automationEvents.push(a(this.getValue(e),e)),void 0!==u&&p(u)&&u.startTime+u.duration>e&&(this._automationEvents[this._automationEvents.length-1]=s(new Float32Array([6,7]),u.startTime,e-u.startTime))}}else{var w=this._automationEvents.findIndex((function(t){return _(t)>e})),Z=-1===w?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[w-1];if(void 0!==Z&&p(Z)&&_(Z)+Z.duration>e)return!1;var T=c(t)?r(t.value,t.endTime,this._currenTime):l(t)?o(t.value,e,this._currenTime):t;if(-1===w)this._automationEvents.push(T);else{if(p(t)&&e+t.duration>_(this._automationEvents[w]))return!1;this._automationEvents.splice(w,0,T)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return _(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),i=n[0];b(i)&&n.unshift(a(d(this._automationEvents,e-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex((function(e){return _(e)>t})),i=this._automationEvents[n],r=(-1===n?this._automationEvents.length:n)-1,o=this._automationEvents[r];if(void 0!==o&&b(o)&&(void 0===i||!h(i)||i.insertTime>t))return u(t,d(this._automationEvents,r-1,o.startTime,this._defaultValue),o);if(void 0!==o&&f(o)&&(void 0===i||!h(i)))return o.value;if(void 0!==o&&p(o)&&(void 0===i||!h(i)||o.startTime+o.duration>t))return t<o.startTime+o.duration?w(t,o):o.values[o.values.length-1];if(void 0!==o&&h(o)&&(void 0===i||!h(i)))return o.value;if(void 0!==i&&c(i)){var a=v(this._automationEvents,r,o,i,this._defaultValue),s=e(a,2),y=s[0],m=s[1];return g(t,y,m,i)}if(void 0!==i&&l(i)){var x=v(this._automationEvents,r,o,i,this._defaultValue),Z=e(x,2),T=Z[0],S=Z[1];return k(t,T,S,i)}return this._defaultValue}}]),x}(Symbol.iterator),T=function(t){return{cancelTime:t,type:"cancelAndHold"}},S=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},A=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},C=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},D=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}};t.AutomationEventList=Z,t.createCancelAndHoldAutomationEvent=T,t.createCancelScheduledValuesAutomationEvent=S,t.createExponentialRampToValueAutomationEvent=A,t.createLinearRampToValueAutomationEvent=C,t.createSetTargetAutomationEvent=D,t.createSetValueAutomationEvent=a,t.createSetValueCurveAutomationEvent=s}(e,n(5463),n(8860),n(9450))},3885:function(t,e,n){"use strict";n.r(e),n.d(e,{AMOscillator:function(){return Aa},AMSynth:function(){return os},Abs:function(){return Wa},Add:function(){return qa},AmplitudeEnvelope:function(){return ns},Analyser:function(){return Nu},AudioToGain:function(){return Ta},AutoFilter:function(){return eu},AutoPanner:function(){return iu},AutoWah:function(){return ou},BaseContext:function(){return io},BiquadFilter:function(){return as},BitCrusher:function(){return su},Buffer:function(){return _c},BufferSource:function(){return kc},Buffers:function(){return gc},Channel:function(){return Uu},Chebyshev:function(){return cu},Chorus:function(){return du},Clock:function(){return Ho},Compressor:function(){return Ju},Context:function(){return ro},Convolver:function(){return rc},CrossFade:function(){return Js},DCMeter:function(){return zu},Delay:function(){return $o},Destination:function(){return cc},Distortion:function(){return vu},Draw:function(){return dc},DuoSynth:function(){return ls},EQ3:function(){return ic},Emitter:function(){return no},Envelope:function(){return Ja},FFT:function(){return Lu},FMOscillator:function(){return Ca},FMSynth:function(){return hs},FatOscillator:function(){return Oa},FeedbackCombFilter:function(){return xs},FeedbackDelay:function(){return mu},Filter:function(){return ss},Follower:function(){return ru},Freeverb:function(){return wu},Frequency:function(){return Eo},FrequencyClass:function(){return Do},FrequencyEnvelope:function(){return us},FrequencyShifter:function(){return gu},Gain:function(){return zo},GainToAudio:function(){return Ba},Gate:function(){return Ku},GrainPlayer:function(){return za},GreaterThan:function(){return Qa},GreaterThanZero:function(){return Ya},IntervalTimeline:function(){return oa},JCReverb:function(){return Su},LFO:function(){return Ia},Limiter:function(){return tc},Listener:function(){return fc},Loop:function(){return Cs},LowpassCombFilter:function(){return bs},Master:function(){return lc},MembraneSynth:function(){return ds},Merge:function(){return hu},MetalSynth:function(){return ps},Meter:function(){return ju},MidSideCompressor:function(){return ec},MidSideMerge:function(){return Ru},MidSideSplit:function(){return Eu},Midi:function(){return ea},MidiClass:function(){return ta},Mono:function(){return Yu},MonoSynth:function(){return cs},MultibandCompressor:function(){return nc},MultibandSplit:function(){return Qu},Multiply:function(){return Sa},Negate:function(){return Ga},Noise:function(){return va},NoiseSynth:function(){return vs},Offline:function(){return Jo},OfflineContext:function(){return lo},OmniOscillator:function(){return Ra},OnePoleFilter:function(){return ws},Oscillator:function(){return wa},PWMOscillator:function(){return Ma},PanVol:function(){return Gu},Panner:function(){return nu},Panner3D:function(){return Hu},Param:function(){return Io},Part:function(){return Ds},Pattern:function(){return Hs},Phaser:function(){return Ou},PingPongDelay:function(){return Cu},PitchShift:function(){return Du},Player:function(){return ja},Players:function(){return La},PluckSynth:function(){return Zs},PolySynth:function(){return Ts},Pow:function(){return Xa},PulseOscillator:function(){return Da},Recorder:function(){return $u},Reverb:function(){return Mu},Sampler:function(){return Ss},Scale:function(){return Fa},ScaleExp:function(){return Ha},Sequence:function(){return $s},Signal:function(){return Go},Solo:function(){return Bu},Split:function(){return lu},StateTimeline:function(){return Vo},StereoWidener:function(){return Fu},Subtract:function(){return Ua},SyncedSignal:function(){return $a},Synth:function(){return is},Ticks:function(){return ia},TicksClass:function(){return na},Time:function(){return Co},TimeClass:function(){return Ao},Timeline:function(){return Hr},ToneAudioBuffer:function(){return co},ToneAudioBuffers:function(){return Ko},ToneAudioNode:function(){return No},ToneBufferSource:function(){return da},ToneEvent:function(){return As},ToneOscillatorNode:function(){return xa},Transport:function(){return sc},TransportTime:function(){return qo},TransportTimeClass:function(){return Ro},Tremolo:function(){return Vu},Unit:function(){return r},UserMedia:function(){return ga},Vibrato:function(){return Iu},Volume:function(){return sa},WaveShaper:function(){return Za},Waveform:function(){return Wu},Zero:function(){return Va},connect:function(){return jo},connectSeries:function(){return Po},connectSignal:function(){return Uo},context:function(){return yc},dbToGain:function(){return go},debug:function(){return i},defaultArg:function(){return Lr},disconnect:function(){return Lo},ftom:function(){return bo},gainToDb:function(){return ko},getContext:function(){return po},getDestination:function(){return hc},getDraw:function(){return vc},getListener:function(){return pc},getTransport:function(){return uc},immediate:function(){return ac},intervalToFrequencyRatio:function(){return xo},isArray:function(){return xr},isBoolean:function(){return kr},isDefined:function(){return yr},isFunction:function(){return mr},isNote:function(){return br},isNumber:function(){return _r},isObject:function(){return gr},isString:function(){return wr},isUndef:function(){return vr},loaded:function(){return mc},mtof:function(){return To},now:function(){return oc},optionsFromArguments:function(){return jr},setContext:function(){return vo},start:function(){return yo},supported:function(){return sr},version:function(){return o}});var i={};n.r(i),n.d(i,{assert:function(){return ur},assertContextRunning:function(){return lr},assertRange:function(){return cr},log:function(){return pr},setLogger:function(){return fr},warn:function(){return dr}});var r={};n.r(r);var o="14.7.77",a=n(8667),s=n(885),u=n(3144),c=n(5671),l=new WeakSet,h=new WeakMap,f=new WeakMap,p=new WeakMap,d=new WeakMap,v=new WeakMap,y=new WeakMap,m=new WeakMap,_=new WeakMap,g=new WeakMap,k={construct:function(){return k}},x=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,w=function(t,e){for(var n=[],i=t.replace(/^[\s]+/,""),r=i.match(x);null!==r;){var o=r[1].slice(1,-1),a=r[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());n.push(a),r=(i=i.slice(r[0].length).replace(/^[\s]+/,"")).match(x)}return[n.join(";"),i]},b=function(t){if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Z=function(t){if(!function(t){try{new new Proxy(t,k)}catch(e){return!1}return!0}(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!==typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},T=function(t,e){var n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},S=function(t,e){var n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");var i=(0,s.Z)(n,1)[0];return t.delete(i),i},A=function(t,e,n,i){var r=T(t,e),o=S(r,(function(t){return t[0]===n&&t[1]===i}));return 0===r.size&&t.delete(e),o},C=function(t){return T(y,t)},D=function(t){if(l.has(t))throw new Error("The AudioNode is already stored.");l.add(t),C(t).forEach((function(t){return t(!0)}))},O=function(t){return"port"in t},M=function(t){if(!l.has(t))throw new Error("The AudioNode is not stored.");l.delete(t),C(t).forEach((function(t){return t(!1)}))},E=function(t,e){!O(t)&&e.every((function(t){return 0===t.size}))&&M(t)},R=n(1413),q=n(136),F=n(1129),V={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},I=n(1002);function N(){N=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(C){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:x(t,n,s)}),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};u(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&n.call(m,o)&&(v=m);var _=d.prototype=f.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==(0,I.Z)(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function x(t,e,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return A()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=l(t,e,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}function w(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=l(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=d,i(_,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},g(k.prototype),u(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new k(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(_),u(_,s,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=S,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Z),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),Z(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;Z(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function P(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(i,r)}function j(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){P(o,i,r,a,s,"next",t)}function s(t){P(o,i,r,a,s,"throw",t)}a(void 0)}))}}var L=function(t,e){return t.context===e},z=function(t){try{t.copyToChannel(new Float32Array(1),0,-1)}catch(e){return!1}return!0},W=function(){return new DOMException("","IndexSizeError")},B=function(t){var e;t.getChannelData=(e=t.getChannelData,function(n){try{return e.call(t,n)}catch(i){if(12===i.code)throw W();throw i}})},G={numberOfChannels:1},U=n(7326),Y=-34028234663852886e22,Q=-Y,X=function(t){return l.has(t)},H={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},$=n(2982),J=n(7762),K=function(t){return T(h,t)},tt=function(t){return T(p,t)},et=function t(e,n){K(e).activeInputs.forEach((function(i){return i.forEach((function(i){var r=(0,s.Z)(i,1)[0];n.includes(e)||t(r,[].concat((0,$.Z)(n),[e]))}))}));var i,r=function(t){return"playbackRate"in t}(e)?[e.playbackRate]:O(e)?Array.from(e.parameters.values()):function(t){return"frequency"in t&&"gain"in t}(e)?[e.Q,e.detune,e.frequency,e.gain]:function(t){return"offset"in t}(e)?[e.offset]:function(t){return!("frequency"in t)&&"gain"in t}(e)?[e.gain]:function(t){return"detune"in t&&"frequency"in t}(e)?[e.detune,e.frequency]:function(t){return"pan"in t}(e)?[e.pan]:[],o=(0,J.Z)(r);try{for(o.s();!(i=o.n()).done;){var a=i.value,u=tt(a);void 0!==u&&u.activeInputs.forEach((function(e){var i=(0,s.Z)(e,1)[0];return t(i,n)}))}}catch(c){o.e(c)}finally{o.f()}X(e)&&M(e)},nt=function(t){et(t.destination,[])},it=function(t){return void 0===t||"number"===typeof t||"string"===typeof t&&("balanced"===t||"interactive"===t||"playback"===t)},rt=function(t){return"context"in t},ot=function(t){return rt(t[0])},at=function(t,e,n,i){var r,o=(0,J.Z)(t);try{for(o.s();!(r=o.n()).done;){if(n(r.value)){if(i)return!1;throw Error("The set contains at least one similar element.")}}}catch(a){o.e(a)}finally{o.f()}return t.add(e),!0},st=function(t,e,n,i){var r=(0,s.Z)(n,2),o=r[0],a=r[1];at(t,[e,o,a],(function(t){return t[0]===e&&t[1]===o}),i)},ut=function(t,e,n){var i=(0,s.Z)(e,3),r=i[0],o=i[1],a=i[2],u=t.get(r);void 0===u?t.set(r,new Set([[o,a]])):at(u,[o,a],(function(t){return t[0]===o}),n)},ct=function(t){return"inputs"in t},lt=function(t,e,n,i){if(ct(e)){var r=e.inputs[i];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,i),[e,n,i]},ht=function(t,e,n){var i,r=(0,J.Z)(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o[0]===e&&o[1]===n)return t.delete(o),o}}catch(a){r.e(a)}finally{r.f()}return null},ft=function(t,e){if(!C(t).delete(e))throw new Error("Missing the expected event listener.")},pt=function(t,e,n){var i=T(t,e),r=S(i,(function(t){return t[0]===n}));return 0===i.size&&t.delete(e),r},dt=function(t,e,n,i){ct(e)?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},vt=function(t){return T(f,t)},yt=function(t){return T(d,t)},mt=function(t){return m.has(t)},_t=function(t){return!l.has(t)},gt=function(t,e){return new Promise((function(n){if(null!==e)n(!0);else{var i=t.createScriptProcessor(256,1,1),r=t.createGain(),o=t.createBuffer(1,2,44100),a=o.getChannelData(0);a[0]=1,a[1]=1;var s=t.createBufferSource();s.buffer=o,s.loop=!0,s.connect(i).connect(t.destination),s.connect(r),s.disconnect(r),i.onaudioprocess=function(e){var r=e.inputBuffer.getChannelData(0);Array.prototype.some.call(r,(function(t){return 1===t}))?n(!0):n(!1),s.stop(),i.onaudioprocess=null,s.disconnect(i),i.disconnect(t.destination)},s.start()}}))},kt=function(t,e){var n,i=new Map,r=(0,J.Z)(t);try{for(r.s();!(n=r.n()).done;){var o,a=n.value,s=(0,J.Z)(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=i.get(u);i.set(u,void 0===c?1:c+1)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){r.e(l)}finally{r.f()}i.forEach((function(t,n){return e(n,t)}))},xt=function(t){return"context"in t},wt=function(t){var e,n,i=new Map;t.connect=(e=t.connect.bind(t),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=xt(t)?e(t,n,r):e(t,n),a=i.get(t);return void 0===a?i.set(t,[{input:r,output:n}]):a.every((function(t){return t.input!==r||t.output!==n}))&&a.push({input:r,output:n}),o}),t.disconnect=(n=t.disconnect,function(e,r,o){if(n.apply(t),void 0===e)i.clear();else if("number"===typeof e){var a,u=(0,J.Z)(i);try{for(u.s();!(a=u.n()).done;){var c=(0,s.Z)(a.value,2),l=c[0],h=c[1].filter((function(t){return t.output!==e}));0===h.length?i.delete(l):i.set(l,h)}}catch(m){u.e(m)}finally{u.f()}}else if(i.has(e))if(void 0===r)i.delete(e);else{var f=i.get(e);if(void 0!==f){var p=f.filter((function(t){return t.output!==r&&(t.input!==o||void 0===o)}));0===p.length?i.delete(e):i.set(e,p)}}var d,v=(0,J.Z)(i);try{var y=function(){var e=(0,s.Z)(d.value,2),n=e[0];e[1].forEach((function(e){xt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))};for(v.s();!(d=v.n()).done;)y()}catch(m){v.e(m)}finally{v.f()}})},bt=function(t,e,n,i){var r=tt(e),o=r.activeInputs,a=r.passiveInputs,s=K(t).outputs,u=C(t),c=function(r){var s=vt(t),u=yt(e);if(r){var c=pt(a,t,n);st(o,t,c,!1),i||mt(t)||s.connect(u,n)}else{var l=function(t,e,n){return S(t,(function(t){return t[0]===e&&t[1]===n}))}(o,t,n);ut(a,l,!1),i||mt(t)||s.disconnect(u,n)}};return!!at(s,[e,n],(function(t){return t[0]===e&&t[1]===n}),!0)&&(u.add(c),X(t)?st(o,t,[n,c],!0):ut(a,[t,n,c],!0),!0)},Zt=function(t,e,n,i,r){var o=function(t,e,n,i){var r=K(e),o=r.activeInputs,a=r.passiveInputs,s=ht(o[i],t,n);return null===s?[A(a,t,n,i)[2],!1]:[s[2],!0]}(t,n,i,r),a=(0,s.Z)(o,2),u=a[0],c=a[1];if(null!==u&&(ft(t,u),!c||e||mt(t)||dt(vt(t),vt(n),i,r)),X(n)){var l=K(n).activeInputs;E(n,l)}},Tt=function(t,e,n,i){var r=function(t,e,n){var i=tt(e),r=i.activeInputs,o=i.passiveInputs,a=ht(r,t,n);return null===a?[pt(o,t,n)[1],!1]:[a[2],!0]}(t,n,i),o=(0,s.Z)(r,2),a=o[0],u=o[1];null!==a&&(ft(t,a),!u||e||mt(t)||vt(t).disconnect(yt(n),i))},St=function(){function t(e){(0,c.Z)(this,t),this._map=new Map(e)}return(0,u.Z)(t,[{key:"size",get:function(){return this._map.size}},{key:"entries",value:function(){return this._map.entries()}},{key:"forEach",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach((function(i,r){return t.call(n,i,r,e)}))}},{key:"get",value:function(t){return this._map.get(t)}},{key:"has",value:function(t){return this._map.has(t)}},{key:"keys",value:function(){return this._map.keys()}},{key:"values",value:function(){return this._map.values()}}]),t}(),At={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Ct=n(4942);function Dt(t,e,n,i,r){if("function"===typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,r);else{var o=t.getChannelData(i);if(0===e[n].byteLength)e[n]=o.slice(r,r+128);else{var a=new Float32Array(o.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(a)}}}var Ot=function(t,e,n,i,r){"function"===typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],i,r):0!==e[n].byteLength&&t.getChannelData(i).set(e[n],r)},Mt=function(t,e){for(var n=[],i=0;i<t;i+=1){for(var r=[],o="number"===typeof e?e:e[i],a=0;a<o;a+=1)r.push(new Float32Array(128));n.push(r)}return n},Et=function(t,e){var n=T(g,t),i=vt(e);return T(n,i)},Rt=function(){var t=j(N().mark((function t(e,n,i,r,o,a,s){var u,c,l,h,f,p,d,v,y,m,_;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=null===n?128*Math.ceil(e.context.length/128):n.length,c=r.channelCount*r.numberOfInputs,l=o.reduce((function(t,e){return t+e}),0),h=0===l?null:i.createBuffer(l,u,i.sampleRate),void 0!==a){t.next=6;break}throw new Error("Missing the processor constructor.");case 6:return f=K(e),t.next=9,Et(i,e);case 9:p=t.sent,d=Mt(r.numberOfInputs,r.channelCount),v=Mt(r.numberOfOutputs,o),y=Array.from(e.parameters.keys()).reduce((function(t,e){return(0,R.Z)((0,R.Z)({},t),{},(0,Ct.Z)({},e,new Float32Array(128)))}),{}),m=N().mark((function t(u){var l,m,_,g,k,x,w,b,Z;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.numberOfInputs>0&&null!==n)for(l=0;l<r.numberOfInputs;l+=1)for(m=0;m<r.channelCount;m+=1)Dt(n,d[l],m,m,u);for(void 0!==a.parameterDescriptors&&null!==n&&a.parameterDescriptors.forEach((function(t,e){var i=t.name;Dt(n,y,i,c+e,u)})),_=0;_<r.numberOfInputs;_+=1)for(g=0;g<o[_];g+=1)0===v[_][g].byteLength&&(v[_][g]=new Float32Array(128));if(t.prev=3,k=d.map((function(t,e){return 0===f.activeInputs[e].size?[]:t})),x=s(u/i.sampleRate,i.sampleRate,(function(){return p.process(k,v,y)})),null!==h)for(w=0,b=0;w<r.numberOfOutputs;w+=1){for(Z=0;Z<o[w];Z+=1)Ot(h,v[w],Z,b+Z,u);b+=o[w]}if(x){t.next=9;break}return t.abrupt("return","break");case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(3),e.dispatchEvent(new ErrorEvent("processorerror",{colno:t.t0.colno,filename:t.t0.filename,lineno:t.t0.lineno,message:t.t0.message})),t.abrupt("return","break");case 15:case"end":return t.stop()}}),t,null,[[3,11]])})),_=0;case 15:if(!(_<u)){t.next=23;break}return t.delegateYield(m(_),"t0",17);case 17:if("break"!==t.t0){t.next=20;break}return t.abrupt("break",23);case 20:_+=128,t.next=15;break;case 23:return t.abrupt("return",h);case 24:case"end":return t.stop()}}),t)})));return function(e,n,i,r,o,a,s){return t.apply(this,arguments)}}(),qt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Ft={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Vt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},It={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Nt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Pt=function(t){var e=new MessageChannel,n=e.port1,i=e.port2;return new Promise((function(e){var r=function(){i.onmessage=null,n.close(),i.close(),e()};i.onmessage=function(){return r()};try{n.postMessage(t,[t])}finally{r()}}))},jt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Lt=function(t,e,n){var i=e[n];if(void 0===i)throw t();return i},zt={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Wt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Bt=function(){return new DOMException("","InvalidStateError")},Gt=function(){return new DOMException("","InvalidAccessError")},Ut={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Yt=function(t,e,n,i,r,o,a,s,u,c,l){for(var h=c.length,f=s,p=0;p<h;p+=1){for(var d=n[0]*c[p],v=1;v<r;v+=1){var y=f-v&u-1;d+=n[v]*o[y],d-=t[v]*a[y]}for(var m=r;m<i;m+=1)d+=n[m]*o[f-m&u-1];for(var _=r;_<e;_+=1)d-=t[_]*a[f-_&u-1];o[f]=c[p],a[f]=d,f=f+1&u-1,l[p]=d}return f},Qt=function(t,e,n,i){var r=n instanceof Float64Array?n:new Float64Array(n),o=i instanceof Float64Array?i:new Float64Array(i),a=r.length,s=o.length,u=Math.min(a,s);if(1!==r[0]){for(var c=0;c<a;c+=1)o[c]/=r[0];for(var l=1;l<s;l+=1)r[l]/=r[0]}for(var h=new Float32Array(32),f=new Float32Array(32),p=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels,v=0;v<d;v+=1){var y=t.getChannelData(v),m=p.getChannelData(v);h.fill(0),f.fill(0),Yt(r,a,o,s,u,h,f,0,32,y,m)}return p},Xt=function(){var t=j(N().mark((function t(e,n,i,r,o,a,s,u,c,l,h,f,p,d,v,y){var m;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e(n,n)&&e(i,i)&&e(o,o)&&e(a,a)&&e(u,u)&&e(c,c)&&e(l,l)&&e(h,h)&&e(f,f)&&e(p,p)&&e(d,d))){t.next=5;break}return t.next=3,Promise.all([e(r,r),e(s,s),e(v,v),e(y,y)]);case 3:return m=t.sent,t.abrupt("return",m.every((function(t){return t})));case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e,n,i,r,o,a,s,u,c,l,h,f,p,d,v,y){return t.apply(this,arguments)}}(),Ht={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},$t=function(t){var e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{var n=t.decodeAudioData(e.buffer,(function(){}));return void 0!==n&&(n.catch((function(){})),!0)}catch(i){}return!1},Jt={numberOfChannels:1},Kt=function(t,e,n){var i=e[n];void 0!==i&&i!==t[n]&&(t[n]=i)},te=function(t,e){Kt(t,e,"channelCount"),Kt(t,e,"channelCountMode"),Kt(t,e,"channelInterpretation")},ee=function(t){return"function"===typeof t.getFloatTimeDomainData},ne=function(t,e,n){var i=e[n];void 0!==i&&i!==t[n].value&&(t[n].value=i)},ie=function(t){t.start=function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if("number"===typeof r&&r<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,i,r)}}(t.start)},re=function(t){var e;t.stop=(e=t.stop,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},oe=function(t,e){return null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))))},ae=function(t){return new Promise((function(e,n){var i=new MessageChannel,r=i.port1,o=i.port2;r.onmessage=function(t){var n=t.data;r.close(),o.close(),e(n)},r.onmessageerror=function(t){var e=t.data;r.close(),o.close(),n(e)},o.postMessage(t)}))},se=function(){var t=j(N().mark((function t(e,n){var i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(n);case 2:return i=t.sent,t.abrupt("return",new e(i));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ue=function(t,e){var n=t.createBiquadFilter();return te(n,e),ne(n,e,"Q"),ne(n,e,"detune"),ne(n,e,"frequency"),ne(n,e,"gain"),Kt(n,e,"type"),n},ce=function(t,e){var n=t.createChannelSplitter(e.numberOfOutputs);return te(n,e),function(t){var e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:function(){return e},set:function(t){if(t!==e)throw Bt()}}),Object.defineProperty(t,"channelCountMode",{get:function(){return"explicit"},set:function(t){if("explicit"!==t)throw Bt()}}),Object.defineProperty(t,"channelInterpretation",{get:function(){return"discrete"},set:function(t){if("discrete"!==t)throw Bt()}})}(n),n},le=n(3366);function he(t,e){if(null==t)return{};var n,i,r=(0,le.Z)(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var fe=function(t,e){return t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t},pe=["offset"],de=function(t,e){var n=t.createDelay(e.maxDelayTime);return te(n,e),ne(n,e,"delayTime"),n},ve=function(t,e){var n=t.createGain();return te(n,e),ne(n,e,"gain"),n};function ye(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function me(t,e){for(var n,i,r=[0,0],o=t.length-1;o>=0;o-=1)i=e,(r=[(n=r)[0]*i[0]-n[1]*i[1],n[0]*i[1]+n[1]*i[0]])[0]+=t[o];return r}var _e,ge,ke,xe,we,be,Ze=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],Te=function(t,e,n,i){return t.createScriptProcessor(e,n,i)},Se=["channelCount","channelCountMode","pan"],Ae=["curve","oversample"],Ce=function(){return new DOMException("","NotSupportedError")},De={numberOfChannels:1},Oe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Me={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Ee={disableNormalization:!1},Re={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},qe=function(){return new DOMException("","UnknownError")},Fe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ve=function(t,e,n){return void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0])},Ie=function(t){if(null===t)return!1;var e=t.length;return e%2!==0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},Ne=function(t,e,n,i){for(var r=t;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);var o=Object.getOwnPropertyDescriptor(r,e),a=o.get,s=o.set;Object.defineProperty(t,e,{get:n(a),set:i(s)})},Pe=function(t){var e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},je=function(t){var e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch(i){return!1}},Le=function(t){var e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},ze=function(){try{new DOMException}catch(t){return!1}return!0},We=function(){return new Promise((function(t){var e=new ArrayBuffer(0),n=new MessageChannel,i=n.port1,r=n.port2;i.onmessage=function(e){var n=e.data;return t(null!==n)},r.postMessage(e,[e])}))},Be=function(t,e){var n=e.createGain();t.connect(n);var i,r=(i=t.disconnect,function(){i.call(t,n),t.removeEventListener("ended",r)});t.addEventListener("ended",r),fe(t,n),t.stop=function(e){var i=!1;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(i)try{e.call(t,r)}catch(o){n.gain.setValueAtTime(0,r)}else e.call(t,r),i=!0}}(t.stop)},Ge=function(t,e){return function(n){var i={value:t};return Object.defineProperties(n,{currentTarget:i,target:i}),"function"===typeof e?e.call(t,n):e.handleEvent.call(t,n)}},Ue=function(t){return function(e,n,i,r){var o=(0,s.Z)(i,3),a=o[0],u=o[1],c=o[2];t(e[u],[n,a,c],(function(t){return t[0]===n&&t[1]===a}),r)}}(at),Ye=function(t){return function(e,n,i,r){var o=(0,s.Z)(i,3),a=o[0],u=o[1],c=o[2],l=e.get(a);void 0===l?e.set(a,new Set([[u,n,c]])):t(l,[u,n,c],(function(t){return t[0]===u&&t[1]===n}),r)}}(at),Qe=function(t){return function(e,n,i,r){return t(e[r],(function(t){return t[0]===n&&t[1]===i}))}}(S),Xe=new WeakMap,He=function(t){return function(e){var n;return null!==(n=t.get(e))&&void 0!==n?n:0}}(Xe),$e=(_e=new Map,ge=new WeakMap,function(t,e){var n=ge.get(t);if(void 0!==n)return n;var i=_e.get(t);if(void 0!==i)return i;try{var r=e();return r instanceof Promise?(_e.set(t,r),r.catch((function(){return!1})).then((function(e){return _e.delete(t),ge.set(t,e),e}))):(ge.set(t,r),r)}catch(o){return ge.set(t,!1),!1}}),Je="undefined"===typeof window?null:window,Ke=function(t,e){return function(n,i){var r=n.createAnalyser();if(te(r,i),!(i.maxDecibels>i.minDecibels))throw e();return Kt(r,i,"fftSize"),Kt(r,i,"maxDecibels"),Kt(r,i,"minDecibels"),Kt(r,i,"smoothingTimeConstant"),t(ee,(function(){return ee(r)}))||function(t){t.getFloatTimeDomainData=function(e){var n=new Uint8Array(e.length);t.getByteTimeDomainData(n);for(var i=Math.max(n.length,t.fftSize),r=0;r<i;r+=1)e[r]=.0078125*(n[r]-128);return e}}(r),r}}($e,W),tn=function(t){return function(e){var n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer}}(K),en=function(t,e,n){return function(){var i=j(N().mark((function i(r,o,a){var u;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=t(r),i.next=3,Promise.all(u.activeInputs.map((function(t,i){return Array.from(t).map(function(){var t=j(N().mark((function t(u){var c,l,h,f,p,d;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=(0,s.Z)(u,2),l=c[0],h=c[1],f=e(l),t.next=4,f.render(l,o);case 4:p=t.sent,d=r.context.destination,n(l)||r===d&&n(r)||p.connect(a,h,i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).reduce((function(t,e){return[].concat((0,$.Z)(t),(0,$.Z)(e))}),[]));case 3:case"end":return i.stop()}}),i)})));return function(t,e,n){return i.apply(this,arguments)}}()}(K,tn,mt),nn=function(t,e,n){return function(){var i=new WeakMap,r=function(){var r=j(N().mark((function r(o,a){var s,u;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e(o),L(s,a)||(u={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,fftSize:s.fftSize,maxDecibels:s.maxDecibels,minDecibels:s.minDecibels,smoothingTimeConstant:s.smoothingTimeConstant},s=t(a,u)),i.set(a,s),r.next=6,n(o,a,s);case 6:return r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}}}(Ke,vt,en),rn=(ke=v,function(t){var e=ke.get(t);if(void 0===e)throw Bt();return e}),on=function(t){return null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null}(Je),an=function(t){return function(e){return null!==t&&e instanceof t}}(on),sn=new WeakMap,un=function(t){return function(){function e(t){(0,c.Z)(this,e),this._nativeEventTarget=t,this._listeners=new WeakMap}return(0,u.Z)(e,[{key:"addEventListener",value:function(e,n,i){if(null!==n){var r=this._listeners.get(n);void 0===r&&(r=t(this,n),"function"===typeof n&&this._listeners.set(n,r)),this._nativeEventTarget.addEventListener(e,r,i)}}},{key:"dispatchEvent",value:function(t){return this._nativeEventTarget.dispatchEvent(t)}},{key:"removeEventListener",value:function(t,e,n){var i=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===i?null:i,n)}}]),e}()}(Ge),cn=function(t){return null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null}(Je),ln=function(t){return function(e){return null!==t&&e instanceof t}}(cn),hn=function(t){return function(e){return null!==t&&"function"===typeof t.AudioNode&&e instanceof t.AudioNode}}(Je),fn=function(t){return function(e){return null!==t&&"function"===typeof t.AudioParam&&e instanceof t.AudioParam}}(Je),pn=function(t){return null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null}(Je),dn=function(t,e,n,i,r,o,a,s,l,h,p,d,v,m,_,g){return function(h){(0,q.Z)(x,h);var k=(0,F.Z)(x);function x(e,i,r,o){var a;(0,c.Z)(this,x),(a=k.call(this,r))._context=e,a._nativeAudioNode=r;var s=p(e);return d(s)&&!0!==n(gt,(function(){return gt(s,g)}))&&wt(r),f.set((0,U.Z)(a),r),y.set((0,U.Z)(a),new Set),"closed"!==e.state&&i&&D((0,U.Z)(a)),t((0,U.Z)(a),o,r),a}return(0,u.Z)(x,[{key:"channelCount",get:function(){return this._nativeAudioNode.channelCount},set:function(t){this._nativeAudioNode.channelCount=t}},{key:"channelCountMode",get:function(){return this._nativeAudioNode.channelCountMode},set:function(t){this._nativeAudioNode.channelCountMode=t}},{key:"channelInterpretation",get:function(){return this._nativeAudioNode.channelInterpretation},set:function(t){this._nativeAudioNode.channelInterpretation=t}},{key:"context",get:function(){return this._context}},{key:"numberOfInputs",get:function(){return this._nativeAudioNode.numberOfInputs}},{key:"numberOfOutputs",get:function(){return this._nativeAudioNode.numberOfOutputs}},{key:"connect",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();var u=p(this._context),c=_(u);if(v(t)||m(t))throw o();if(rt(t)){var h=vt(t);try{var f,d=lt(this._nativeAudioNode,h,n,s),y=_t(this);if(c||y)(f=this._nativeAudioNode).disconnect.apply(f,(0,$.Z)(d));"closed"!==this.context.state&&!y&&_t(t)&&D(t)}catch(Z){if(12===Z.code)throw o();throw Z}var g=e(this,t,n,s,c);if(g){var k=l([this],t);kt(k,i(c))}return t}var x=yt(t);if("playbackRate"===x.name&&1024===x.maxValue)throw a();try{this._nativeAudioNode.connect(x,n),(c||_t(this))&&this._nativeAudioNode.disconnect(x,n)}catch(Z){if(12===Z.code)throw o();throw Z}var w=bt(this,t,n,c);if(w){var b=l([this],t);kt(b,i(c))}}},{key:"disconnect",value:function(t,e,n){var i,a=p(this._context),u=_(a);if(void 0===t)i=function(t,e){var n,i=K(t),r=[],o=(0,J.Z)(i.outputs);try{for(o.s();!(n=o.n()).done;){var a=n.value;ot(a)?Zt.apply(void 0,[t,e].concat((0,$.Z)(a))):Tt.apply(void 0,[t,e].concat((0,$.Z)(a))),r.push(a[0])}}catch(s){o.e(s)}finally{o.f()}return i.outputs.clear(),r}(this,u);else if("number"===typeof t){if(t<0||t>=this.numberOfOutputs)throw r();i=function(t,e,n){var i,r=K(t),o=[],a=(0,J.Z)(r.outputs);try{for(a.s();!(i=a.n()).done;){var s=i.value;s[1]===n&&(ot(s)?Zt.apply(void 0,[t,e].concat((0,$.Z)(s))):Tt.apply(void 0,[t,e].concat((0,$.Z)(s))),o.push(s[0]),r.outputs.delete(s))}}catch(u){a.e(u)}finally{a.f()}return o}(this,u,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw r();if(rt(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw r();if(i=function(t,e,n,i,r){var o=K(t);return Array.from(o.outputs).filter((function(t){return t[0]===n&&(void 0===i||t[1]===i)&&(void 0===r||t[2]===r)})).map((function(n){return ot(n)?Zt.apply(void 0,[t,e].concat((0,$.Z)(n))):Tt.apply(void 0,[t,e].concat((0,$.Z)(n))),o.outputs.delete(n),n[0]}))}(this,u,t,e,n),0===i.length)throw o()}var c,h=(0,J.Z)(i);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=l([this],f);kt(d,s)}}catch(v){h.e(v)}finally{h.f()}}}]),x}(h)}((xe=h,function(t,e,n){for(var i=[],r=0;r<n.numberOfInputs;r+=1)i.push(new Set);xe.set(t,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),function(t,e,n,i,r,o,a,s,u,c,l,h,f){var p=new WeakMap;return function(d,v,y,m,_){var g=o(v),k=g.activeInputs,x=g.passiveInputs,w=o(d).outputs,b=s(d),Z=function(o){var s=u(v),c=u(d);if(o){var g=A(x,d,y,m);t(k,d,g,!1),_||h(d)||n(c,s,y,m),f(v)&&D(v)}else{var w=i(k,d,y,m);e(x,m,w,!1),_||h(d)||r(c,s,y,m);var b=a(v);if(0===b)l(v)&&E(v,k);else{var Z=p.get(v);void 0!==Z&&clearTimeout(Z),p.set(v,setTimeout((function(){l(v)&&E(v,k)}),1e3*b))}}};return!!c(w,[v,y,m],(function(t){return t[0]===v&&t[1]===y&&t[2]===m}),!0)&&(b.add(Z),l(d)?t(k,d,[y,m,Z],!0):e(x,m,[d,y,Z],!0),!0)}}(Ue,Ye,lt,Qe,dt,K,He,C,vt,at,X,mt,_t),$e,function(t,e,n,i,r,o){return function(a){return function(s,u){var c=t.get(s);if(void 0===c){if(!a&&o(s)){var l,h=i(s),f=n(s).outputs,p=(0,J.Z)(f);try{for(p.s();!(l=p.n()).done;){var d=l.value;if(ot(d)){var v=i(d[0]);e(h,v,d[1],d[2])}else{var y=r(d[0]);h.disconnect(y,d[1])}}}catch(m){p.e(m)}finally{p.f()}}t.set(s,u)}else t.set(s,c+u)}}}(m,dt,K,vt,yt,X),W,Gt,Ce,function(t,e,n,i,r,o,a,s){return function(u,c){var l=e.get(u);if(void 0===l)throw new Error("Missing the expected cycle count.");var h=o(u.context),f=s(h);if(l===c){if(e.delete(u),!f&&a(u)){var p,d=i(u),v=n(u).outputs,y=(0,J.Z)(v);try{for(y.s();!(p=y.n()).done;){var m=p.value;if(ot(m)){var _=i(m[0]);t(d,_,m[1],m[2])}else{var g=r(m[0]);d.connect(g,m[1])}}}catch(k){y.e(k)}finally{y.f()}}}else e.set(u,l-c)}}(lt,m,K,vt,yt,rn,X,an),function(t,e,n){return function i(r,o){var a=rt(o)?o:n(t,o);if(function(t){return"delayTime"in t}(a))return[];if(r[0]===a)return[r];if(r.includes(a))return[];var s=e(a).outputs;return Array.from(s).map((function(t){return i([].concat((0,$.Z)(r),[a]),t[0])})).reduce((function(t,e){return t.concat(e)}),[])}}(sn,K,T),un,rn,ln,hn,fn,an,pn),vn=function(t,e,n,i,r,o){return function(t){(0,q.Z)(s,t);var a=(0,F.Z)(s);function s(t,n){var u;(0,c.Z)(this,s);var l=r(t),h=(0,R.Z)((0,R.Z)({},V),n),f=i(l,h),p=o(l)?e():null;return(u=a.call(this,t,!1,f,p))._nativeAnalyserNode=f,u}return(0,u.Z)(s,[{key:"fftSize",get:function(){return this._nativeAnalyserNode.fftSize},set:function(t){this._nativeAnalyserNode.fftSize=t}},{key:"frequencyBinCount",get:function(){return this._nativeAnalyserNode.frequencyBinCount}},{key:"maxDecibels",get:function(){return this._nativeAnalyserNode.maxDecibels},set:function(t){var e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}},{key:"minDecibels",get:function(){return this._nativeAnalyserNode.minDecibels},set:function(t){var e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}},{key:"smoothingTimeConstant",get:function(){return this._nativeAnalyserNode.smoothingTimeConstant},set:function(t){this._nativeAnalyserNode.smoothingTimeConstant=t}},{key:"getByteFrequencyData",value:function(t){this._nativeAnalyserNode.getByteFrequencyData(t)}},{key:"getByteTimeDomainData",value:function(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}},{key:"getFloatFrequencyData",value:function(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}},{key:"getFloatTimeDomainData",value:function(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}}]),s}(t)}(dn,nn,W,Ke,rn,an),yn=new WeakSet,mn=function(t){return null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null}(Je),_n=(we=new Uint32Array(1),function(t){return we[0]=t,we[0]}),gn=function(t,e){return function(n){n.copyFromChannel=function(i,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(o),s=t(r);if(s>=n.numberOfChannels)throw e();for(var u=n.length,c=n.getChannelData(s),l=i.length,h=a<0?-a:0;h+a<u&&h<l;h+=1)i[h]=c[h+a]},n.copyToChannel=function(i,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(o),s=t(r);if(s>=n.numberOfChannels)throw e();for(var u=n.length,c=n.getChannelData(s),l=i.length,h=a<0?-a:0;h+a<u&&h<l;h+=1)c[h+a]=i[h]}}}(_n,W),kn=function(t){return function(e){e.copyFromChannel=function(n){return function(i,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(o),s=t(r);if(a<e.length)return n.call(e,i,s,a)}}(e.copyFromChannel),e.copyToChannel=function(n){return function(i,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(o),s=t(r);if(a<e.length)return n.call(e,i,s,a)}}(e.copyToChannel)}}(_n),xn=function(t,e,n,i,r,o,a,s){var l=null;return function(h){function f(u){if((0,c.Z)(this,f),null===r)throw new Error("Missing the native OfflineAudioContext constructor.");var h=(0,R.Z)((0,R.Z)({},G),u),p=h.length,d=h.numberOfChannels,v=h.sampleRate;null===l&&(l=new r(1,1,44100));var y=null!==i&&e(o,o)?new i({length:p,numberOfChannels:d,sampleRate:v}):l.createBuffer(d,p,v);if(0===y.numberOfChannels)throw n();return"function"!==typeof y.copyFromChannel?(a(y),B(y)):e(z,(function(){return z(y)}))||s(y),t.add(y),y}return(0,u.Z)(f,null,[{key:h,value:function(e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===f.prototype||t.has(e)}}]),f}(Symbol.hasInstance)}(yn,$e,Ce,mn,on,function(t){return function(){if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch(e){return!1}return!0}}(mn),gn,kn),wn=function(t){return function(e,n){var i=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(e.destination);n.addEventListener("ended",(function t(){n.removeEventListener("ended",t),n.disconnect(i),i.disconnect()}))}}(ve),bn=function(t,e,n){return function(){var i=j(N().mark((function i(r,o,a){var u;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=e(r),i.next=3,Promise.all(Array.from(u.activeInputs).map(function(){var e=j(N().mark((function e(i){var r,u,c,l,h;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s.Z)(i,2),u=r[0],c=r[1],l=t(u),e.next=4,l.render(u,o);case 4:h=e.sent,n(u)||h.connect(a,c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return i.stop()}}),i)})));return function(t,e,n){return i.apply(this,arguments)}}()}(tn,tt,mt),Zn=function(t){return function(e,n,i){return t(n,e,i)}}(bn),Tn=function(t,e,n,i,r,o,a,s,u,c,l){return function(h,f){var p=h.createBufferSource();return te(p,f),ne(p,f,"playbackRate"),Kt(p,f,"buffer"),Kt(p,f,"loop"),Kt(p,f,"loopEnd"),Kt(p,f,"loopStart"),e(n,(function(){return n(h)}))||function(t){t.start=function(e){var n=!1;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;if(n)throw Bt();e.call(t,i,r,o),n=!0}}(t.start)}(p),e(i,(function(){return i(h)}))||u(p),e(r,(function(){return r(h)}))||c(p,h),e(o,(function(){return o(h)}))||ie(p),e(a,(function(){return a(h)}))||l(p,h),e(s,(function(){return s(h)}))||re(p),t(h,p),p}}(wn,$e,(function(t){var e=t.createBufferSource();e.start();try{e.start()}catch(n){return!0}return!1}),(function(t){var e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch(i){return!1}return!0}),(function(t){var e=t.createBufferSource();e.start();try{e.stop()}catch(n){return!1}return!0}),Pe,je,Le,(function(t){t.start=function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=t.buffer,a=null===o?i:Math.min(o.duration,i);null!==o&&a>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,r)}}(t.start)}),function(t){return function(e,n){var i=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=i),t(e,"buffer",(function(t){return function(){var n=t.call(e);return n===i?null:n}}),(function(t){return function(n){return t.call(e,null===n?i:n)}}))}}(Ne),Be),Sn=function(t,e){return function(n,i,r){return t(i).replay(r),e(i,n,r)}}(function(t){return function(e){var n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer}}(tt),bn),An=function(t,e,n,i,r){return function(){var o=new WeakMap,a=null,s=null,u=function(){var u=j(N().mark((function u(c,l){var h,f,p,d;return N().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(h=n(c),(f=L(h,l))||(p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value},h=e(l,p),null!==a&&(d=h).start.apply(d,(0,$.Z)(a)),null!==s&&h.stop(s)),o.set(l,h),f){u.next=9;break}return u.next=7,i(l,c.playbackRate,h.playbackRate);case 7:u.next=11;break;case 9:return u.next=11,t(l,c.playbackRate,h.playbackRate);case 11:return u.next=13,r(c,l,h);case 13:return u.abrupt("return",h);case 14:case"end":return u.stop()}}),u)})));return function(t,e){return u.apply(this,arguments)}}();return{set start(t){a=t},set stop(t){s=t},render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}}}(Zn,Tn,vt,Sn,en),Cn=function(t,e,n,i,r,o,s,u,c,l,h,f,p){return function(d,v,y){var m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,_=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,g=new a.AutomationEventList(y.defaultValue),k=v?i(g):null,x={get defaultValue(){return y.defaultValue},get maxValue(){return null===m?y.maxValue:m},get minValue(){return null===_?y.minValue:_},get value(){return y.value},set value(t){y.value=t,x.setValueAtTime(t,d.context.currentTime)},cancelAndHoldAtTime:function(t){if("function"===typeof y.cancelAndHoldAtTime)null===k&&g.flush(d.context.currentTime),g.add(r(t)),y.cancelAndHoldAtTime(t);else{var e=Array.from(g).pop();null===k&&g.flush(d.context.currentTime),g.add(r(t));var n=Array.from(g).pop();y.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?y.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?y.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?y.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&y.setValueCurveAtTime(n.values,n.startTime,n.duration))}return x},cancelScheduledValues:function(t){return null===k&&g.flush(d.context.currentTime),g.add(o(t)),y.cancelScheduledValues(t),x},exponentialRampToValueAtTime:function(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===k&&g.flush(d.context.currentTime),g.add(s(t,e)),y.exponentialRampToValueAtTime(t,e),x},linearRampToValueAtTime:function(t,e){return null===k&&g.flush(d.context.currentTime),g.add(u(t,e)),y.linearRampToValueAtTime(t,e),x},setTargetAtTime:function(t,e,n){return null===k&&g.flush(d.context.currentTime),g.add(c(t,e,n)),y.setTargetAtTime(t,e,n),x},setValueAtTime:function(t,e){return null===k&&g.flush(d.context.currentTime),g.add(l(t,e)),y.setValueAtTime(t,e),x},setValueCurveAtTime:function(t,e,n){var i=t instanceof Float32Array?t:new Float32Array(t);if(null!==f&&"webkitAudioContext"===f.name){for(var r=e+n,o=d.context.sampleRate,a=Math.ceil(e*o),s=Math.floor(r*o),u=s-a,c=new Float32Array(u),l=0;l<u;l+=1){var v=(i.length-1)/n*((a+l)/o-e),m=Math.floor(v),_=Math.ceil(v);c[l]=m===_?i[m]:(1-(v-m))*i[m]+(1-(_-v))*i[_]}null===k&&g.flush(d.context.currentTime),g.add(h(c,e,n)),y.setValueCurveAtTime(c,e,n);var w=s/o;w<r&&p(x,c[c.length-1],w),p(x,i[i.length-1],r)}else null===k&&g.flush(d.context.currentTime),g.add(h(i,e,n)),y.setValueCurveAtTime(i,e,n);return x}};return n.set(x,y),e.set(x,d),t(x,k),x}}((be=p,function(t,e){be.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),sn,d,(function(t){return{replay:function(e){var n,i=(0,J.Z)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if("exponentialRampToValue"===r.type){var o=r.endTime,a=r.value;e.exponentialRampToValueAtTime(a,o)}else if("linearRampToValue"===r.type){var s=r.endTime,u=r.value;e.linearRampToValueAtTime(u,s)}else if("setTarget"===r.type){var c=r.startTime,l=r.target,h=r.timeConstant;e.setTargetAtTime(l,c,h)}else if("setValue"===r.type){var f=r.startTime,p=r.value;e.setValueAtTime(p,f)}else{if("setValueCurve"!==r.type)throw new Error("Can't apply an unknown automation.");var d=r.duration,v=r.startTime,y=r.values;e.setValueCurveAtTime(y,v,d)}}}catch(m){i.e(m)}finally{i.f()}}}}),a.createCancelAndHoldAutomationEvent,a.createCancelScheduledValuesAutomationEvent,a.createExponentialRampToValueAutomationEvent,a.createLinearRampToValueAutomationEvent,a.createSetTargetAutomationEvent,a.createSetValueAutomationEvent,a.createSetValueCurveAutomationEvent,cn,(function t(e,n,i){try{e.setValueAtTime(n,i)}catch(r){if(9!==r.code)throw r;t(e,n,i+1e-7)}})),Dn=function(t,e,n,i,r,o,a,s){return function(t){(0,q.Z)(h,t);var l=(0,F.Z)(h);function h(t,i){var s;(0,c.Z)(this,h);var u=o(t),f=(0,R.Z)((0,R.Z)({},H),i),p=r(u,f),d=a(u),v=d?e():null;return(s=l.call(this,t,!1,p,v))._audioBufferSourceNodeRenderer=v,s._isBufferNullified=!1,s._isBufferSet=null!==f.buffer,s._nativeAudioBufferSourceNode=p,s._onended=null,s._playbackRate=n((0,U.Z)(s),d,p.playbackRate,Q,Y),s}return(0,u.Z)(h,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer},set:function(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw i();this._isBufferSet=!0}}},{key:"loop",get:function(){return this._nativeAudioBufferSourceNode.loop},set:function(t){this._nativeAudioBufferSourceNode.loop=t}},{key:"loopEnd",get:function(){return this._nativeAudioBufferSourceNode.loopEnd},set:function(t){this._nativeAudioBufferSourceNode.loopEnd=t}},{key:"loopStart",get:function(){return this._nativeAudioBufferSourceNode.loopStart},set:function(t){this._nativeAudioBufferSourceNode.loopStart=t}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"===typeof t?s(this,t):null;this._nativeAudioBufferSourceNode.onended=e;var n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"playbackRate",get:function(){return this._playbackRate}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,n,i),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===i?[e,n]:[e,n,i]),"closed"!==this.context.state){D(this);var r=function e(){t._nativeAudioBufferSourceNode.removeEventListener("ended",e),X(t)&&M(t)};this._nativeAudioBufferSourceNode.addEventListener("ended",r)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}}]),h}(t)}(dn,An,Cn,Bt,Tn,rn,an,Ge),On=function(t,e,n,i,r,o,a,s){return function(t){(0,q.Z)(h,t);var l=(0,F.Z)(h);function h(t,n){var i;(0,c.Z)(this,h);var u=o(t),f=a(u),p=r(u,n,f),d=f?e(s):null;return(i=l.call(this,t,!1,p,d))._isNodeOfNativeOfflineAudioContext=f,i._nativeAudioDestinationNode=p,i}return(0,u.Z)(h,[{key:"channelCount",get:function(){return this._nativeAudioDestinationNode.channelCount},set:function(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}},{key:"channelCountMode",get:function(){return this._nativeAudioDestinationNode.channelCountMode},set:function(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=t}},{key:"maxChannelCount",get:function(){return this._nativeAudioDestinationNode.maxChannelCount}}]),h}(t)}(dn,(function(t){var e=new WeakMap,n=function(){var n=j(N().mark((function n(i,r){var o;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.destination,e.set(r,o),n.next=4,t(i,r,o);case 4:return n.abrupt("return",o);case 5:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}();return{render:function(t,i){var r=e.get(i);return void 0!==r?Promise.resolve(r):n(t,i)}}}),W,Bt,function(t,e){return function(n,i,r){var o=n.destination;if(o.channelCount!==i)try{o.channelCount=i}catch(s){}r&&"explicit"!==o.channelCountMode&&(o.channelCountMode="explicit"),0===o.maxChannelCount&&Object.defineProperty(o,"maxChannelCount",{value:i});var a=t(n,{channelCount:i,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(a,"channelCount",(function(t){return function(){return t.call(a)}}),(function(t){return function(e){t.call(a,e);try{o.channelCount=e}catch(n){if(e>o.maxChannelCount)throw n}}})),e(a,"channelCountMode",(function(t){return function(){return t.call(a)}}),(function(t){return function(e){t.call(a,e),o.channelCountMode=e}})),e(a,"channelInterpretation",(function(t){return function(){return t.call(a)}}),(function(t){return function(e){t.call(a,e),o.channelInterpretation=e}})),Object.defineProperty(a,"maxChannelCount",{get:function(){return o.maxChannelCount}}),a.connect(o),a}}(ve,Ne),rn,an,en),Mn=function(t,e,n,i,r){return function(){var o=new WeakMap,a=function(){var a=j(N().mark((function a(s,u){var c,l,h;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=n(s),(l=L(c,u))||(h={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type},c=e(u,h)),o.set(u,c),l){a.next=15;break}return a.next=7,i(u,s.Q,c.Q);case 7:return a.next=9,i(u,s.detune,c.detune);case 9:return a.next=11,i(u,s.frequency,c.frequency);case 11:return a.next=13,i(u,s.gain,c.gain);case 13:a.next=23;break;case 15:return a.next=17,t(u,s.Q,c.Q);case 17:return a.next=19,t(u,s.detune,c.detune);case 19:return a.next=21,t(u,s.frequency,c.frequency);case 21:return a.next=23,t(u,s.gain,c.gain);case 23:return a.next=25,r(s,u,c);case 25:return a.abrupt("return",c);case 26:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}();return{render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}}}(Zn,ue,vt,Sn,en),En=function(t){return function(e,n){return t.set(e,n)}}(Xe),Rn=function(t,e,n,i,r,o,a,s){return function(t){(0,q.Z)(h,t);var l=(0,F.Z)(h);function h(t,i){var u;(0,c.Z)(this,h);var f=o(t),p=(0,R.Z)((0,R.Z)({},qt),i),d=r(f,p),v=a(f),y=v?n():null;return(u=l.call(this,t,!1,d,y))._Q=e((0,U.Z)(u),v,d.Q,Q,Y),u._detune=e((0,U.Z)(u),v,d.detune,1200*Math.log2(Q),-1200*Math.log2(Q)),u._frequency=e((0,U.Z)(u),v,d.frequency,t.sampleRate/2,0),u._gain=e((0,U.Z)(u),v,d.gain,40*Math.log10(Q),Y),u._nativeBiquadFilterNode=d,s((0,U.Z)(u),1),u}return(0,u.Z)(h,[{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"gain",get:function(){return this._gain}},{key:"Q",get:function(){return this._Q}},{key:"type",get:function(){return this._nativeBiquadFilterNode.type},set:function(t){this._nativeBiquadFilterNode.type=t}},{key:"getFrequencyResponse",value:function(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(r){if(11===r.code)throw i();throw r}if(t.length!==e.length||e.length!==n.length)throw i()}}]),h}(t)}(dn,Cn,Mn,Gt,ue,rn,an,En),qn=function(t,e){return function(n,i,r){var o,a,s=new Set;return n.connect=(o=n.connect,function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=0===s.size;if(e(r))return o.call(n,r,a,u),t(s,[r,a,u],(function(t){return t[0]===r&&t[1]===a&&t[2]===u}),!0),c&&i(),r;o.call(n,r,a),t(s,[r,a],(function(t){return t[0]===r&&t[1]===a}),!0),c&&i()}),n.disconnect=(a=n.disconnect,function(t,i,o){var u=s.size>0;if(void 0===t)a.apply(n),s.clear();else if("number"===typeof t){a.call(n,t);var c,l=(0,J.Z)(s);try{for(l.s();!(c=l.n()).done;){var h=c.value;h[1]===t&&s.delete(h)}}catch(y){l.e(y)}finally{l.f()}}else{e(t)?a.call(n,t,i,o):a.call(n,t,i);var f,p=(0,J.Z)(s);try{for(p.s();!(f=p.n()).done;){var d=f.value;d[0]!==t||void 0!==i&&d[1]!==i||void 0!==o&&d[2]!==o||s.delete(d)}}catch(y){p.e(y)}finally{p.f()}}var v=0===s.size;u&&v&&r()}),n}}(at,hn),Fn=function(t,e){return function(n,i){i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:function(){return 1},set:function(){throw t()}}),Object.defineProperty(i,"channelCountMode",{get:function(){return"explicit"},set:function(){throw t()}});var r=n.createBufferSource();e(i,(function(){for(var t=i.numberOfInputs,e=0;e<t;e+=1)r.connect(i,0,e)}),(function(){return r.disconnect(i)}))}}(Bt,qn),Vn=function(t,e){return function(n,i){var r=n.createChannelMerger(i.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,r),te(r,i),r}}(cn,Fn),In=function(t,e,n){return function(){var i=new WeakMap,r=function(){var r=j(N().mark((function r(o,a){var s,u;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e(o),L(s,a)||(u={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfInputs:s.numberOfInputs},s=t(a,u)),i.set(a,s),r.next=6,n(o,a,s);case 6:return r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}}}(Vn,vt,en),Nn=function(t,e,n,i,r){return function(t){(0,q.Z)(a,t);var o=(0,F.Z)(a);function a(t,s){(0,c.Z)(this,a);var u=i(t),l=(0,R.Z)((0,R.Z)({},Ft),s),h=n(u,l),f=r(u)?e():null;return o.call(this,t,!1,h,f)}return(0,u.Z)(a)}(t)}(dn,In,Vn,rn,an),Pn=function(t,e,n){return function(){var i=new WeakMap,r=function(){var r=j(N().mark((function r(o,a){var s,u;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e(o),L(s,a)||(u={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfOutputs:s.numberOfOutputs},s=t(a,u)),i.set(a,s),r.next=6,n(o,a,s);case 6:return r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}}}(ce,vt,en),jn=function(t,e,n,i,r,o){return function(t){(0,q.Z)(s,t);var a=(0,F.Z)(s);function s(t,u){(0,c.Z)(this,s);var l=i(t),h=o((0,R.Z)((0,R.Z)({},Vt),u)),f=n(l,h),p=r(l)?e():null;return a.call(this,t,!1,f,p)}return(0,u.Z)(s)}(t)}(dn,Pn,ce,rn,an,(function(t){return(0,R.Z)((0,R.Z)({},t),{},{channelCount:t.numberOfOutputs})})),Ln=function(t,e,n,i){return function(r,o){var a=o.offset,s=he(o,pe),u=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(r,(0,R.Z)((0,R.Z)({},s),{},{gain:a})),h=u.getChannelData(0);h[0]=1,h[1]=1,c.buffer=u,c.loop=!0;var f={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){l.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){l.channelInterpretation=t},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(t){c.onended=t},addEventListener:function(){return c.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return c.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return c.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c.start.call(c,t)},stop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c.stop.call(c,t)}};return t(r,c),i(fe(f,l),(function(){return c.connect(l)}),(function(){return c.disconnect(l)}))}}(wn,Tn,ve,qn),zn=function(t,e,n,i,r){return function(o,a){if(void 0===o.createConstantSource)return n(o,a);var s=o.createConstantSource();return te(s,a),ne(s,a,"offset"),e(i,(function(){return i(o)}))||ie(s),e(r,(function(){return r(o)}))||re(s),t(o,s),s}}(wn,$e,Ln,Pe,Le),Wn=function(t,e,n,i,r){return function(){var o=new WeakMap,a=null,s=null,u=function(){var u=j(N().mark((function u(c,l){var h,f,p;return N().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(h=n(c),(f=L(h,l))||(p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value},h=e(l,p),null!==a&&h.start(a),null!==s&&h.stop(s)),o.set(l,h),f){u.next=9;break}return u.next=7,i(l,c.offset,h.offset);case 7:u.next=11;break;case 9:return u.next=11,t(l,c.offset,h.offset);case 11:return u.next=13,r(c,l,h);case 13:return u.abrupt("return",h);case 14:case"end":return u.stop()}}),u)})));return function(t,e){return u.apply(this,arguments)}}();return{set start(t){a=t},set stop(t){s=t},render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}}}(Zn,zn,vt,Sn,en),Bn=function(t,e,n,i,r,o,a){return function(t){(0,q.Z)(l,t);var s=(0,F.Z)(l);function l(t,a){var u;(0,c.Z)(this,l);var h=r(t),f=(0,R.Z)((0,R.Z)({},It),a),p=i(h,f),d=o(h),v=d?n():null;return(u=s.call(this,t,!1,p,v))._constantSourceNodeRenderer=v,u._nativeConstantSourceNode=p,u._offset=e((0,U.Z)(u),d,p.offset,Q,Y),u._onended=null,u}return(0,u.Z)(l,[{key:"offset",get:function(){return this._offset}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"===typeof t?a(this,t):null;this._nativeConstantSourceNode.onended=e;var n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){D(this);var n=function e(){t._nativeConstantSourceNode.removeEventListener("ended",e),X(t)&&M(t)};this._nativeConstantSourceNode.addEventListener("ended",n)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}}]),l}(t)}(dn,Cn,Wn,zn,rn,an,Ge),Gn=function(t,e){return function(n,i){var r=n.createConvolver();if(te(r,i),i.disableNormalization===r.normalize&&(r.normalize=!i.disableNormalization),Kt(r,i,"buffer"),i.channelCount>2)throw t();if(e(r,"channelCount",(function(t){return function(){return t.call(r)}}),(function(e){return function(n){if(n>2)throw t();return e.call(r,n)}})),"max"===i.channelCountMode)throw t();return e(r,"channelCountMode",(function(t){return function(){return t.call(r)}}),(function(e){return function(n){if("max"===n)throw t();return e.call(r,n)}})),r}}(Ce,Ne),Un=function(t,e,n){return function(){var i=new WeakMap,r=function(){var r=j(N().mark((function r(o,a){var s,u;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=e(o),L(s,a)||(u={buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,disableNormalization:!s.normalize},s=t(a,u)),i.set(a,s),!ct(s)){r.next=9;break}return r.next=7,n(o,a,s.inputs[0]);case 7:r.next=11;break;case 9:return r.next=11,n(o,a,s);case 11:return r.abrupt("return",s);case 12:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}}}(Gn,vt,en),Yn=function(t,e,n,i,r,o){return function(t){(0,q.Z)(s,t);var a=(0,F.Z)(s);function s(t,u){var l;(0,c.Z)(this,s);var h=i(t),f=(0,R.Z)((0,R.Z)({},Nt),u),p=n(h,f),d=r(h)?e():null;return(l=a.call(this,t,!1,p,d))._isBufferNullified=!1,l._nativeConvolverNode=p,null!==f.buffer&&o((0,U.Z)(l),f.buffer.duration),l}return(0,u.Z)(s,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer},set:function(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){var e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}},{key:"normalize",get:function(){return this._nativeConvolverNode.normalize},set:function(t){this._nativeConvolverNode.normalize=t}}]),s}(t)}(dn,Un,Gn,rn,an,En),Qn=function(t,e,n,i,r){return function(o){var a=new WeakMap,s=function(){var s=j(N().mark((function s(u,c){var l,h,f;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(l=n(u),(h=L(l,c))||(f={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:o},l=e(c,f)),a.set(c,l),h){s.next=9;break}return s.next=7,i(c,u.delayTime,l.delayTime);case 7:s.next=11;break;case 9:return s.next=11,t(c,u.delayTime,l.delayTime);case 11:return s.next=13,r(u,c,l);case 13:return s.abrupt("return",l);case 14:case"end":return s.stop()}}),s)})));return function(t,e){return s.apply(this,arguments)}}();return{render:function(t,e){var n=a.get(e);return void 0!==n?Promise.resolve(n):s(t,e)}}}}(Zn,de,vt,Sn,en),Xn=function(t,e,n,i,r,o,a){return function(t){(0,q.Z)(l,t);var s=(0,F.Z)(l);function l(t,u){var h;(0,c.Z)(this,l);var f=r(t),p=(0,R.Z)((0,R.Z)({},jt),u),d=i(f,p),v=o(f),y=v?n(p.maxDelayTime):null;return(h=s.call(this,t,!1,d,y))._delayTime=e((0,U.Z)(h),v,d.delayTime),a((0,U.Z)(h),p.maxDelayTime),h}return(0,u.Z)(l,[{key:"delayTime",get:function(){return this._delayTime}}]),l}(t)}(dn,Cn,Qn,de,rn,an,En),Hn=function(t){return function(e,n){var i=e.createDynamicsCompressor();if(te(i,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return ne(i,n,"attack"),ne(i,n,"knee"),ne(i,n,"ratio"),ne(i,n,"release"),ne(i,n,"threshold"),i}}(Ce),$n=function(t,e,n,i,r){return function(){var o=new WeakMap,a=function(){var a=j(N().mark((function a(s,u){var c,l,h;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=n(s),(l=L(c,u))||(h={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value},c=e(u,h)),o.set(u,c),l){a.next=17;break}return a.next=7,i(u,s.attack,c.attack);case 7:return a.next=9,i(u,s.knee,c.knee);case 9:return a.next=11,i(u,s.ratio,c.ratio);case 11:return a.next=13,i(u,s.release,c.release);case 13:return a.next=15,i(u,s.threshold,c.threshold);case 15:a.next=27;break;case 17:return a.next=19,t(u,s.attack,c.attack);case 19:return a.next=21,t(u,s.knee,c.knee);case 21:return a.next=23,t(u,s.ratio,c.ratio);case 23:return a.next=25,t(u,s.release,c.release);case 25:return a.next=27,t(u,s.threshold,c.threshold);case 27:return a.next=29,r(s,u,c);case 29:return a.abrupt("return",c);case 30:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}();return{render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}}}(Zn,Hn,vt,Sn,en),Jn=function(t,e,n,i,r,o,a,s){return function(t){(0,q.Z)(h,t);var l=(0,F.Z)(h);function h(t,r){var u;(0,c.Z)(this,h);var f=o(t),p=(0,R.Z)((0,R.Z)({},zt),r),d=i(f,p),v=a(f),y=v?n():null;return(u=l.call(this,t,!1,d,y))._attack=e((0,U.Z)(u),v,d.attack),u._knee=e((0,U.Z)(u),v,d.knee),u._nativeDynamicsCompressorNode=d,u._ratio=e((0,U.Z)(u),v,d.ratio),u._release=e((0,U.Z)(u),v,d.release),u._threshold=e((0,U.Z)(u),v,d.threshold),s((0,U.Z)(u),.006),u}return(0,u.Z)(h,[{key:"attack",get:function(){return this._attack}},{key:"channelCount",get:function(){return this._nativeDynamicsCompressorNode.channelCount},set:function(t){var e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,r()}},{key:"channelCountMode",get:function(){return this._nativeDynamicsCompressorNode.channelCountMode},set:function(t){var e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,r()}},{key:"knee",get:function(){return this._knee}},{key:"ratio",get:function(){return this._ratio}},{key:"reduction",get:function(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}},{key:"release",get:function(){return this._release}},{key:"threshold",get:function(){return this._threshold}}]),h}(t)}(dn,Cn,$n,Hn,Ce,rn,an,En),Kn=function(t,e,n,i,r){return function(){var o=new WeakMap,a=function(){var a=j(N().mark((function a(s,u){var c,l,h;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=n(s),(l=L(c,u))||(h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value},c=e(u,h)),o.set(u,c),l){a.next=9;break}return a.next=7,i(u,s.gain,c.gain);case 7:a.next=11;break;case 9:return a.next=11,t(u,s.gain,c.gain);case 11:return a.next=13,r(s,u,c);case 13:return a.abrupt("return",c);case 14:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}();return{render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}}}(Zn,ve,vt,Sn,en),ti=function(t,e,n,i,r,o){return function(t){(0,q.Z)(s,t);var a=(0,F.Z)(s);function s(t,u){var l;(0,c.Z)(this,s);var h=r(t),f=(0,R.Z)((0,R.Z)({},Wt),u),p=i(h,f),d=o(h),v=d?n():null;return(l=a.call(this,t,!1,p,v))._gain=e((0,U.Z)(l),d,p.gain,Q,Y),l}return(0,u.Z)(s,[{key:"gain",get:function(){return this._gain}}]),s}(t)}(dn,Cn,Kn,ve,rn,an),ei=function(t,e,n,i){return function(r,o,a){var s=a.channelCount,u=a.channelCountMode,c=a.channelInterpretation,l=a.feedback,h=a.feedforward,f=oe(o,r.sampleRate),p=l instanceof Float64Array?l:new Float64Array(l),d=h instanceof Float64Array?h:new Float64Array(h),v=p.length,y=d.length,m=Math.min(v,y);if(0===v||v>20)throw i();if(0===p[0])throw e();if(0===y||y>20)throw i();if(0===d[0])throw e();if(1!==p[0]){for(var _=0;_<y;_+=1)d[_]/=p[0];for(var g=1;g<v;g+=1)p[g]/=p[0]}var k=n(r,f,s,s);k.channelCount=s,k.channelCountMode=u,k.channelInterpretation=c;for(var x=[],w=[],b=[],Z=0;Z<s;Z+=1){x.push(0);var T=new Float32Array(32),S=new Float32Array(32);T.fill(0),S.fill(0),w.push(T),b.push(S)}k.onaudioprocess=function(t){for(var e=t.inputBuffer,n=t.outputBuffer,i=e.numberOfChannels,r=0;r<i;r+=1){var o=e.getChannelData(r),a=n.getChannelData(r);x[r]=Yt(p,v,d,y,m,w[r],b[r],x[r],32,o,a)}};var A=r.sampleRate/2,C={get bufferSize(){return f},get channelCount(){return k.channelCount},set channelCount(t){k.channelCount=t},get channelCountMode(){return k.channelCountMode},set channelCountMode(t){k.channelCountMode=t},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(t){k.channelInterpretation=t},get context(){return k.context},get inputs(){return[k]},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},addEventListener:function(){return k.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return k.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse:function(e,n,i){if(e.length!==n.length||n.length!==i.length)throw t();for(var r=e.length,o=0;o<r;o+=1){var a=-Math.PI*(e[o]/A),s=[Math.cos(a),Math.sin(a)],u=ye(me(d,s),me(p,s));n[o]=Math.sqrt(u[0]*u[0]+u[1]*u[1]),i[o]=Math.atan2(u[1],u[0])}},removeEventListener:function(){return k.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};return fe(C,k)}}(Gt,Bt,Te,Ce),ni=function(t,e,n,i){return function(r){return t($t,(function(){return $t(r)}))?Promise.resolve(t(i,i)).then((function(t){if(!t){var e=n(r,512,0,1);r.oncomplete=function(){e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=function(){return r.currentTime},e.connect(r.destination)}return r.startRendering()})):new Promise((function(t){var n=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=function(e){n.disconnect(),t(e.renderedBuffer)},n.connect(r.destination),r.startRendering()}))}}($e,ve,Te,function(t,e){return function(){if(null===e)return Promise.resolve(!1);var n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((function(t){n.oncomplete=function(){i.disconnect(),t(0!==n.currentTime)},n.startRendering()}))}}(ve,on)),ii=function(t,e,n,i,r){return function(o,a){var s=new WeakMap,u=null,c=function(){var c=j(N().mark((function c(l,h){var f,p,d,v,y;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(f=null,p=e(l),d=L(p,h),void 0===h.createIIRFilter?f=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(p=h.createIIRFilter(a,o)),s.set(h,null===f?p:f),null===f){c.next=17;break}if(null!==u){c.next=11;break}if(null!==n){c.next=9;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 9:v=new n(l.context.destination.channelCount,l.context.length,h.sampleRate),u=j(N().mark((function t(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(l,v,v.destination);case 2:return t.next=4,r(v);case 4:return e=t.sent,t.abrupt("return",Qt(e,h,o,a));case 6:case"end":return t.stop()}}),t)})))();case 11:return c.next=13,u;case 13:return y=c.sent,f.buffer=y,f.start(0),c.abrupt("return",f);case 17:return c.next=19,i(l,h,p);case 19:return c.abrupt("return",p);case 20:case"end":return c.stop()}}),c)})));return function(t,e){return c.apply(this,arguments)}}();return{render:function(t,e){var n=s.get(e);return void 0!==n?Promise.resolve(n):c(t,e)}}}}(Tn,vt,on,en,ni),ri=function(t){return function(e,n,i){if(void 0===e.createIIRFilter)return t(e,n,i);var r=e.createIIRFilter(i.feedforward,i.feedback);return te(r,i),r}}(ei),oi=function(t,e,n,i,r,o){return function(t){(0,q.Z)(s,t);var a=(0,F.Z)(s);function s(t,u){var l;(0,c.Z)(this,s);var h=i(t),f=r(h),p=(0,R.Z)((0,R.Z)({},Ut),u),d=e(h,f?null:t.baseLatency,p),v=f?n(p.feedback,p.feedforward):null;return l=a.call(this,t,!1,d,v),function(t){var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,function(n,i,r){if(n.length!==i.length||i.length!==r.length)throw Gt();return e.call(t,n,i,r)})}(d),l._nativeIIRFilterNode=d,o((0,U.Z)(l),1),l}return(0,u.Z)(s,[{key:"getFrequencyResponse",value:function(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}}]),s}(t)}(dn,ri,ii,rn,an,En),ai=function(t,e,n,i,r,o,a,s){return function(u,c){var l=c.listener,h=void 0===l.forwardX?function(){var h=new Float32Array(1),f=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=a(c),d=!1,v=[0,0,-1,0,1,0],y=[0,0,0],m=function(){if(!d){d=!0;var t=i(c,256,9,0);t.onaudioprocess=function(t){var e=t.inputBuffer,n=[o(e,h,0),o(e,h,1),o(e,h,2),o(e,h,3),o(e,h,4),o(e,h,5)];n.some((function(t,e){return t!==v[e]}))&&(l.setOrientation.apply(l,n),v=n);var i=[o(e,h,6),o(e,h,7),o(e,h,8)];i.some((function(t,e){return t!==y[e]}))&&(l.setPosition.apply(l,i),y=i)},f.connect(t)}},_=function(t){return function(e){e!==v[t]&&(v[t]=e,l.setOrientation.apply(l,(0,$.Z)(v)))}},g=function(t){return function(e){e!==y[t]&&(y[t]=e,l.setPosition.apply(l,(0,$.Z)(y)))}},k=function(e,i,o){var a=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});a.connect(f,0,e),a.start(),Object.defineProperty(a.offset,"defaultValue",{get:function(){return i}});var l,h,d,v,y,_,g,k=t({context:u},p,a.offset,Q,Y);return s(k,"value",(function(t){return function(){return t.call(k)}}),(function(t){return function(e){try{t.call(k,e)}catch(n){if(9!==n.code)throw n}m(),p&&o(e)}})),k.cancelAndHoldAtTime=(l=k.cancelAndHoldAtTime,p?function(){throw r()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=l.apply(k,e);return m(),i}),k.cancelScheduledValues=(h=k.cancelScheduledValues,p?function(){throw r()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=h.apply(k,e);return m(),i}),k.exponentialRampToValueAtTime=(d=k.exponentialRampToValueAtTime,p?function(){throw r()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=d.apply(k,e);return m(),i}),k.linearRampToValueAtTime=(v=k.linearRampToValueAtTime,p?function(){throw r()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=v.apply(k,e);return m(),i}),k.setTargetAtTime=(y=k.setTargetAtTime,p?function(){throw r()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=y.apply(k,e);return m(),i}),k.setValueAtTime=(_=k.setValueAtTime,p?function(){throw r()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=_.apply(k,e);return m(),i}),k.setValueCurveAtTime=(g=k.setValueCurveAtTime,p?function(){throw r()}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=g.apply(k,e);return m(),i}),k};return{forwardX:k(0,0,_(0)),forwardY:k(1,0,_(1)),forwardZ:k(2,-1,_(2)),positionX:k(6,0,g(0)),positionY:k(7,0,g(1)),positionZ:k(8,0,g(2)),upX:k(3,0,_(3)),upY:k(4,1,_(4)),upZ:k(5,0,_(5))}}():l,f=h.forwardX,p=h.forwardY,d=h.forwardZ,v=h.positionX,y=h.positionY,m=h.positionZ,_=h.upX,g=h.upY,k=h.upZ;return{get forwardX(){return f},get forwardY(){return p},get forwardZ(){return d},get positionX(){return v},get positionY(){return y},get positionZ(){return m},get upX(){return _},get upY(){return g},get upZ(){return k}}}}(Cn,Vn,zn,Te,Ce,Ve,an,Ne),si=new WeakMap,ui=function(t,e,n,i,r,o){return function(n){(0,q.Z)(s,n);var a=(0,F.Z)(s);function s(n,o){var u;return(0,c.Z)(this,s),(u=a.call(this,n))._nativeContext=n,v.set((0,U.Z)(u),n),i(n)&&r.set(n,new Set),u._destination=new t((0,U.Z)(u),o),u._listener=e((0,U.Z)(u),n),u._onstatechange=null,u}return(0,u.Z)(s,[{key:"currentTime",get:function(){return this._nativeContext.currentTime}},{key:"destination",get:function(){return this._destination}},{key:"listener",get:function(){return this._listener}},{key:"onstatechange",get:function(){return this._onstatechange},set:function(t){var e="function"===typeof t?o(this,t):null;this._nativeContext.onstatechange=e;var n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}},{key:"sampleRate",get:function(){return this._nativeContext.sampleRate}},{key:"state",get:function(){return this._nativeContext.state}}]),s}(n)}(On,ai,un,an,si,Ge),ci=function(t,e,n,i,r,o){return function(a,s){var u=a.createOscillator();return te(u,s),ne(u,s,"detune"),ne(u,s,"frequency"),void 0!==s.periodicWave?u.setPeriodicWave(s.periodicWave):Kt(u,s,"type"),e(n,(function(){return n(a)}))||ie(u),e(i,(function(){return i(a)}))||o(u,a),e(r,(function(){return r(a)}))||re(u),t(a,u),u}}(wn,$e,Pe,je,Le,Be),li=function(t,e,n,i,r){return function(){var o=new WeakMap,a=null,s=null,u=null,c=function(){var c=j(N().mark((function c(l,h){var f,p,d;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(f=n(l),(p=L(f,h))||(d={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:null===a?void 0:a,type:f.type},f=e(h,d),null!==s&&f.start(s),null!==u&&f.stop(u)),o.set(h,f),p){c.next=11;break}return c.next=7,i(h,l.detune,f.detune);case 7:return c.next=9,i(h,l.frequency,f.frequency);case 9:c.next=15;break;case 11:return c.next=13,t(h,l.detune,f.detune);case 13:return c.next=15,t(h,l.frequency,f.frequency);case 15:return c.next=17,r(l,h,f);case 17:return c.abrupt("return",f);case 18:case"end":return c.stop()}}),c)})));return function(t,e){return c.apply(this,arguments)}}();return{set periodicWave(t){a=t},set start(t){s=t},set stop(t){u=t},render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):c(t,e)}}}}(Zn,ci,vt,Sn,en),hi=function(t,e,n,i,r,o,a){return function(t){(0,q.Z)(l,t);var s=(0,F.Z)(l);function l(t,a){var u;(0,c.Z)(this,l);var h=r(t),f=(0,R.Z)((0,R.Z)({},Oe),a),p=n(h,f),d=o(h),v=d?i():null,y=t.sampleRate/2;return(u=s.call(this,t,!1,p,v))._detune=e((0,U.Z)(u),d,p.detune,153600,-153600),u._frequency=e((0,U.Z)(u),d,p.frequency,y,-y),u._nativeOscillatorNode=p,u._onended=null,u._oscillatorNodeRenderer=v,null!==u._oscillatorNodeRenderer&&void 0!==f.periodicWave&&(u._oscillatorNodeRenderer.periodicWave=f.periodicWave),u}return(0,u.Z)(l,[{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"onended",get:function(){return this._onended},set:function(t){var e="function"===typeof t?a(this,t):null;this._nativeOscillatorNode.onended=e;var n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}},{key:"type",get:function(){return this._nativeOscillatorNode.type},set:function(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}},{key:"setPeriodicWave",value:function(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){D(this);var n=function e(){t._nativeOscillatorNode.removeEventListener("ended",e),X(t)&&M(t)};this._nativeOscillatorNode.addEventListener("ended",n)}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}}]),l}(t)}(dn,Cn,ci,li,rn,an,Ge),fi=function(t){return function(e,n){var i=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return i.buffer=r,i.loop=!0,i.connect(n),i.start(),function(){i.stop(),i.disconnect(n)}}}(Tn),pi=function(t,e,n,i,r){return function(o,a){var s=a.curve,u=a.oversample,c=he(a,Ae),l=o.createWaveShaper(),h=o.createWaveShaper();te(l,c),te(h,c);var f=n(o,(0,R.Z)((0,R.Z)({},c),{},{gain:1})),p=n(o,(0,R.Z)((0,R.Z)({},c),{},{gain:-1})),d=n(o,(0,R.Z)((0,R.Z)({},c),{},{gain:1})),v=n(o,(0,R.Z)((0,R.Z)({},c),{},{gain:-1})),y=null,m=!1,_=null,g={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){f.channelCount=t,p.channelCount=t,l.channelCount=t,d.channelCount=t,h.channelCount=t,v.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){f.channelCountMode=t,p.channelCountMode=t,l.channelCountMode=t,d.channelCountMode=t,h.channelCountMode=t,v.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){f.channelInterpretation=t,p.channelInterpretation=t,l.channelInterpretation=t,d.channelInterpretation=t,h.channelInterpretation=t,v.channelInterpretation=t},get context(){return l.context},get curve(){return _},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)l.curve=n,h.curve=n;else{var r=n.length,a=new Float32Array(r+2-r%2),s=new Float32Array(r+2-r%2);a[0]=n[0],s[0]=-n[r-1];for(var u=Math.ceil((r+1)/2),c=(r+1)/2-1,p=1;p<u;p+=1){var d=p/u*c,v=Math.floor(d),g=Math.ceil(d);a[p]=v===g?n[v]:(1-(d-v))*n[v]+(1-(g-d))*n[g],s[p]=v===g?-n[r-1-v]:-(1-(d-v))*n[r-1-v]-(1-(g-d))*n[r-1-g]}a[u]=r%2===1?n[u-1]:(n[u-2]+n[u-1])/2,l.curve=a,h.curve=s}_=n,m&&(i(_)&&null===y?y=t(o,f):null!==y&&(y(),y=null))},get inputs(){return[f]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(t){l.oversample=t,h.oversample=t},addEventListener:function(){return f.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return f.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return f.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};null!==s&&(g.curve=s instanceof Float32Array?s:new Float32Array(s)),u!==g.oversample&&(g.oversample=u);return r(fe(g,d),(function(){f.connect(l).connect(d),f.connect(p).connect(h).connect(v).connect(d),m=!0,i(_)&&(y=t(o,f))}),(function(){f.disconnect(l),l.disconnect(d),f.disconnect(p),p.disconnect(h),h.disconnect(v),v.disconnect(d),m=!1,null!==y&&(y(),y=null)}))}}(fi,Bt,ve,Ie,qn),di=function(t,e,n,i,r,o,a){return function(s,u){var c=s.createWaveShaper();if(null!==o&&"webkitAudioContext"===o.name&&void 0===s.createGain().gain.automationRate)return n(s,u);te(c,u);var l=null===u.curve||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(null!==l&&l.length<2)throw e();Kt(c,{curve:l},"curve"),Kt(c,u,"oversample");var h=null,f=!1;a(c,"curve",(function(t){return function(){return t.call(c)}}),(function(e){return function(n){return e.call(c,n),f&&(i(n)&&null===h?h=t(s,c):i(n)||null===h||(h(),h=null)),n}}));return r(c,(function(){f=!0,i(c.curve)&&(h=t(s,c))}),(function(){f=!1,null!==h&&(h(),h=null)}))}}(fi,Bt,pi,Ie,qn,cn,Ne),vi=function(t,e,n,i,r,o,a,s,u,c){return function(l,h){var f=h.coneInnerAngle,p=h.coneOuterAngle,d=h.coneOuterGain,v=h.distanceModel,y=h.maxDistance,m=h.orientationX,_=h.orientationY,g=h.orientationZ,k=h.panningModel,x=h.positionX,w=h.positionY,b=h.positionZ,Z=h.refDistance,T=h.rolloffFactor,S=he(h,Ze),A=l.createPanner();if(S.channelCount>2)throw a();if("max"===S.channelCountMode)throw a();te(A,S);var C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},D=n(l,(0,R.Z)((0,R.Z)({},C),{},{channelInterpretation:"speakers",numberOfInputs:6})),O=i(l,(0,R.Z)((0,R.Z)({},S),{},{gain:1})),M=i(l,(0,R.Z)((0,R.Z)({},C),{},{gain:1})),E=i(l,(0,R.Z)((0,R.Z)({},C),{},{gain:0})),q=i(l,(0,R.Z)((0,R.Z)({},C),{},{gain:0})),F=i(l,(0,R.Z)((0,R.Z)({},C),{},{gain:0})),V=i(l,(0,R.Z)((0,R.Z)({},C),{},{gain:0})),I=i(l,(0,R.Z)((0,R.Z)({},C),{},{gain:0})),N=r(l,256,6,1),P=o(l,(0,R.Z)((0,R.Z)({},C),{},{curve:new Float32Array([1,1]),oversample:"none"})),j=[m,_,g],L=[x,w,b],z=new Float32Array(1);N.onaudioprocess=function(t){var e=t.inputBuffer,n=[u(e,z,0),u(e,z,1),u(e,z,2)];n.some((function(t,e){return t!==j[e]}))&&(A.setOrientation.apply(A,n),j=n);var i=[u(e,z,3),u(e,z,4),u(e,z,5)];i.some((function(t,e){return t!==L[e]}))&&(A.setPosition.apply(A,i),L=i)},Object.defineProperty(E.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(q.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(F.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(V.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(I.gain,"defaultValue",{get:function(){return 0}});var W={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(t){if(t>2)throw a();O.channelCount=t,A.channelCount=t},get channelCountMode(){return A.channelCountMode},set channelCountMode(t){if("max"===t)throw a();O.channelCountMode=t,A.channelCountMode=t},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(t){O.channelInterpretation=t,A.channelInterpretation=t},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(t){A.coneInnerAngle=t},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(t){A.coneOuterAngle=t},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();A.coneOuterGain=t},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(t){A.distanceModel=t},get inputs(){return[O]},get maxDistance(){return A.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;A.maxDistance=t},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return E.gain},get orientationZ(){return q.gain},get panningModel(){return A.panningModel},set panningModel(t){A.panningModel=t},get positionX(){return F.gain},get positionY(){return V.gain},get positionZ(){return I.gain},get refDistance(){return A.refDistance},set refDistance(t){if(t<0)throw new RangeError;A.refDistance=t},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;A.rolloffFactor=t},addEventListener:function(){return O.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return O.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return O.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};f!==W.coneInnerAngle&&(W.coneInnerAngle=f),p!==W.coneOuterAngle&&(W.coneOuterAngle=p),d!==W.coneOuterGain&&(W.coneOuterGain=d),v!==W.distanceModel&&(W.distanceModel=v),y!==W.maxDistance&&(W.maxDistance=y),m!==W.orientationX.value&&(W.orientationX.value=m),_!==W.orientationY.value&&(W.orientationY.value=_),g!==W.orientationZ.value&&(W.orientationZ.value=g),k!==W.panningModel&&(W.panningModel=k),x!==W.positionX.value&&(W.positionX.value=x),w!==W.positionY.value&&(W.positionY.value=w),b!==W.positionZ.value&&(W.positionZ.value=b),Z!==W.refDistance&&(W.refDistance=Z),T!==W.rolloffFactor&&(W.rolloffFactor=T),1===j[0]&&0===j[1]&&0===j[2]||A.setOrientation.apply(A,(0,$.Z)(j)),0===L[0]&&0===L[1]&&0===L[2]||A.setPosition.apply(A,(0,$.Z)(L));return c(fe(W,A),(function(){O.connect(A),t(O,P,0,0),P.connect(M).connect(D,0,0),P.connect(E).connect(D,0,1),P.connect(q).connect(D,0,2),P.connect(F).connect(D,0,3),P.connect(V).connect(D,0,4),P.connect(I).connect(D,0,5),D.connect(N).connect(l.destination)}),(function(){O.disconnect(A),s(O,P,0,0),P.disconnect(M),M.disconnect(D),P.disconnect(E),E.disconnect(D),P.disconnect(q),q.disconnect(D),P.disconnect(F),F.disconnect(D),P.disconnect(V),V.disconnect(D),P.disconnect(I),I.disconnect(D),D.disconnect(N),N.disconnect(l.destination)}))}}(lt,Bt,Vn,ve,Te,di,Ce,dt,Ve,qn),yi=function(t){return function(e,n){var i=e.createPanner();return void 0===i.orientationX?t(e,n):(te(i,n),ne(i,n,"orientationX"),ne(i,n,"orientationY"),ne(i,n,"orientationZ"),ne(i,n,"positionX"),ne(i,n,"positionY"),ne(i,n,"positionZ"),Kt(i,n,"coneInnerAngle"),Kt(i,n,"coneOuterAngle"),Kt(i,n,"coneOuterGain"),Kt(i,n,"distanceModel"),Kt(i,n,"maxDistance"),Kt(i,n,"panningModel"),Kt(i,n,"refDistance"),Kt(i,n,"rolloffFactor"),i)}}(vi),mi=function(t,e,n,i,r,o,a,s,u,c){return function(){var l=new WeakMap,h=null,f=function(){var f=j(N().mark((function f(p,d){var v,y,m,_,g,k,x,w,b,Z,T,S,A,C,D,O,M,E,q,F;return N().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(v=null,y=o(p),m={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation},_=(0,R.Z)((0,R.Z)({},m),{},{coneInnerAngle:y.coneInnerAngle,coneOuterAngle:y.coneOuterAngle,coneOuterGain:y.coneOuterGain,distanceModel:y.distanceModel,maxDistance:y.maxDistance,panningModel:y.panningModel,refDistance:y.refDistance,rolloffFactor:y.rolloffFactor}),g=L(y,d),"bufferSize"in y?v=i(d,(0,R.Z)((0,R.Z)({},m),{},{gain:1})):g||(k=(0,R.Z)((0,R.Z)({},_),{},{orientationX:y.orientationX.value,orientationY:y.orientationY.value,orientationZ:y.orientationZ.value,positionX:y.positionX.value,positionY:y.positionY.value,positionZ:y.positionZ.value}),y=r(d,k)),l.set(d,null===v?y:v),null===v){f.next=31;break}if(null!==h){f.next=15;break}if(null!==a){f.next=11;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 11:x=new a(6,p.context.length,d.sampleRate),(w=e(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6})).connect(x.destination),h=j(N().mark((function t(){var e,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(function(){var t=j(N().mark((function t(e,i){var r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===i?1:0}),t.next=3,s(x,e,r.offset);case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:for(e=t.sent,i=0;i<6;i+=1)e[i].connect(w,0,i),e[i].start(0);return t.abrupt("return",c(x));case 5:case"end":return t.stop()}}),t)})))();case 15:return f.next=17,h;case 17:return b=f.sent,Z=i(d,(0,R.Z)((0,R.Z)({},m),{},{gain:1})),f.next=21,u(p,d,Z);case 21:for(T=[],S=0;S<b.numberOfChannels;S+=1)T.push(b.getChannelData(S));for(A=[T[0][0],T[1][0],T[2][0]],C=[T[3][0],T[4][0],T[5][0]],D=i(d,(0,R.Z)((0,R.Z)({},m),{},{gain:1})),O=r(d,(0,R.Z)((0,R.Z)({},_),{},{orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:C[0],positionY:C[1],positionZ:C[2]})),Z.connect(D).connect(O.inputs[0]),O.connect(v),M=128;M<b.length;M+=128)E=[T[0][M],T[1][M],T[2][M]],q=[T[3][M],T[4][M],T[5][M]],(E.some((function(t,e){return t!==A[e]}))||q.some((function(t,e){return t!==C[e]})))&&(A=E,C=q,F=M/d.sampleRate,D.gain.setValueAtTime(0,F),D=i(d,(0,R.Z)((0,R.Z)({},m),{},{gain:0})),O=r(d,(0,R.Z)((0,R.Z)({},_),{},{orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:C[0],positionY:C[1],positionZ:C[2]})),D.gain.setValueAtTime(1,F),Z.connect(D).connect(O.inputs[0]),O.connect(v));return f.abrupt("return",v);case 31:if(g){f.next=46;break}return f.next=34,s(d,p.orientationX,y.orientationX);case 34:return f.next=36,s(d,p.orientationY,y.orientationY);case 36:return f.next=38,s(d,p.orientationZ,y.orientationZ);case 38:return f.next=40,s(d,p.positionX,y.positionX);case 40:return f.next=42,s(d,p.positionY,y.positionY);case 42:return f.next=44,s(d,p.positionZ,y.positionZ);case 44:f.next=58;break;case 46:return f.next=48,t(d,p.orientationX,y.orientationX);case 48:return f.next=50,t(d,p.orientationY,y.orientationY);case 50:return f.next=52,t(d,p.orientationZ,y.orientationZ);case 52:return f.next=54,t(d,p.positionX,y.positionX);case 54:return f.next=56,t(d,p.positionY,y.positionY);case 56:return f.next=58,t(d,p.positionZ,y.positionZ);case 58:if(!ct(y)){f.next=63;break}return f.next=61,u(p,d,y.inputs[0]);case 61:f.next=65;break;case 63:return f.next=65,u(p,d,y);case 65:return f.abrupt("return",y);case 66:case"end":return f.stop()}}),f)})));return function(t,e){return f.apply(this,arguments)}}();return{render:function(t,e){var n=l.get(e);return void 0!==n?Promise.resolve(n):f(t,e)}}}}(Zn,Vn,zn,ve,yi,vt,on,Sn,en,ni),_i=function(t,e,n,i,r,o,a){return function(t){(0,q.Z)(l,t);var s=(0,F.Z)(l);function l(t,u){var h;(0,c.Z)(this,l);var f=r(t),p=(0,R.Z)((0,R.Z)({},Me),u),d=n(f,p),v=o(f),y=v?i():null;return(h=s.call(this,t,!1,d,y))._nativePannerNode=d,h._orientationX=e((0,U.Z)(h),v,d.orientationX,Q,Y),h._orientationY=e((0,U.Z)(h),v,d.orientationY,Q,Y),h._orientationZ=e((0,U.Z)(h),v,d.orientationZ,Q,Y),h._positionX=e((0,U.Z)(h),v,d.positionX,Q,Y),h._positionY=e((0,U.Z)(h),v,d.positionY,Q,Y),h._positionZ=e((0,U.Z)(h),v,d.positionZ,Q,Y),a((0,U.Z)(h),1),h}return(0,u.Z)(l,[{key:"coneInnerAngle",get:function(){return this._nativePannerNode.coneInnerAngle},set:function(t){this._nativePannerNode.coneInnerAngle=t}},{key:"coneOuterAngle",get:function(){return this._nativePannerNode.coneOuterAngle},set:function(t){this._nativePannerNode.coneOuterAngle=t}},{key:"coneOuterGain",get:function(){return this._nativePannerNode.coneOuterGain},set:function(t){this._nativePannerNode.coneOuterGain=t}},{key:"distanceModel",get:function(){return this._nativePannerNode.distanceModel},set:function(t){this._nativePannerNode.distanceModel=t}},{key:"maxDistance",get:function(){return this._nativePannerNode.maxDistance},set:function(t){this._nativePannerNode.maxDistance=t}},{key:"orientationX",get:function(){return this._orientationX}},{key:"orientationY",get:function(){return this._orientationY}},{key:"orientationZ",get:function(){return this._orientationZ}},{key:"panningModel",get:function(){return this._nativePannerNode.panningModel},set:function(t){this._nativePannerNode.panningModel=t}},{key:"positionX",get:function(){return this._positionX}},{key:"positionY",get:function(){return this._positionY}},{key:"positionZ",get:function(){return this._positionZ}},{key:"refDistance",get:function(){return this._nativePannerNode.refDistance},set:function(t){this._nativePannerNode.refDistance=t}},{key:"rolloffFactor",get:function(){return this._nativePannerNode.rolloffFactor},set:function(t){this._nativePannerNode.rolloffFactor=t}}]),l}(t)}(dn,Cn,yi,mi,rn,an,En),gi=function(t){return function(e,n){var i=n.disableNormalization,r=n.imag,o=n.real,a=r instanceof Float32Array?r:new Float32Array(r),s=o instanceof Float32Array?o:new Float32Array(o),u=e.createPeriodicWave(s,a,{disableNormalization:i});if(Array.from(r).length<2)throw t();return u}}(W),ki=function(t,e,n,i){return function(r){function o(r,a){(0,c.Z)(this,o);var s=e(r),u=i((0,R.Z)((0,R.Z)({},Ee),a)),l=t(s,u);return n.add(l),l}return(0,u.Z)(o,null,[{key:r,value:function(t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===o.prototype||n.has(t)}}]),o}(Symbol.hasInstance)}(gi,rn,new WeakSet,(function(t){var e=t.imag,n=t.real;return void 0===e?void 0===n?(0,R.Z)((0,R.Z)({},t),{},{imag:[0,0],real:[0,0]}):(0,R.Z)((0,R.Z)({},t),{},{imag:Array.from(n,(function(){return 0})),real:n}):void 0===n?(0,R.Z)((0,R.Z)({},t),{},{imag:e,real:Array.from(e,(function(){return 0}))}):(0,R.Z)((0,R.Z)({},t),{},{imag:e,real:n})})),xi=function(t,e,n,i,r,o){var a=16385,s=new Float32Array([1,1]),u=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l=(0,R.Z)((0,R.Z)({},c),{},{oversample:"none"}),h=function(t,o,h,f,p){if(1===o)return function(t,e,r,o){for(var h=new Float32Array(a),f=new Float32Array(a),p=0;p<a;p+=1){var d=p/16384*u;h[p]=Math.cos(d),f[p]=Math.sin(d)}var v=n(t,(0,R.Z)((0,R.Z)({},c),{},{gain:0})),y=i(t,(0,R.Z)((0,R.Z)({},l),{},{curve:h})),m=i(t,(0,R.Z)((0,R.Z)({},l),{},{curve:s})),_=n(t,(0,R.Z)((0,R.Z)({},c),{},{gain:0})),g=i(t,(0,R.Z)((0,R.Z)({},l),{},{curve:f}));return{connectGraph:function(){e.connect(v),e.connect(void 0===m.inputs?m:m.inputs[0]),e.connect(_),m.connect(r),r.connect(void 0===y.inputs?y:y.inputs[0]),r.connect(void 0===g.inputs?g:g.inputs[0]),y.connect(v.gain),g.connect(_.gain),v.connect(o,0,0),_.connect(o,0,1)},disconnectGraph:function(){e.disconnect(v),e.disconnect(void 0===m.inputs?m:m.inputs[0]),e.disconnect(_),m.disconnect(r),r.disconnect(void 0===y.inputs?y:y.inputs[0]),r.disconnect(void 0===g.inputs?g:g.inputs[0]),y.disconnect(v.gain),g.disconnect(_.gain),v.disconnect(o,0,0),_.disconnect(o,0,1)}}}(t,h,f,p);if(2===o)return function(t,r,o,h){for(var f=new Float32Array(a),p=new Float32Array(a),d=new Float32Array(a),v=new Float32Array(a),y=Math.floor(8192.5),m=0;m<a;m+=1)if(m>y){var _=(m-y)/(16384-y)*u;f[m]=Math.cos(_),p[m]=Math.sin(_),d[m]=0,v[m]=1}else{var g=m/(16384-y)*u;f[m]=1,p[m]=0,d[m]=Math.cos(g),v[m]=Math.sin(g)}var k=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),x=n(t,(0,R.Z)((0,R.Z)({},c),{},{gain:0})),w=i(t,(0,R.Z)((0,R.Z)({},l),{},{curve:f})),b=n(t,(0,R.Z)((0,R.Z)({},c),{},{gain:0})),Z=i(t,(0,R.Z)((0,R.Z)({},l),{},{curve:p})),T=i(t,(0,R.Z)((0,R.Z)({},l),{},{curve:s})),S=n(t,(0,R.Z)((0,R.Z)({},c),{},{gain:0})),A=i(t,(0,R.Z)((0,R.Z)({},l),{},{curve:d})),C=n(t,(0,R.Z)((0,R.Z)({},c),{},{gain:0})),D=i(t,(0,R.Z)((0,R.Z)({},l),{},{curve:v}));return{connectGraph:function(){r.connect(k),r.connect(void 0===T.inputs?T:T.inputs[0]),k.connect(x,0),k.connect(b,0),k.connect(S,1),k.connect(C,1),T.connect(o),o.connect(void 0===w.inputs?w:w.inputs[0]),o.connect(void 0===Z.inputs?Z:Z.inputs[0]),o.connect(void 0===A.inputs?A:A.inputs[0]),o.connect(void 0===D.inputs?D:D.inputs[0]),w.connect(x.gain),Z.connect(b.gain),A.connect(S.gain),D.connect(C.gain),x.connect(h,0,0),S.connect(h,0,0),b.connect(h,0,1),C.connect(h,0,1)},disconnectGraph:function(){r.disconnect(k),r.disconnect(void 0===T.inputs?T:T.inputs[0]),k.disconnect(x,0),k.disconnect(b,0),k.disconnect(S,1),k.disconnect(C,1),T.disconnect(o),o.disconnect(void 0===w.inputs?w:w.inputs[0]),o.disconnect(void 0===Z.inputs?Z:Z.inputs[0]),o.disconnect(void 0===A.inputs?A:A.inputs[0]),o.disconnect(void 0===D.inputs?D:D.inputs[0]),w.disconnect(x.gain),Z.disconnect(b.gain),A.disconnect(S.gain),D.disconnect(C.gain),x.disconnect(h,0,0),S.disconnect(h,0,0),b.disconnect(h,0,1),C.disconnect(h,0,1)}}}(t,h,f,p);throw r()};return function(e,i){var a=i.channelCount,s=i.channelCountMode,u=i.pan,c=he(i,Se);if("max"===s)throw r();var l=t(e,(0,R.Z)((0,R.Z)({},c),{},{channelCount:1,channelCountMode:s,numberOfInputs:2})),f=n(e,(0,R.Z)((0,R.Z)({},c),{},{channelCount:a,channelCountMode:s,gain:1})),p=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:u}),d=h(e,a,f,p,l),v=d.connectGraph,y=d.disconnectGraph;Object.defineProperty(p.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(p.gain,"maxValue",{get:function(){return 1}}),Object.defineProperty(p.gain,"minValue",{get:function(){return-1}});var m={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(t){if(f.channelCount!==t){_&&y();var n=h(e,t,f,p,l);v=n.connectGraph,y=n.disconnectGraph,_&&v()}f.channelCount=t},get channelCountMode(){return f.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw r();f.channelCountMode=t},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(t){f.channelInterpretation=t},get context(){return f.context},get inputs(){return[f]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get pan(){return p.gain},addEventListener:function(){return f.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return f.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return f.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},_=!1;return o(fe(m,l),(function(){v(),_=!0}),(function(){y(),_=!1}))}}(Vn,ce,ve,di,Ce,qn),wi=function(t,e){return function(n,i){var r=i.channelCountMode;if("clamped-max"===r)throw e();if(void 0===n.createStereoPanner)return t(n,i);var o=n.createStereoPanner();return te(o,i),ne(o,i,"pan"),Object.defineProperty(o,"channelCountMode",{get:function(){return r},set:function(t){if(t!==r)throw e()}}),o}}(xi,Ce),bi=function(t,e,n,i,r){return function(){var o=new WeakMap,a=function(){var a=j(N().mark((function a(s,u){var c,l,h;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=n(s),(l=L(c,u))||(h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value},c=e(u,h)),o.set(u,c),l){a.next=9;break}return a.next=7,i(u,s.pan,c.pan);case 7:a.next=11;break;case 9:return a.next=11,t(u,s.pan,c.pan);case 11:if(!ct(c)){a.next=16;break}return a.next=14,r(s,u,c.inputs[0]);case 14:a.next=18;break;case 16:return a.next=18,r(s,u,c);case 18:return a.abrupt("return",c);case 19:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}();return{render:function(t,e){var n=o.get(e);return void 0!==n?Promise.resolve(n):a(t,e)}}}}(Zn,wi,vt,Sn,en),Zi=function(t,e,n,i,r,o){return function(t){(0,q.Z)(s,t);var a=(0,F.Z)(s);function s(t,u){var l;(0,c.Z)(this,s);var h=r(t),f=(0,R.Z)((0,R.Z)({},Re),u),p=n(h,f),d=o(h),v=d?i():null;return(l=a.call(this,t,!1,p,v))._pan=e((0,U.Z)(l),d,p.pan),l}return(0,u.Z)(s,[{key:"pan",get:function(){return this._pan}}]),s}(t)}(dn,Cn,wi,bi,rn,an),Ti=function(t,e,n){return function(){var i=new WeakMap,r=function(){var r=j(N().mark((function r(o,a){var s,u;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=e(o),L(s,a)||(u={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,curve:s.curve,oversample:s.oversample},s=t(a,u)),i.set(a,s),!ct(s)){r.next=9;break}return r.next=7,n(o,a,s.inputs[0]);case 7:r.next=11;break;case 9:return r.next=11,n(o,a,s);case 11:return r.abrupt("return",s);case 12:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}();return{render:function(t,e){var n=i.get(e);return void 0!==n?Promise.resolve(n):r(t,e)}}}}(di,vt,en),Si=function(t,e,n,i,r,o,a){return function(t){(0,q.Z)(l,t);var s=(0,F.Z)(l);function l(t,e){var u;(0,c.Z)(this,l);var h=r(t),f=(0,R.Z)((0,R.Z)({},Fe),e),p=n(h,f),d=o(h)?i():null;return(u=s.call(this,t,!0,p,d))._isCurveNullified=!1,u._nativeWaveShaperNode=p,a((0,U.Z)(u),1),u}return(0,u.Z)(l,[{key:"curve",get:function(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve},set:function(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}},{key:"oversample",get:function(){return this._nativeWaveShaperNode.oversample},set:function(t){this._nativeWaveShaperNode.oversample=t}}]),l}(t)}(dn,Bt,di,Ti,rn,an,En),Ai=function(t){return null!==t&&t.isSecureContext}(Je),Ci=function(t){return function(e,n,i){Object.defineProperties(t,{currentFrame:{configurable:!0,get:function(){return Math.round(e*n)}},currentTime:{configurable:!0,get:function(){return e}}});try{return i()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}}}(Je),Di=new WeakMap,Oi=function(t,e){return function(n){var i=t.get(n);if(void 0!==i)return i;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),t.set(n,i),i}}(Di,on),Mi=Ai?function(t,e,n,i,r,o,a,l,h,f,p,d,v){var y=0;return function(m,g){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"},x=p.get(m);if(void 0!==x&&x.has(g))return Promise.resolve();var T=f.get(m);if(void 0!==T){var S=T.get(g);if(void 0!==S)return S}var A=o(m),C=void 0===A.audioWorklet?r(g).then((function(t){var e=(0,s.Z)(t,2),i=e[0],r=e[1],o=w(i,r),a=(0,s.Z)(o,2),u=a[0],c=a[1],l="".concat(u,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(c,"\n})})(window,'_AWGS')");return n(l)})).then((function(){var t=v._AWGS.pop();if(void 0===t)throw new SyntaxError;i(A.currentTime,A.sampleRate,(function(){return t((0,u.Z)((function t(){(0,c.Z)(this,t)})),void 0,(function(t,n){if(""===t.trim())throw e();var i=_.get(A);if(void 0!==i){if(i.has(t))throw e();Z(n),b(n.parameterDescriptors),i.set(t,n)}else Z(n),b(n.parameterDescriptors),_.set(A,new Map([[t,n]]))}),A.sampleRate,void 0,void 0)}))})):Promise.all([r(g),Promise.resolve(t(d,d))]).then((function(t){var e=(0,s.Z)(t,2),n=(0,s.Z)(e[0],2),i=n[0],r=n[1],o=e[1],u=y+1;y=u;var c=w(i,r),f=(0,s.Z)(c,2),p=f[0],d=f[1],v=o?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",m=o?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",_=o?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",g="".concat(p,";((AudioWorkletProcessor,registerProcessor)=>{").concat(d,"\n})(").concat(v,",(n,p)=>registerProcessor(n,class extends p{").concat(m,"process(i,o,p){").concat(_,"return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac").concat(u,"',class extends AudioWorkletProcessor{process(){return !1}})"),x=new Blob([g],{type:"application/javascript; charset=utf-8"}),b=URL.createObjectURL(x);return A.audioWorklet.addModule(b,k).then((function(){if(l(A))return A;var t=a(A);return t.audioWorklet.addModule(b,k).then((function(){return t}))})).then((function(t){if(null===h)throw new SyntaxError;try{new h(t,"__sac".concat(u))}catch(e){throw new SyntaxError}})).finally((function(){return URL.revokeObjectURL(b)}))}));return void 0===T?f.set(m,new Map([[g,C]])):T.set(g,C),C.then((function(){var t=p.get(m);void 0===t?p.set(m,new Set([g])):t.add(g)})).finally((function(){var t=f.get(m);void 0!==t&&t.delete(g)})),C}}($e,Ce,function(t){return function(e){return new Promise((function(n,i){if(null!==t){var r=t.document.head;if(null===r)i(new SyntaxError);else{var o=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),s=URL.createObjectURL(a),u=t.onerror,c=function(){t.onerror=u,URL.revokeObjectURL(s)};t.onerror=function(e,n,r,o,a){return n===s||n===t.location.href&&1===r&&1===o?(c(),i(a),!1):null!==u?u(e,n,r,o,a):void 0},o.onerror=function(){c(),i(new SyntaxError)},o.onload=function(){c(),n()},o.src=s,o.type="module",r.appendChild(o)}}else i(new SyntaxError)}))}}(Je),Ci,function(t){return function(){var e=j(N().mark((function e(n){var i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:if(!(i=e.sent).ok){e.next=10;break}return e.next=7,i.text();case 7:return e.t0=e.sent,e.t1=i.url,e.abrupt("return",[e.t0,e.t1]);case 10:e.next=14;break;case 12:e.prev=12,e.t2=e.catch(0);case 14:throw t();case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}((function(){return new DOMException("","AbortError")})),rn,Oi,an,pn,new WeakMap,new WeakMap,function(t,e){return j(N().mark((function n(){var i,r,o,a,s,u,c;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t){n.next=2;break}return n.abrupt("return",!0);case 2:if(null!==e){n.next=4;break}return n.abrupt("return",!1);case 4:return i=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),o=URL.createObjectURL(i),a=!1,s=!1,n.prev=9,n.next=12,r.audioWorklet.addModule(o);case 12:return u=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator(),u.port.onmessage=function(){return a=!0},u.onprocessorerror=function(){return s=!0},c.connect(u),c.start(0),n.next=20,r.startRendering();case 20:n.next=24;break;case 22:n.prev=22,n.t0=n.catch(9);case 24:return n.prev=24,URL.revokeObjectURL(o),n.finish(24);case 27:return n.abrupt("return",a&&!s);case 28:case"end":return n.stop()}}),n,null,[[9,22,24,27]])})))}(pn,on),Je):void 0,Ei=function(t,e){return function(n){return t(n)||e(n)}}(ln,an),Ri=function(t,e,n,i,r,o,a,s,u,c,l){return function(h,f){var p=a(h)?h:o(h);if(r.has(f)){var d=n();return Promise.reject(d)}try{r.add(f)}catch(v){}return e(u,(function(){return u(p)}))?p.decodeAudioData(f).then((function(n){return Pt(f).catch((function(){})),e(s,(function(){return s(n)}))||l(n),t.add(n),n})):new Promise((function(e,n){var r=function(){var t=j(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pt(f);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),o=function(t){n(t),r()};try{p.decodeAudioData(f,(function(n){"function"!==typeof n.copyFromChannel&&(c(n),B(n)),t.add(n),r().then((function(){return e(n)}))}),(function(t){o(null===t?i():t)}))}catch(d){o(d)}}))}}(yn,$e,(function(){return new DOMException("","DataCloneError")}),(function(){return new DOMException("","EncodingError")}),new WeakSet,rn,Ei,z,$t,gn,kn),qi=function(t,e,n,i,r,o,a,s,l,h,f,p,d,v,y,m,_,g,k,x){return function(y){(0,q.Z)(b,y);var w=(0,F.Z)(b);function b(e,n){var i;return(0,c.Z)(this,b),(i=w.call(this,e,n))._nativeContext=e,i._audioWorklet=void 0===t?void 0:{addModule:function(e,n){return t((0,U.Z)(i),e,n)}},i}return(0,u.Z)(b,[{key:"audioWorklet",get:function(){return this._audioWorklet}},{key:"createAnalyser",value:function(){return new e(this)}},{key:"createBiquadFilter",value:function(){return new r(this)}},{key:"createBuffer",value:function(t,e,i){return new n({length:e,numberOfChannels:t,sampleRate:i})}},{key:"createBufferSource",value:function(){return new i(this)}},{key:"createChannelMerger",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new o(this,{numberOfInputs:t})}},{key:"createChannelSplitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new a(this,{numberOfOutputs:t})}},{key:"createConstantSource",value:function(){return new s(this)}},{key:"createConvolver",value:function(){return new l(this)}},{key:"createDelay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new f(this,{maxDelayTime:t})}},{key:"createDynamicsCompressor",value:function(){return new p(this)}},{key:"createGain",value:function(){return new d(this)}},{key:"createIIRFilter",value:function(t,e){return new v(this,{feedback:e,feedforward:t})}},{key:"createOscillator",value:function(){return new m(this)}},{key:"createPanner",value:function(){return new _(this)}},{key:"createPeriodicWave",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1};return new g(this,(0,R.Z)((0,R.Z)({},n),{},{imag:e,real:t}))}},{key:"createStereoPanner",value:function(){return new k(this)}},{key:"createWaveShaper",value:function(){return new x(this)}},{key:"decodeAudioData",value:function(t,e,n){return h(this._nativeContext,t).then((function(t){return"function"===typeof e&&e(t),t}),(function(t){throw"function"===typeof n&&n(t),t}))}}]),b}(y)}(Mi,vn,xn,Dn,Rn,Nn,jn,Bn,Yn,Ri,Xn,Jn,ti,oi,ui,hi,_i,ki,Zi,Si),Fi=function(t,e,n,i){return function(t){(0,q.Z)(o,t);var r=(0,F.Z)(o);function o(t,a){var s;(0,c.Z)(this,o);var u=n(t),l=e(u,a);if(i(u))throw TypeError();return(s=r.call(this,t,!0,l,null))._nativeMediaElementAudioSourceNode=l,s}return(0,u.Z)(o,[{key:"mediaElement",get:function(){return this._nativeMediaElementAudioSourceNode.mediaElement}}]),o}(t)}(dn,(function(t,e){return t.createMediaElementSource(e.mediaElement)}),rn,an),Vi=function(t,e,n,i){return function(t){(0,q.Z)(o,t);var r=(0,F.Z)(o);function o(t,a){var s;(0,c.Z)(this,o);var u=n(t);if(i(u))throw new TypeError;var l=(0,R.Z)((0,R.Z)({},Ht),a),h=e(u,l);return(s=r.call(this,t,!1,h,null))._nativeMediaStreamAudioDestinationNode=h,s}return(0,u.Z)(o,[{key:"stream",get:function(){return this._nativeMediaStreamAudioDestinationNode.stream}}]),o}(t)}(dn,(function(t,e){var n=t.createMediaStreamDestination();return te(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:function(){return 0}}),n}),rn,an),Ii=function(t,e,n,i){return function(t){(0,q.Z)(o,t);var r=(0,F.Z)(o);function o(t,a){var s;(0,c.Z)(this,o);var u=n(t),l=e(u,a);if(i(u))throw new TypeError;return(s=r.call(this,t,!0,l,null))._nativeMediaStreamAudioSourceNode=l,s}return(0,u.Z)(o,[{key:"mediaStream",get:function(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}]),o}(t)}(dn,(function(t,e){var n=e.mediaStream,i=n.getAudioTracks();i.sort((function(t,e){return t.id<e.id?-1:t.id>e.id?1:0}));var r=i.slice(0,1),o=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:n}),o}),rn,an),Ni=function(t,e){return function(n,i){var r=i.mediaStreamTrack;if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(r);var o=new MediaStream([r]),a=n.createMediaStreamSource(o);if("audio"!==r.kind)throw t();if(e(n))throw new TypeError;return a}}(Bt,an),Pi=function(t,e,n){return function(t){(0,q.Z)(r,t);var i=(0,F.Z)(r);function r(t,o){(0,c.Z)(this,r);var a=n(t),s=e(a,o);return i.call(this,t,!0,s,null)}return(0,u.Z)(r)}(t)}(dn,Ni,rn),ji=function(t,e,n,i,r,o,a,s,l){return function(t){(0,q.Z)(f,t);var h=(0,F.Z)(f);function f(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,c.Z)(this,f),null===l)throw new Error("Missing the native AudioContext constructor.");try{e=new l(r)}catch(p){if(12===p.code&&"sampleRate is not in range"===p.message)throw n();throw p}if(null===e)throw i();if(!it(r.latencyHint))throw new TypeError("The provided value '".concat(r.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==r.sampleRate&&e.sampleRate!==r.sampleRate)throw n();t=h.call(this,e,2);var o=r.latencyHint,a=e,s=a.sampleRate;if(t._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===o?512/s:"interactive"===o||void 0===o?256/s:"playback"===o?1024/s:128*Math.max(2,Math.min(128,Math.round(o*s/128)))/s,t._nativeAudioContext=e,"webkitAudioContext"===l.name?(t._nativeGainNode=e.createGain(),t._nativeOscillatorNode=e.createOscillator(),t._nativeGainNode.gain.value=1e-37,t._nativeOscillatorNode.connect(t._nativeGainNode).connect(e.destination),t._nativeOscillatorNode.start()):(t._nativeGainNode=null,t._nativeOscillatorNode=null),t._state=null,"running"===e.state){t._state="suspended";var u=function n(){"suspended"===t._state&&(t._state=null),e.removeEventListener("statechange",n)};e.addEventListener("statechange",u)}return t}return(0,u.Z)(f,[{key:"baseLatency",get:function(){return this._baseLatency}},{key:"state",get:function(){return null!==this._state?this._state:this._nativeAudioContext.state}},{key:"close",value:function(){var t=this;return"closed"===this.state?this._nativeAudioContext.close().then((function(){throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((function(){null!==t._nativeGainNode&&null!==t._nativeOscillatorNode&&(t._nativeOscillatorNode.stop(),t._nativeGainNode.disconnect(),t._nativeOscillatorNode.disconnect()),nt(t)})))}},{key:"createMediaElementSource",value:function(t){return new r(this,{mediaElement:t})}},{key:"createMediaStreamDestination",value:function(){return new o(this)}},{key:"createMediaStreamSource",value:function(t){return new a(this,{mediaStream:t})}},{key:"createMediaStreamTrackSource",value:function(t){return new s(this,{mediaStreamTrack:t})}},{key:"resume",value:function(){var t=this;return"suspended"===this._state?new Promise((function(e,n){t._nativeAudioContext.addEventListener("statechange",(function i(){t._nativeAudioContext.removeEventListener("statechange",i),"running"===t._nativeAudioContext.state?e():t.resume().then(e,n)}))})):this._nativeAudioContext.resume().catch((function(t){if(void 0===t||15===t.code)throw e();throw t}))}},{key:"suspend",value:function(){return this._nativeAudioContext.suspend().catch((function(t){if(void 0===t)throw e();throw t}))}}]),f}(t)}(qi,Bt,Ce,qe,Fi,Vi,Ii,Pi,cn),Li=function(t){return function(e){var n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n}}(si),zi=function(t){return function(e,n){t(e).add(n)}}(Li),Wi=function(t){return function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e[i];if(void 0===o)throw t();return xt(n)?o.connect(n,0,r):o.connect(n,0)}}(W),Bi=function(t){return function(e,n){t(e).delete(n)}}(Li),Gi=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?e.forEach((function(t){return t.disconnect()})):"number"===typeof n?Lt(t,e,n).disconnect():xt(n)?void 0===i?e.forEach((function(t){return t.disconnect(n)})):void 0===r?Lt(t,e,i).disconnect(n,0):Lt(t,e,i).disconnect(n,0,r):void 0===i?e.forEach((function(t){return t.disconnect(n)})):Lt(t,e,i).disconnect(n,0)}}(W),Ui=new WeakMap,Yi=function(t,e){return function(n){return e(t,n)}}(Ui,T),Qi=function(t,e,n,i,r,o,a,s,u,c,l,h,f){return function(p,d,v,y){if(0===y.numberOfInputs&&0===y.numberOfOutputs)throw u();var m=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(m.some((function(t){return t<1})))throw u();if(m.length!==y.numberOfOutputs)throw e();if("explicit"!==y.channelCountMode)throw u();var _=y.channelCount*y.numberOfInputs,k=m.reduce((function(t,e){return t+e}),0),x=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length;if(_+x>6||k>6)throw u();for(var w=new MessageChannel,b=[],Z=[],T=0;T<y.numberOfInputs;T+=1)b.push(a(p,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),Z.push(r(p,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));var S=[];if(void 0!==v.parameterDescriptors){var A,C=(0,J.Z)(v.parameterDescriptors);try{var D=function(){var t=A.value,e=t.defaultValue,n=t.maxValue,i=t.minValue,r=t.name,a=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==y.parameterData[r]?y.parameterData[r]:void 0===e?0:e});Object.defineProperties(a.offset,{defaultValue:{get:function(){return void 0===e?0:e}},maxValue:{get:function(){return void 0===n?Q:n}},minValue:{get:function(){return void 0===i?Y:i}}}),S.push(a)};for(C.s();!(A=C.n()).done;)D()}catch(ct){C.e(ct)}finally{C.f()}}for(var O=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_+x)}),M=oe(d,p.sampleRate),E=s(p,M,_+x,Math.max(1,k)),q=r(p,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),F=[],V=0;V<y.numberOfOutputs;V+=1)F.push(i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:m[V]}));for(var I=0;I<y.numberOfInputs;I+=1){b[I].connect(Z[I]);for(var N=0;N<y.channelCount;N+=1)Z[I].connect(O,N,I*y.channelCount+N)}var P=new St(void 0===v.parameterDescriptors?[]:v.parameterDescriptors.map((function(t,e){var n=t.name,i=S[e];return i.connect(O,0,_+e),i.start(0),[n,i.offset]})));O.connect(E);var j,L,z=y.channelInterpretation,W=null,B=0===y.numberOfOutputs?[E]:F,G={get bufferSize(){return M},get channelCount(){return y.channelCount},set channelCount(t){throw n()},get channelCountMode(){return y.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return z},set channelInterpretation(t){for(var e=0,n=b;e<n.length;e++){n[e].channelInterpretation=t}z=t},get context(){return E.context},get inputs(){return b},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get onprocessorerror(){return W},set onprocessorerror(t){"function"===typeof W&&G.removeEventListener("processorerror",W),"function"===typeof(W="function"===typeof t?t:null)&&G.addEventListener("processorerror",W)},get parameters(){return P},get port(){return w.port2},addEventListener:function(){return E.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:t.bind(null,B),disconnect:c.bind(null,B),dispatchEvent:function(){return E.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return E.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},U=new Map;w.port1.addEventListener=(j=w.port1.addEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("message"===e[0]){var i="function"===typeof e[1]?e[1]:"object"===typeof e[1]&&null!==e[1]&&"function"===typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==i){var r=U.get(e[1]);void 0!==r?e[1]=r:(e[1]=function(t){l(p.currentTime,p.sampleRate,(function(){return i(t)}))},U.set(i,e[1]))}}return j.call(w.port1,e[0],e[1],e[2])}),w.port1.removeEventListener=(L=w.port1.removeEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("message"===e[0]){var i=U.get(e[1]);void 0!==i&&(U.delete(e[1]),e[1]=i)}return L.call(w.port1,e[0],e[1],e[2])});var X=null;Object.defineProperty(w.port1,"onmessage",{get:function(){return X},set:function(t){"function"===typeof X&&w.port1.removeEventListener("message",X),"function"===typeof(X="function"===typeof t?t:null)&&(w.port1.addEventListener("message",X),w.port1.start())}}),v.prototype.port=w.port1;var H=null,$=function(t,e,n,i){var r=g.get(t);void 0===r&&(r=new WeakMap,g.set(t,r));var o=se(n,i);return r.set(e,o),o}(p,G,v,y);$.then((function(t){return H=t}));var K=Mt(y.numberOfInputs,y.channelCount),tt=Mt(y.numberOfOutputs,m),et=void 0===v.parameterDescriptors?[]:v.parameterDescriptors.reduce((function(t,e){var n=e.name;return(0,R.Z)((0,R.Z)({},t),{},(0,Ct.Z)({},n,new Float32Array(128)))}),{}),nt=!0,it=function(){y.numberOfOutputs>0&&E.disconnect(q);for(var t=0,e=0;t<y.numberOfOutputs;t+=1){for(var n=F[t],i=0;i<m[t];i+=1)q.disconnect(n,e+i,i);e+=m[t]}},rt=new Map;E.onaudioprocess=function(t){var e=t.inputBuffer,n=t.outputBuffer;if(null!==H)for(var i=h(G),r=function(t){for(var r=0;r<y.numberOfInputs;r+=1)for(var o=0;o<y.channelCount;o+=1)Dt(e,K[r],o,o,t);void 0!==v.parameterDescriptors&&v.parameterDescriptors.forEach((function(n,i){var r=n.name;Dt(e,et,r,_+i,t)}));for(var a=0;a<y.numberOfInputs;a+=1)for(var s=0;s<m[a];s+=1)0===tt[a][s].byteLength&&(tt[a][s]=new Float32Array(128));try{var u=K.map((function(t,e){if(i[e].size>0)return rt.set(e,M/128),t;var n=rt.get(e);return void 0===n?[]:(t.every((function(t){return t.every((function(t){return 0===t}))}))&&(1===n?rt.delete(e):rt.set(e,n-1)),t)})),c=l(p.currentTime+t/p.sampleRate,p.sampleRate,(function(){return H.process(u,tt,et)}));nt=c;for(var h=0,f=0;h<y.numberOfOutputs;h+=1){for(var d=0;d<m[h];d+=1)Ot(n,tt[h],d,f+d,t);f+=m[h]}}catch(A){nt=!1,G.dispatchEvent(new ErrorEvent("processorerror",{colno:A.colno,filename:A.filename,lineno:A.lineno,message:A.message}))}if(!nt){for(var g=0;g<y.numberOfInputs;g+=1){b[g].disconnect(Z[g]);for(var k=0;k<y.channelCount;k+=1)Z[t].disconnect(O,k,g*y.channelCount+k)}if(void 0!==v.parameterDescriptors)for(var x=v.parameterDescriptors.length,w=0;w<x;w+=1){var T=S[w];T.disconnect(O,0,_+w),T.stop()}return O.disconnect(E),E.onaudioprocess=null,ot?it():ut(),"break"}},o=0;o<M;o+=128){if("break"===r(o))break}};var ot=!1,at=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),st=function(){return E.connect(at).connect(p.destination)},ut=function(){E.disconnect(at),at.disconnect()};return st(),f(G,(function(){if(nt){ut(),y.numberOfOutputs>0&&E.connect(q);for(var t=0,e=0;t<y.numberOfOutputs;t+=1){for(var n=F[t],i=0;i<m[t];i+=1)q.connect(n,e+i,i);e+=m[t]}}ot=!0}),(function(){nt&&(st(),it()),ot=!1}))}}(Wi,W,Bt,Vn,ce,zn,ve,Te,Ce,Gi,Ci,Yi,qn),Xi=function(t,e,n,i,r){return function(o,a,s,u,c,l){if(null!==s)try{var h=new s(o,u,l),f=new Map,p=null;if(Object.defineProperties(h,{channelCount:{get:function(){return l.channelCount},set:function(){throw t()}},channelCountMode:{get:function(){return"explicit"},set:function(){throw t()}},onprocessorerror:{get:function(){return p},set:function(t){"function"===typeof p&&h.removeEventListener("processorerror",p),"function"===typeof(p="function"===typeof t?t:null)&&h.addEventListener("processorerror",p)}}}),h.addEventListener=(y=h.addEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("processorerror"===e[0]){var i="function"===typeof e[1]?e[1]:"object"===typeof e[1]&&null!==e[1]&&"function"===typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==i){var r=f.get(e[1]);void 0!==r?e[1]=r:(e[1]=function(t){"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),i(t)):i(new ErrorEvent(e[0],(0,R.Z)({},t)))},f.set(i,e[1]))}}return y.call(h,"error",e[1],e[2]),y.call.apply(y,[h].concat(e))}),h.removeEventListener=(v=h.removeEventListener,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("processorerror"===e[0]){var i=f.get(e[1]);void 0!==i&&(f.delete(e[1]),e[1]=i)}return v.call(h,"error",e[1],e[2]),v.call(h,e[0],e[1],e[2])}),0!==l.numberOfOutputs){var d=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});h.connect(d).connect(o.destination);return r(h,(function(){return d.disconnect()}),(function(){return d.connect(o.destination)}))}return h}catch(m){if(11===m.code)throw i();throw m}var v,y;if(void 0===c)throw i();return function(t){var e=(new MessageChannel).port1;try{e.postMessage(t)}finally{e.close()}}(l),e(o,a,c,l)}}(Bt,Qi,ve,Ce,qn),Hi=function(t,e,n,i,r,o,a,u,c,l,h,f,p,d,v,y){return function(m,_,g){var k=new WeakMap,x=null,w=function(){var u=j(N().mark((function u(w,b){var Z,T,S,A,C,D,O,M,E,R,q,F,V,I,P,z,W,B,G,U,Y,Q,X,H,$,K,tt,et,nt,it,rt,ot,at,st;return N().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(Z=h(w),T=null,S=L(Z,b),A=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount),null===f){for(C=A.reduce((function(t,e){return t+e}),0),D=r(b,{channelCount:Math.max(1,C),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,C)}),O=[],M=0;M<w.numberOfOutputs;M+=1)O.push(i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[M]}));(E=a(b,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})).connect=e.bind(null,O),E.disconnect=c.bind(null,O),T=[D,O,E]}else S||(Z=new f(b,m));if(k.set(b,null===T?Z:T[2]),null===T){u.next=41;break}if(null!==x){u.next=32;break}if(void 0!==g){u.next=10;break}throw new Error("Missing the processor constructor.");case 10:if(null!==p){u.next=12;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 12:if(R=w.channelCount*w.numberOfInputs,q=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length,F=R+q,V=function(){var t=j(N().mark((function t(){var e,n,u,c,l,h,f,m,g,k,x,Z,T;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=new p(F,128*Math.ceil(w.context.length/128),b.sampleRate),n=[],u=[],c=0;c<_.numberOfInputs;c+=1)n.push(a(e,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),u.push(r(e,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));return t.next=6,Promise.all(Array.from(w.parameters.values()).map(function(){var t=j(N().mark((function t(n){var i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:n.value}),t.next=3,d(e,n,i.offset);case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:for(l=t.sent,h=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+q)}),f=0;f<_.numberOfInputs;f+=1)for(n[f].connect(u[f]),m=0;m<_.channelCount;m+=1)u[f].connect(h,m,f*_.channelCount+m);g=(0,J.Z)(l.entries());try{for(g.s();!(k=g.n()).done;)x=(0,s.Z)(k.value,2),Z=x[0],(T=x[1]).connect(h,0,R+Z),T.start(0)}catch(S){g.e(S)}finally{g.f()}return h.connect(e.destination),t.next=14,Promise.all(n.map((function(t){return v(w,e,t)})));case 14:return t.abrupt("return",y(e));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u.t0=Rt,u.t1=w,0!==F){u.next=22;break}u.t2=null,u.next=25;break;case 22:return u.next=24,V();case 24:u.t2=u.sent;case 25:u.t3=u.t2,u.t4=b,u.t5=_,u.t6=A,u.t7=g,u.t8=l,x=(0,u.t0)(u.t1,u.t3,u.t4,u.t5,u.t6,u.t7,u.t8);case 32:return u.next=34,x;case 34:for(I=u.sent,P=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),z=T,W=(0,s.Z)(z,3),B=W[0],G=W[1],U=W[2],null!==I&&(P.buffer=I,P.start(0)),P.connect(B),Y=0,Q=0;Y<w.numberOfOutputs;Y+=1){for(X=G[Y],H=0;H<A[Y];H+=1)B.connect(X,Q+H,H);Q+=A[Y]}return u.abrupt("return",U);case 41:if(S){u.next=61;break}$=(0,J.Z)(w.parameters.entries()),u.prev=43,$.s();case 45:if((K=$.n()).done){u.next=51;break}return tt=(0,s.Z)(K.value,2),et=tt[0],nt=tt[1],u.next=49,d(b,nt,Z.parameters.get(et));case 49:u.next=45;break;case 51:u.next=56;break;case 53:u.prev=53,u.t9=u.catch(43),$.e(u.t9);case 56:return u.prev=56,$.f(),u.finish(56);case 59:u.next=78;break;case 61:it=(0,J.Z)(w.parameters.entries()),u.prev=62,it.s();case 64:if((rt=it.n()).done){u.next=70;break}return ot=(0,s.Z)(rt.value,2),at=ot[0],st=ot[1],u.next=68,t(b,st,Z.parameters.get(at));case 68:u.next=64;break;case 70:u.next=75;break;case 72:u.prev=72,u.t10=u.catch(62),it.e(u.t10);case 75:return u.prev=75,it.f(),u.finish(75);case 78:return u.next=80,v(w,b,Z);case 80:return u.abrupt("return",Z);case 81:case"end":return u.stop()}}),u,null,[[43,53,56,59],[62,72,75,78]])})));return function(t,e){return u.apply(this,arguments)}}();return{render:function(t,e){u(e,t);var n=k.get(e);return void 0!==n?Promise.resolve(n):w(t,e)}}}}(Zn,Wi,Tn,Vn,ce,zn,ve,Bi,Gi,Ci,vt,pn,on,Sn,en,ni),$i=function(t){return function(e){return t.get(e)}}(Di),Ji=function(t){return function(e,n){t.set(e,n)}}(Ui),Ki=Ai?function(t,e,n,i,r,o,a,s,l,h,f,p,d,v){return function(e){(0,q.Z)(m,e);var y=(0,F.Z)(m);function m(e,u,v){var g,k;(0,c.Z)(this,m);var x=s(e),w=l(x),b=f((0,R.Z)((0,R.Z)({},At),v));d(b);var Z=_.get(x),T=null===Z||void 0===Z?void 0:Z.get(u),S=w||"closed"!==x.state?x:null!==(k=a(x))&&void 0!==k?k:x,A=r(S,w?null:e.baseLatency,h,u,T,b),C=w?i(u,b,T):null;g=y.call(this,e,!0,A,C);var D=[];A.parameters.forEach((function(t,e){var i=n((0,U.Z)(g),w,t);D.push([e,i])})),g._nativeAudioWorkletNode=A,g._onprocessorerror=null,g._parameters=new St(D),w&&t(x,(0,U.Z)(g));var O=o((0,U.Z)(g)).activeInputs;return p(A,O),g}return(0,u.Z)(m,[{key:"onprocessorerror",get:function(){return this._onprocessorerror},set:function(t){var e="function"===typeof t?v(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;var n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}},{key:"parameters",get:function(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}},{key:"port",get:function(){return this._nativeAudioWorkletNode.port}}]),m}(e)}(zi,dn,Cn,Hi,Xi,K,$i,rn,an,pn,(function(t){return(0,R.Z)((0,R.Z)({},t),{},{outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(function(){return 1}))})}),Ji,(function(t){var e=new MessageChannel,n=e.port1,i=e.port2;try{n.postMessage(t)}finally{n.close(),i.close()}}),Ge):void 0,tr=(function(t,e,n,i,r){}(Bt,Ce,qe,ui,cn),function(t,e){return function(n,i,r){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,r)}catch(o){if("SyntaxError"===o.name)throw t();throw o}}}(Ce,on)),er=function(t,e,n,i,r,o,a,s){return function(u,c){return n(u).render(u,c).then((function(){return Promise.all(Array.from(i(c)).map((function(t){return n(t).render(t,c)})))})).then((function(){return r(c)})).then((function(n){return"function"!==typeof n.copyFromChannel?(a(n),B(n)):e(o,(function(){return o(n)}))||s(n),t.add(n),n}))}}(yn,$e,tn,Li,ni,z,gn,kn),nr=(function(t,e,n,i,r){}($e,Bt,tr,ui,er),function(t,e,n,i,r){return function(t){(0,q.Z)(a,t);var o=(0,F.Z)(a);function a(t,n,r){var s,u;if((0,c.Z)(this,a),"number"===typeof t&&void 0!==n&&void 0!==r)u={length:n,numberOfChannels:t,sampleRate:r};else{if("object"!==typeof t)throw new Error("The given parameters are not valid.");u=t}var l=(0,R.Z)((0,R.Z)({},De),u),h=l.length,f=l.numberOfChannels,p=l.sampleRate,d=i(f,h,p);return e($t,(function(){return $t(d)}))||d.addEventListener("statechange",function(){var t=0;return function e(n){"running"===s._state&&(t>0?(d.removeEventListener("statechange",e),n.stopImmediatePropagation(),s._waitForThePromiseToSettle(n)):t+=1)}}()),(s=o.call(this,d,f))._length=h,s._nativeOfflineAudioContext=d,s._state=null,s}return(0,u.Z)(a,[{key:"length",get:function(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}},{key:"state",get:function(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}},{key:"startRendering",value:function(){var t=this;return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally((function(){t._state=null,nt(t)})))}},{key:"_waitForThePromiseToSettle",value:function(t){var e=this;null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((function(){return e._waitForThePromiseToSettle(t)}))}}]),a}(t)}(qi,$e,Bt,tr,er)),ir=function(t,e){return function(n){var i=t.get(n);return e(i)||e(n)}}(v,ln),rr=function(t,e){return function(n){return t.has(n)||e(n)}}(f,hn),or=function(t,e){return function(n){return t.has(n)||e(n)}}(d,fn),ar=function(t,e){return function(n){var i=t.get(n);return e(i)||e(n)}}(v,an),sr=function(){return Xt($e,function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100).createBuffer(1,1,44100);if(void 0===e.copyToChannel)return!0;var n=new Float32Array(2);try{e.copyFromChannel(n,0,0)}catch(i){return!1}return!0}}(on),function(t){return function(){if(null===t)return!1;if(void 0!==t.prototype&&void 0!==t.prototype.close)return!0;var e=new t,n=void 0!==e.close;try{e.close()}catch(i){}return n}}(cn),function(t){return function(){if(null===t)return Promise.resolve(!1);var e=new t(1,1,44100);return new Promise((function(t){var n,i=!0,r=function(n){i&&(i=!1,e.startRendering(),t(n instanceof TypeError))};try{n=e.decodeAudioData(null,(function(){}),r)}catch(o){r(o)}void 0!==n&&n.catch(r)}))}}(on),function(t){return function(){if(null===t)return!1;var e;try{e=new t({latencyHint:"balanced"})}catch(n){return!1}return e.close(),!0}}(cn),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100).createGain(),n=e.connect(e)===e;return e.disconnect(e),n}}(on),function(t,e){return j(N().mark((function n(){var i,r,o,a,s,u,c;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t){n.next=2;break}return n.abrupt("return",!0);case 2:if(null!==e){n.next=4;break}return n.abrupt("return",!1);case 4:return i=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new MessageChannel,o=new e(1,128,44100),a=URL.createObjectURL(i),s=!1,n.prev=9,n.next=12,o.audioWorklet.addModule(a);case 12:return u=new t(o,"a",{numberOfOutputs:0}),c=o.createOscillator(),n.next=16,new Promise((function(t){u.port.onmessage=function(){return t()},u.port.postMessage(r.port2,[r.port2])}));case 16:return u.port.onmessage=function(){return s=!0},c.connect(u),c.start(0),n.next=21,o.startRendering();case 21:return n.next=23,new Promise((function(t){r.port1.onmessage=function(e){var n=e.data;return t(1===n)},r.port1.postMessage(0)}));case 23:s=n.sent,n.next=28;break;case 26:n.prev=26,n.t0=n.catch(9);case 28:return n.prev=28,r.port1.close(),URL.revokeObjectURL(a),n.finish(28);case 32:return n.abrupt("return",s);case 33:case"end":return n.stop()}}),n,null,[[9,26,28,32]])})))}(pn,on),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100).createChannelMerger();if("max"===e.channelCountMode)return!0;try{e.channelCount=2}catch(n){return!0}return!1}}(on),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100);return void 0===e.createConstantSource||e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY}}(on),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch(i){return!1}return!0}}(on),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100).createConvolver();try{e.channelCount=1}catch(n){return!1}return!0}}(on),ze,function(t){return function(){return null!==t&&t.hasOwnProperty("isSecureContext")}}(Je),function(t){return function(){if(null===t)return!1;var e=new t;try{return e.createMediaStreamSource(new MediaStream),!1}catch(n){return!0}finally{e.close()}}}(cn),function(t){return function(){if(null===t)return Promise.resolve(!1);var e=new t(1,1,44100);if(void 0===e.createStereoPanner)return Promise.resolve(!0);if(void 0===e.createConstantSource)return Promise.resolve(!0);var n=e.createConstantSource(),i=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,i.channelCount=1,n.start(),n.connect(i).connect(e.destination),e.startRendering().then((function(t){return 1!==t.getChannelData(0)[0]}))}}(on),We)};function ur(t,e){if(!t)throw new Error(e)}function cr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(e<=t&&t<=n))throw new RangeError("Value must be within [".concat(e,", ").concat(n,"], got: ").concat(t))}function lr(t){t.isOffline||"running"===t.state||dr('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var hr=console;function fr(t){hr=t}function pr(){var t;(t=hr).log.apply(t,arguments)}function dr(){var t;(t=hr).warn.apply(t,arguments)}function vr(t){return"undefined"===typeof t}function yr(t){return!vr(t)}function mr(t){return"function"===typeof t}function _r(t){return"number"===typeof t}function gr(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function kr(t){return"boolean"===typeof t}function xr(t){return Array.isArray(t)}function wr(t){return"string"===typeof t}function br(t){return wr(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Zr(t){return new ji(t)}function Tr(t,e,n){return new nr(t,e,n)}var Sr="object"===typeof self?self:null,Ar=Sr&&(Sr.hasOwnProperty("AudioContext")||Sr.hasOwnProperty("webkitAudioContext"));var Cr=n(1752),Dr=n(1120);function Or(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function Mr(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{u(i.next(t))}catch(e){o(e)}}function s(t){try{u(i.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))}Object.create;Object.create;var Er=function(){function t(e,n,i){(0,c.Z)(this,t),this._callback=e,this._type=n,this._updateInterval=i,this._createClock()}return(0,u.Z)(t,[{key:"_createWorker",value:function(){var t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}},{key:"_createTimeout",value:function(){var t=this;this._timeout=setTimeout((function(){t._createTimeout(),t._callback()}),1e3*this._updateInterval)}},{key:"_createClock",value:function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}},{key:"_disposeClock",value:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}},{key:"updateInterval",get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}},{key:"type",get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}},{key:"dispose",value:function(){this._disposeClock()}}]),t}();function Rr(t){return or(t)}function qr(t){return rr(t)}function Fr(t){return ar(t)}function Vr(t){return ir(t)}function Ir(t){return t instanceof AudioBuffer}function Nr(t,e){return"value"===t||Rr(e)||qr(e)||Ir(e)}function Pr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(!n.length)return t;var r=n.shift();if(gr(t)&&gr(r))for(var o in r)Nr(o,r[o])?t[o]=r[o]:gr(r[o])?(t[o]||Object.assign(t,(0,Ct.Z)({},o,{})),Pr(t[o],r[o])):Object.assign(t,(0,Ct.Z)({},o,r[o]));return Pr.apply(void 0,[t].concat(n))}function jr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r={},o=Array.from(e);if(gr(o[0])&&i&&!Reflect.has(o[0],i)){var a=Object.keys(o[0]).some((function(e){return Reflect.has(t,e)}));a||(Pr(r,(0,Ct.Z)({},i,o[0])),n.splice(n.indexOf(i),1),o.shift())}if(1===o.length&&gr(o[0]))Pr(r,o[0]);else for(var s=0;s<n.length;s++)yr(o[s])&&(r[n[s]]=o[s]);return Pr(t,r)}function Lr(t,e){return vr(t)?e:t}function zr(t,e){return e.forEach((function(e){Reflect.has(t,e)&&delete t[e]})),t}var Wr=function(){function t(){(0,c.Z)(this,t),this.debug=!1,this._wasDisposed=!1}return(0,u.Z)(t,[{key:"log",value:function(){if(this.debug||Sr&&this.toString()===Sr.TONE_DEBUG_CLASS){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];pr.apply(void 0,[this].concat(e))}}},{key:"dispose",value:function(){return this._wasDisposed=!0,this}},{key:"disposed",get:function(){return this._wasDisposed}},{key:"toString",value:function(){return this.name}}],[{key:"getDefaults",value:function(){return{}}}]),t}();Wr.version=o;var Br=1e-6;function Gr(t,e){return t>e+Br}function Ur(t,e){return Gr(t,e)||Qr(t,e)}function Yr(t,e){return t+Br<e}function Qr(t,e){return Math.abs(t-e)<Br}function Xr(t,e,n){return Math.max(Math.min(t,n),e)}var Hr=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this)).name="Timeline",t._timeline=[];var i=jr(n.getDefaults(),arguments,["memory"]);return t.memory=i.memory,t.increasing=i.increasing,t}return(0,u.Z)(n,[{key:"length",get:function(){return this._timeline.length}},{key:"add",value:function(t){if(ur(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){var e=this._timeline[this.length-1];ur(Ur(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{var n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this}},{key:"remove",value:function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",n=this._search(t,e);return-1!==n?this._timeline[n]:null}},{key:"peek",value:function(){return this._timeline[0]}},{key:"shift",value:function(){return this._timeline.shift()}},{key:"getAfter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}},{key:"getBefore",value:function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return n-1>=0?this._timeline[n-1]:null}},{key:"cancel",value:function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(Qr(this._timeline[e].time,t)){for(var n=e;n>=0&&Qr(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&Ur(this._timeline[0].time,t)&&(this._timeline=[]);return this}},{key:"cancelBefore",value:function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}},{key:"previousEvent",value:function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}},{key:"_search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;var n=0,i=this._timeline.length,r=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;for(;n<r;){var o=Math.floor(n+(r-n)/2),a=this._timeline[o],s=this._timeline[o+1];if(Qr(a[e],t)){for(var u=o;u<this._timeline.length;u++){var c=this._timeline[u];if(!Qr(c[e],t))break;o=u}return o}if(Yr(a[e],t)&&Gr(s[e],t))return o;Gr(a[e],t)?r=o:n=o+1}return-1}},{key:"_iterate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(e,n+1).forEach(t)}},{key:"forEach",value:function(t){return this._iterate(t),this}},{key:"forEachBefore",value:function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}},{key:"forEachAfter",value:function(t,e){var n=this._search(t);return this._iterate(e,n+1),this}},{key:"forEachBetween",value:function(t,e,n){var i=this._search(t),r=this._search(e);return-1!==i&&-1!==r?(this._timeline[i].time!==t&&(i+=1),this._timeline[r].time===e&&(r-=1),this._iterate(n,i,r)):-1===i&&this._iterate(n,0,r),this}},{key:"forEachFrom",value:function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}},{key:"forEachAtTime",value:function(t,e){var n=this._search(t);if(-1!==n&&Qr(this._timeline[n].time,t)){for(var i=n,r=n;r>=0&&Qr(this._timeline[r].time,t);r--)i=r;this._iterate((function(t){e(t)}),i,n)}return this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._timeline=[],this}}],[{key:"getDefaults",value:function(){return{memory:1/0,increasing:!1}}}]),n}(Wr),$r=[];function Jr(t){$r.push(t)}var Kr=[];function to(t){Kr.push(t)}function eo(t){Kr.forEach((function(e){return e(t)}))}var no=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="Emitter",t}return(0,u.Z)(n,[{key:"on",value:function(t,e){var n=this;return t.split(/\W+/).forEach((function(t){vr(n._events)&&(n._events={}),n._events.hasOwnProperty(t)||(n._events[t]=[]),n._events[t].push(e)})),this}},{key:"once",value:function(t,e){var n=this;return this.on(t,(function i(){e.apply(void 0,arguments),n.off(t,i)})),this}},{key:"off",value:function(t,e){var n=this;return t.split(/\W+/).forEach((function(i){if(vr(n._events)&&(n._events={}),n._events.hasOwnProperty(t))if(vr(e))n._events[t]=[];else for(var r=n._events[t],o=r.length-1;o>=0;o--)r[o]===e&&r.splice(o,1)})),this}},{key:"emit",value:function(t){if(this._events&&this._events.hasOwnProperty(t)){for(var e=this._events[t].slice(0),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=0,a=e.length;o<a;o++)e[o].apply(this,i)}return this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._events=void 0,this}}],[{key:"mixin",value:function(t){["on","once","off","emit"].forEach((function(e){var i=Object.getOwnPropertyDescriptor(n.prototype,e);Object.defineProperty(t.prototype,e,i)}))}}]),n}(Wr),io=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).isOffline=!1,t}return(0,u.Z)(n,[{key:"toJSON",value:function(){return{}}}]),n}(no),ro=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this)).name="Context",t._constants=new Map,t._timeouts=new Hr,t._timeoutIds=0,t._initialized=!1,t.isOffline=!1,t._workletModules=new Map;var i=jr(n.getDefaults(),arguments,["context"]);return i.context?t._context=i.context:t._context=Zr({latencyHint:i.latencyHint}),t._ticker=new Er(t.emit.bind((0,U.Z)(t),"tick"),i.clockSource,i.updateInterval),t.on("tick",t._timeoutLoop.bind((0,U.Z)(t))),t._context.onstatechange=function(){t.emit("statechange",t.state)},t._setLatencyHint(i.latencyHint),t.lookAhead=i.lookAhead,t}return(0,u.Z)(n,[{key:"initialize",value:function(){var t;return this._initialized||(t=this,$r.forEach((function(e){return e(t)})),this._initialized=!0),this}},{key:"createAnalyser",value:function(){return this._context.createAnalyser()}},{key:"createOscillator",value:function(){return this._context.createOscillator()}},{key:"createBufferSource",value:function(){return this._context.createBufferSource()}},{key:"createBiquadFilter",value:function(){return this._context.createBiquadFilter()}},{key:"createBuffer",value:function(t,e,n){return this._context.createBuffer(t,e,n)}},{key:"createChannelMerger",value:function(t){return this._context.createChannelMerger(t)}},{key:"createChannelSplitter",value:function(t){return this._context.createChannelSplitter(t)}},{key:"createConstantSource",value:function(){return this._context.createConstantSource()}},{key:"createConvolver",value:function(){return this._context.createConvolver()}},{key:"createDelay",value:function(t){return this._context.createDelay(t)}},{key:"createDynamicsCompressor",value:function(){return this._context.createDynamicsCompressor()}},{key:"createGain",value:function(){return this._context.createGain()}},{key:"createIIRFilter",value:function(t,e){return this._context.createIIRFilter(t,e)}},{key:"createPanner",value:function(){return this._context.createPanner()}},{key:"createPeriodicWave",value:function(t,e,n){return this._context.createPeriodicWave(t,e,n)}},{key:"createStereoPanner",value:function(){return this._context.createStereoPanner()}},{key:"createWaveShaper",value:function(){return this._context.createWaveShaper()}},{key:"createMediaStreamSource",value:function(t){return ur(Vr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}},{key:"createMediaElementSource",value:function(t){return ur(Vr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}},{key:"createMediaStreamDestination",value:function(){return ur(Vr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}},{key:"decodeAudioData",value:function(t){return this._context.decodeAudioData(t)}},{key:"currentTime",get:function(){return this._context.currentTime}},{key:"state",get:function(){return this._context.state}},{key:"sampleRate",get:function(){return this._context.sampleRate}},{key:"listener",get:function(){return this.initialize(),this._listener},set:function(t){ur(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}},{key:"transport",get:function(){return this.initialize(),this._transport},set:function(t){ur(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}},{key:"draw",get:function(){return this.initialize(),this._draw},set:function(t){ur(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}},{key:"destination",get:function(){return this.initialize(),this._destination},set:function(t){ur(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}},{key:"createAudioWorkletNode",value:function(t,e){return function(t,e,n){return ur(yr(Ki),"This node only works in a secure context (https or localhost)"),new Ki(t,e,n)}(this.rawContext,t,e)}},{key:"addAudioWorkletModule",value:function(t,e){return Mr(this,void 0,void 0,N().mark((function n(){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ur(yr(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),n.next=4,this._workletModules.get(e);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"workletsAreReady",value:function(){return Mr(this,void 0,void 0,N().mark((function t(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],this._workletModules.forEach((function(t){return e.push(t)})),t.next=4,Promise.all(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"updateInterval",get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}},{key:"clockSource",get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}},{key:"latencyHint",get:function(){return this._latencyHint}},{key:"_setLatencyHint",value:function(t){var e=0;if(this._latencyHint=t,wr(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}},{key:"rawContext",get:function(){return this._context}},{key:"now",value:function(){return this._context.currentTime+this.lookAhead}},{key:"immediate",value:function(){return this._context.currentTime}},{key:"resume",value:function(){return Vr(this._context)?this._context.resume():Promise.resolve()}},{key:"close",value:function(){return Mr(this,void 0,void 0,N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Vr(this._context)){t.next=3;break}return t.next=3,this._context.close();case 3:this._initialized&&eo(this);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getConstant",value:function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),i=0;i<n.length;i++)n[i]=t;var r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}},{key:"dispose",value:function(){var t=this;return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((function(e){return t._constants[e].disconnect()})),this}},{key:"_timeoutLoop",value:function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}},{key:"setTimeout",value:function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}},{key:"clearTimeout",value:function(t){var e=this;return this._timeouts.forEach((function(n){n.id===t&&e._timeouts.remove(n)})),this}},{key:"clearInterval",value:function(t){return this.clearTimeout(t)}},{key:"setInterval",value:function(t,e){var n=this,i=++this._timeoutIds;return function r(){var o=n.now();n._timeouts.add({callback:function(){t(),r()},id:i,time:o+e})}(),i}}],[{key:"getDefaults",value:function(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}}]),n}(io),oo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).lookAhead=0,t.latencyHint=0,t.isOffline=!1,t}return(0,u.Z)(n,[{key:"createAnalyser",value:function(){return{}}},{key:"createOscillator",value:function(){return{}}},{key:"createBufferSource",value:function(){return{}}},{key:"createBiquadFilter",value:function(){return{}}},{key:"createBuffer",value:function(t,e,n){return{}}},{key:"createChannelMerger",value:function(t){return{}}},{key:"createChannelSplitter",value:function(t){return{}}},{key:"createConstantSource",value:function(){return{}}},{key:"createConvolver",value:function(){return{}}},{key:"createDelay",value:function(t){return{}}},{key:"createDynamicsCompressor",value:function(){return{}}},{key:"createGain",value:function(){return{}}},{key:"createIIRFilter",value:function(t,e){return{}}},{key:"createPanner",value:function(){return{}}},{key:"createPeriodicWave",value:function(t,e,n){return{}}},{key:"createStereoPanner",value:function(){return{}}},{key:"createWaveShaper",value:function(){return{}}},{key:"createMediaStreamSource",value:function(t){return{}}},{key:"createMediaElementSource",value:function(t){return{}}},{key:"createMediaStreamDestination",value:function(){return{}}},{key:"decodeAudioData",value:function(t){return Promise.resolve({})}},{key:"createAudioWorkletNode",value:function(t,e){return{}}},{key:"rawContext",get:function(){return{}}},{key:"addAudioWorkletModule",value:function(t,e){return Mr(this,void 0,void 0,N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve());case 1:case"end":return t.stop()}}),t)})))}},{key:"resume",value:function(){return Promise.resolve()}},{key:"setTimeout",value:function(t,e){return 0}},{key:"clearTimeout",value:function(t){return this}},{key:"setInterval",value:function(t,e){return 0}},{key:"clearInterval",value:function(t){return this}},{key:"getConstant",value:function(t){return{}}},{key:"currentTime",get:function(){return 0}},{key:"state",get:function(){return{}}},{key:"sampleRate",get:function(){return 0}},{key:"listener",get:function(){return{}}},{key:"transport",get:function(){return{}}},{key:"draw",get:function(){return{}},set:function(t){}},{key:"destination",get:function(){return{}},set:function(t){}},{key:"now",value:function(){return 0}},{key:"immediate",value:function(){return 0}}]),n}(io);function ao(t,e){xr(e)?e.forEach((function(e){return ao(t,e)})):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function so(t,e){xr(e)?e.forEach((function(e){return so(t,e)})):Object.defineProperty(t,e,{writable:!0})}var uo=function(){},co=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this)).name="ToneAudioBuffer",t.onload=uo;var i=jr(n.getDefaults(),arguments,["url","onload","onerror"]);return t.reverse=i.reverse,t.onload=i.onload,i.url&&Ir(i.url)||i.url instanceof n?t.set(i.url):wr(i.url)&&t.load(i.url).catch(i.onerror),t}return(0,u.Z)(n,[{key:"sampleRate",get:function(){return this._buffer?this._buffer.sampleRate:po().sampleRate}},{key:"set",value:function(t){var e=this;return t instanceof n?t.loaded?this._buffer=t.get():t.onload=function(){e.set(t),e.onload(e)}:this._buffer=t,this._reversed&&this._reverse(),this}},{key:"get",value:function(){return this._buffer}},{key:"load",value:function(t){return Mr(this,void 0,void 0,N().mark((function e(){var i,r,o=this;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.load(t).then((function(t){o.set(t),o.onload(o)})),n.downloads.push(i),e.prev=2,e.next=5,i;case 5:return e.prev=5,r=n.downloads.indexOf(i),n.downloads.splice(r,1),e.finish(5);case 9:return e.abrupt("return",this);case 10:case"end":return e.stop()}}),e,this,[[2,,5,9]])})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._buffer=void 0,this}},{key:"fromArray",value:function(t){for(var e=xr(t)&&t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=po(),o=r.createBuffer(n,i,r.sampleRate),a=e||1!==n?t:[t],s=0;s<n;s++)o.copyToChannel(a[s],s);return this._buffer=o,this}},{key:"toMono",value:function(t){if(_r(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,i=0;i<n;i++)for(var r=this.toArray(i),o=0;o<r.length;o++)e[o]+=r[o];e=e.map((function(t){return t/n})),this.fromArray(e)}return this}},{key:"toArray",value:function(t){if(_r(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e}},{key:"getChannelData",value:function(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration,i=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);ur(i<r,"The start time must be less than the end time");for(var o=r-i,a=po().createBuffer(this.numberOfChannels,o,this.sampleRate),s=0;s<this.numberOfChannels;s++)a.copyToChannel(this.getChannelData(s).subarray(i,r),s);return new n(a)}},{key:"_reverse",value:function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}},{key:"loaded",get:function(){return this.length>0}},{key:"duration",get:function(){return this._buffer?this._buffer.duration:0}},{key:"length",get:function(){return this._buffer?this._buffer.length:0}},{key:"numberOfChannels",get:function(){return this._buffer?this._buffer.numberOfChannels:0}},{key:"reverse",get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}],[{key:"getDefaults",value:function(){return{onerror:uo,onload:uo,reverse:!1}}},{key:"fromArray",value:function(t){return(new n).fromArray(t)}},{key:"fromUrl",value:function(t){return Mr(this,void 0,void 0,N().mark((function e(){var i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new n,e.next=3,i.load(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))}},{key:"load",value:function(t){return Mr(this,void 0,void 0,N().mark((function e(){var i,r,o,a,s,u,c,l,h,f;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t.match(/\[([^\]\[]+\|.+)\]$/))){e.next=23;break}r=i[1].split("|"),o=r[0],a=(0,J.Z)(r),e.prev=5,a.s();case 7:if((s=a.n()).done){e.next=14;break}if(u=s.value,!n.supportsType(u)){e.next=12;break}return o=u,e.abrupt("break",14);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),a.e(e.t0);case 19:return e.prev=19,a.f(),e.finish(19);case 22:t=t.replace(i[0],o);case 23:return c=""===n.baseUrl||n.baseUrl.endsWith("/")?n.baseUrl:n.baseUrl+"/",e.next=26,fetch(c+t);case 26:if((l=e.sent).ok){e.next=29;break}throw new Error("could not load url: ".concat(t));case 29:return e.next=31,l.arrayBuffer();case 31:return h=e.sent,e.next=34,po().decodeAudioData(h);case 34:return f=e.sent,e.abrupt("return",f);case 36:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})))}},{key:"supportsType",value:function(t){var e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}},{key:"loaded",value:function(){return Mr(this,void 0,void 0,N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve();case 2:if(!n.downloads.length){t.next=7;break}return t.next=5,n.downloads[0];case 5:t.next=2;break;case 7:case"end":return t.stop()}}),t)})))}}]),n}(Wr);co.baseUrl="",co.downloads=[];var lo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,{clockSource:"offline",context:Fr(arguments[0])?arguments[0]:Tr(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Fr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})).name="OfflineContext",t._currentTime=0,t.isOffline=!0,t._duration=Fr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1],t}return(0,u.Z)(n,[{key:"now",value:function(){return this._currentTime}},{key:"currentTime",get:function(){return this._currentTime}},{key:"_renderClock",value:function(t){return Mr(this,void 0,void 0,N().mark((function e(){var n,i;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(this._duration-this._currentTime>=0)){e.next=11;break}if(this.emit("tick"),this._currentTime+=128/this.sampleRate,n++,i=Math.floor(this.sampleRate/128),!t||n%i!==0){e.next=9;break}return e.next=9,new Promise((function(t){return setTimeout(t,1)}));case 9:e.next=1;break;case 11:case"end":return e.stop()}}),e,this)})))}},{key:"render",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Mr(this,void 0,void 0,N().mark((function e(){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workletsAreReady();case 2:return e.next=4,this._renderClock(t);case 4:return e.next=6,this._context.startRendering();case 6:return n=e.sent,e.abrupt("return",new co(n));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return Promise.resolve()}}]),n}(ro),ho=new oo,fo=ho;function po(){return fo===ho&&Ar&&vo(new ro),fo}function vo(t){fo=Vr(t)?new ro(t):Fr(t)?new lo(t):t}function yo(){return fo.resume()}if(Sr&&!Sr.TONE_SILENCE_LOGGING){var mo="v";"dev"===o&&(mo="");var _o=" * Tone.js ".concat(mo).concat(o," * ");console.log("%c".concat(_o),"background: #000; color: #fff")}function go(t){return Math.pow(10,t/20)}function ko(t){return Math.log(t)/Math.LN10*20}function xo(t){return Math.pow(2,t/12)}var wo=440;function bo(t){return Math.round(Zo(t))}function Zo(t){return 69+12*Math.log2(t/wo)}function To(t){return wo*Math.pow(2,(t-69)/12)}var So=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t,i,r){var o;return(0,c.Z)(this,n),(o=e.call(this)).defaultUnits="s",o._val=i,o._units=r,o.context=t,o._expressions=o._getExpressions(),o}return(0,u.Z)(n,[{key:"_getExpressions",value:function(){var t=this;return{hz:{method:function(e){return t._frequencyToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(e){return t._ticksToUnits(parseInt(e,10))},regexp:/^(\d+)i$/i},m:{method:function(e){return t._beatsToUnits(parseInt(e,10)*t._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(e,n){var i=parseInt(e,10),r="."===n?1.5:1;return 1===i?t._beatsToUnits(t._getTimeSignature())*r:t._beatsToUnits(4/i)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:function(e){return t._expressions[t.defaultUnits].method.call(t,e)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(e){return t._secondsToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(e){return parseInt(e,10)/t.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(e){var n=parseInt(e,10);return t._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:function(e,n,i){var r=0;return e&&"0"!==e&&(r+=t._beatsToUnits(t._getTimeSignature()*parseFloat(e))),n&&"0"!==n&&(r+=t._beatsToUnits(parseFloat(n))),i&&"0"!==i&&(r+=t._beatsToUnits(parseFloat(i)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}},{key:"valueOf",value:function(){if(this._val instanceof n&&this.fromType(this._val),vr(this._val))return this._noArg();if(wr(this._val)&&vr(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(gr(this._val)){var e=0;for(var i in this._val)if(yr(this._val[i])){var r=this._val[i];e+=new this.constructor(this.context,i).valueOf()*r}return e}if(yr(this._units)){var o=this._expressions[this._units],a=this._val.toString().trim().match(o.regexp);return a?o.method.apply(this,a.slice(1)):o.method.call(this,this._val)}return wr(this._val)?parseFloat(this._val):this._val}},{key:"_frequencyToUnits",value:function(t){return 1/t}},{key:"_beatsToUnits",value:function(t){return 60/this._getBpm()*t}},{key:"_secondsToUnits",value:function(t){return t}},{key:"_ticksToUnits",value:function(t){return t*this._beatsToUnits(1)/this._getPPQ()}},{key:"_noArg",value:function(){return this._now()}},{key:"_getBpm",value:function(){return this.context.transport.bpm.value}},{key:"_getTimeSignature",value:function(){return this.context.transport.timeSignature}},{key:"_getPPQ",value:function(){return this.context.transport.PPQ}},{key:"fromType",value:function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}},{key:"toFrequency",value:function(){return 1/this.toSeconds()}},{key:"toSamples",value:function(){return this.toSeconds()*this.context.sampleRate}},{key:"toMilliseconds",value:function(){return 1e3*this.toSeconds()}}]),n}(Wr),Ao=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="TimeClass",t}return(0,u.Z)(n,[{key:"_getExpressions",value:function(){var t=this;return Object.assign((0,Cr.Z)((0,Dr.Z)(n.prototype),"_getExpressions",this).call(this),{now:{method:function(e){return t._now()+new t.constructor(t.context,e).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(e){var i=new n(t.context,e).valueOf();return t._secondsToUnits(t.context.transport.nextSubdivision(i))},regexp:/^@(.+)/}})}},{key:"quantize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new this.constructor(this.context,t).valueOf(),i=this.valueOf(),r=Math.round(i/n),o=r*n,a=o-i;return i+a*e}},{key:"toNotation",value:function(){for(var t=this,e=this.toSeconds(),i=["1m"],r=1;r<9;r++){var o=Math.pow(2,r);i.push(o+"n."),i.push(o+"n"),i.push(o+"t")}i.push("0");var a=i[0],s=new n(this.context,i[0]).toSeconds();return i.forEach((function(i){var r=new n(t.context,i).toSeconds();Math.abs(r-e)<Math.abs(s-e)&&(a=i,s=r)})),a}},{key:"toBarsBeatsSixteenths",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),i=e%1*4;e=Math.floor(e)%this._getTimeSignature();var r=i.toString();return r.length>3&&(i=parseFloat(parseFloat(r).toFixed(3))),[n,e,i].join(":")}},{key:"toTicks",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}},{key:"toSeconds",value:function(){return this.valueOf()}},{key:"toMidi",value:function(){return bo(this.toFrequency())}},{key:"_now",value:function(){return this.context.now()}}]),n}(So);function Co(t,e){return new Ao(po(),t,e)}var Do=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="Frequency",t.defaultUnits="hz",t}return(0,u.Z)(n,[{key:"_getExpressions",value:function(){return Object.assign({},(0,Cr.Z)((0,Dr.Z)(n.prototype),"_getExpressions",this).call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this.defaultUnits?t:n.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var i=Oo[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?i:n.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})}},{key:"transpose",value:function(t){return new n(this.context,this.valueOf()*xo(t))}},{key:"harmonize",value:function(t){var e=this;return t.map((function(t){return e.transpose(t)}))}},{key:"toMidi",value:function(){return bo(this.valueOf())}},{key:"toNote",value:function(){var t=this.toFrequency(),e=Math.log2(t/n.A4),i=Math.round(12*e)+57,r=Math.floor(i/12);return r<0&&(i+=-12*r),Mo[i%12]+r.toString()}},{key:"toSeconds",value:function(){return 1/(0,Cr.Z)((0,Dr.Z)(n.prototype),"toSeconds",this).call(this)}},{key:"toTicks",value:function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}},{key:"_noArg",value:function(){return 0}},{key:"_frequencyToUnits",value:function(t){return t}},{key:"_ticksToUnits",value:function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}},{key:"_beatsToUnits",value:function(t){return 1/(0,Cr.Z)((0,Dr.Z)(n.prototype),"_beatsToUnits",this).call(this,t)}},{key:"_secondsToUnits",value:function(t){return 1/t}}],[{key:"A4",get:function(){return wo},set:function(t){!function(t){wo=t}(t)}},{key:"mtof",value:function(t){return To(t)}},{key:"ftom",value:function(t){return bo(t)}}]),n}(Ao),Oo={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Mo=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Eo(t,e){return new Do(po(),t,e)}var Ro=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="TransportTime",t}return(0,u.Z)(n,[{key:"_now",value:function(){return this.context.transport.seconds}}]),n}(Ao);function qo(t,e){return new Ro(po(),t,e)}var Fo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),t=e.call(this);var i=jr(n.getDefaults(),arguments,["context"]);return t.defaultContext?t.context=t.defaultContext:t.context=i.context,t}return(0,u.Z)(n,[{key:"now",value:function(){return this.context.currentTime+this.context.lookAhead}},{key:"immediate",value:function(){return this.context.currentTime}},{key:"sampleTime",get:function(){return 1/this.context.sampleRate}},{key:"blockTime",get:function(){return 128/this.context.sampleRate}},{key:"toSeconds",value:function(t){return new Ao(this.context,t).toSeconds()}},{key:"toFrequency",value:function(t){return new Do(this.context,t).toFrequency()}},{key:"toTicks",value:function(t){return new Ro(this.context,t).toTicks()}},{key:"_getPartialProperties",value:function(t){var e=this.get();return Object.keys(e).forEach((function(n){vr(t[n])&&delete e[n]})),e}},{key:"get",value:function(){var t=this,e=this.constructor.getDefaults();return Object.keys(e).forEach((function(i){if(Reflect.has(t,i)){var r=t[i];yr(r)&&yr(r.value)&&yr(r.setValueAtTime)?e[i]=r.value:r instanceof n?e[i]=r._getPartialProperties(e[i]):xr(r)||_r(r)||wr(r)||kr(r)?e[i]=r:delete e[i]}})),e}},{key:"set",value:function(t){var e=this;return Object.keys(t).forEach((function(i){Reflect.has(e,i)&&yr(e[i])&&(e[i]&&yr(e[i].value)&&yr(e[i].setValueAtTime)?e[i].value!==t[i]&&(e[i].value=t[i]):e[i]instanceof n?e[i].set(t[i]):e[i]=t[i])})),this}}],[{key:"getDefaults",value:function(){return{context:po()}}}]),n}(Wr),Vo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";return(0,c.Z)(this,n),(t=e.call(this)).name="StateTimeline",t._initial=i,t.setStateAtTime(t._initial,0),t}return(0,u.Z)(n,[{key:"getValueAtTime",value:function(t){var e=this.get(t);return null!==e?e.state:this._initial}},{key:"setStateAtTime",value:function(t,e,n){return cr(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}},{key:"getLastState",value:function(t,e){for(var n=this._search(e);n>=0;n--){var i=this._timeline[n];if(i.state===t)return i}}},{key:"getNextState",value:function(t,e){var n=this._search(e);if(-1!==n)for(var i=n;i<this._timeline.length;i++){var r=this._timeline[i];if(r.state===t)return r}}}]),n}(Hr),Io=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["param","units","convert"]))).name="Param",t.overridden=!1,t._minOutput=1e-7;var i=jr(n.getDefaults(),arguments,["param","units","convert"]);for(ur(yr(i.param)&&(Rr(i.param)||i.param instanceof n),"param must be an AudioParam");!Rr(i.param);)i.param=i.param._param;return t._swappable=!!yr(i.swappable)&&i.swappable,t._swappable?(t.input=t.context.createGain(),t._param=i.param,t.input.connect(t._param)):t._param=t.input=i.param,t._events=new Hr(1e3),t._initialValue=t._param.defaultValue,t.units=i.units,t.convert=i.convert,t._minValue=i.minValue,t._maxValue=i.maxValue,yr(i.value)&&i.value!==t._toType(t._initialValue)&&t.setValueAtTime(i.value,0),t}return(0,u.Z)(n,[{key:"value",get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}},{key:"minValue",get:function(){return yr(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}},{key:"maxValue",get:function(){return yr(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}},{key:"_is",value:function(t,e){return this.units===e}},{key:"_assertRange",value:function(t){return yr(this.maxValue)&&yr(this.minValue)&&cr(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}},{key:"_fromType",value:function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?go(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}},{key:"_toType",value:function(t){return this.convert&&"decibels"===this.units?ko(t):t}},{key:"setValueAtTime",value:function(t,e){var n=this.toSeconds(e),i=this._fromType(t);return ur(isFinite(i)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(i),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}},{key:"getValueAtTime",value:function(t){var e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),i=this._events.get(e),r=this._initialValue;if(null===i)r=this._initialValue;else if("setTargetAtTime"!==i.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)r=i.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){var o=i.value;if("setTargetAtTime"===i.type){var a=this._events.getBefore(i.time);o=null===a?this._initialValue:a.value}r="linearRampToValueAtTime"===n.type?this._linearInterpolate(i.time,o,n.time,n.value,e):this._exponentialInterpolate(i.time,o,n.time,n.value,e)}else r=i.value;else{var s,u=this._events.getBefore(i.time);s=null===u?this._initialValue:u.value,"setTargetAtTime"===i.type&&(r=this._exponentialApproach(i.time,s,i.value,i.constant,e))}return this._toType(r)}},{key:"setRampPoint",value:function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}},{key:"linearRampToValueAtTime",value:function(t,e){var n=this._fromType(t),i=this.toSeconds(e);return ur(isFinite(n)&&isFinite(i),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(n),this._events.add({time:i,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,i),this._param.linearRampToValueAtTime(n,i),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){var n=this._fromType(t);n=Qr(n,0)?this._minOutput:n,this._assertRange(n);var i=this.toSeconds(e);return ur(isFinite(n)&&isFinite(i),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,i),this._param.exponentialRampToValueAtTime(n,i),this}},{key:"exponentialRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}},{key:"linearRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}},{key:"targetRampTo",value:function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}},{key:"exponentialApproachValueAtTime",value:function(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);var i=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}},{key:"setTargetAtTime",value:function(t,e,n){var i=this._fromType(t);ur(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");var r=this.toSeconds(e);return this._assertRange(i),ur(isFinite(i)&&isFinite(r),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({constant:n,time:r,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",t,r,n),this._param.setTargetAtTime(i,r,n),this}},{key:"setValueCurveAtTime",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),e=this.toSeconds(e);var r=this._fromType(t[0])*i;this.setValueAtTime(this._toType(r),e);for(var o=n/(t.length-1),a=1;a<t.length;a++){var s=this._fromType(t[a])*i;this.linearRampToValueAtTime(this._toType(s),e+a*o)}return this}},{key:"cancelScheduledValues",value:function(t){var e=this.toSeconds(t);return ur(isFinite(e),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(t))),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}},{key:"cancelAndHoldAtTime",value:function(t){var e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));ur(isFinite(e),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(t))),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);var i=this._events.get(e),r=this._events.getAfter(e);return i&&Qr(i.time,e)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}},{key:"rampTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}},{key:"apply",value:function(t){var e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);var n=this._events.get(e);if(n&&"setTargetAtTime"===n.type)for(var i=this._events.getAfter(n.time),r=i?i.time:e+2,o=(r-e)/10,a=e;a<r;a+=o)t.linearRampToValueAtTime(this.getValueAtTime(a),a);return this._events.forEachAfter(this.context.currentTime,(function(e){"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}},{key:"setParam",value:function(t){ur(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._events.dispose(),this}},{key:"defaultValue",get:function(){return this._toType(this._param.defaultValue)}},{key:"_exponentialApproach",value:function(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)}},{key:"_linearInterpolate",value:function(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)}},{key:"_exponentialInterpolate",value:function(t,e,n,i,r){return e*Math.pow(i/e,(r-t)/(n-t))}}],[{key:"getDefaults",value:function(){return Object.assign(Fo.getDefaults(),{convert:!0,units:"number"})}}]),n}(Fo),No=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="ToneAudioNode",t._internalChannels=[],t}return(0,u.Z)(n,[{key:"numberOfInputs",get:function(){return yr(this.input)?Rr(this.input)||this.input instanceof Io?1:this.input.numberOfInputs:0}},{key:"numberOfOutputs",get:function(){return yr(this.output)?this.output.numberOfOutputs:0}},{key:"_isAudioNode",value:function(t){return yr(t)&&(t instanceof n||qr(t))}},{key:"_getInternalNodes",value:function(){var t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}},{key:"_setChannelProperties",value:function(t){this._getInternalNodes().forEach((function(e){e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}},{key:"_getChannelProperties",value:function(){var t=this._getInternalNodes();ur(t.length>0,"ToneAudioNode does not have any internal nodes");var e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}},{key:"channelCount",get:function(){return this._getChannelProperties().channelCount},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}},{key:"channelCountMode",get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}},{key:"channelInterpretation",get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return jo(this,t,e,n),this}},{key:"toDestination",value:function(){return this.connect(this.context.destination),this}},{key:"toMaster",value:function(){return dr("toMaster() has been renamed toDestination()"),this.toDestination()}},{key:"disconnect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Lo(this,t,e,n),this}},{key:"chain",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Po.apply(void 0,[this].concat(e)),this}},{key:"fan",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){return t.connect(e)})),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),yr(this.input)&&(this.input instanceof n?this.input.dispose():qr(this.input)&&this.input.disconnect()),yr(this.output)&&(this.output instanceof n?this.output.dispose():qr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}]),n}(Fo);function Po(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.shift();e.reduce((function(t,e){return t instanceof No?t.connect(e):qr(t)&&jo(t,e),e}),i)}function jo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(ur(yr(t),"Cannot connect from undefined node"),ur(yr(e),"Cannot connect to undefined node"),(e instanceof No||qr(e))&&ur(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ur(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof No||e instanceof Io;)yr(e.input)&&(e=e.input);for(;t instanceof No;)yr(t.output)&&(t=t.output);Rr(e)?t.connect(e,n):t.connect(e,n,i)}function Lo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(yr(e))for(;e instanceof No;)e=e.input;for(;!qr(t);)yr(t.output)&&(t=t.output);Rr(e)?t.disconnect(e,n):qr(e)?t.disconnect(e,n,i):t.disconnect()}var zo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["gain","units"]))).name="Gain",t._gainNode=t.context.createGain(),t.input=t._gainNode,t.output=t._gainNode;var i=jr(n.getDefaults(),arguments,["gain","units"]);return t.gain=new Io({context:t.context,convert:i.convert,param:t._gainNode.gain,units:i.units,value:i.gain,minValue:i.minValue,maxValue:i.maxValue}),ao((0,U.Z)(t),"gain"),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this.gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{convert:!0,gain:1,units:"gain"})}}]),n}(No),Wo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t)).onended=uo,i._startTime=-1,i._stopTime=-1,i._timeout=-1,i.output=new zo({context:i.context,gain:0}),i._gainNode=i.output,i.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},i._fadeIn=t.fadeIn,i._fadeOut=t.fadeOut,i._curve=t.curve,i.onended=t.onended,i}return(0,u.Z)(n,[{key:"_startGain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ur(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}},{key:"stop",value:function(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}},{key:"_stopGain",value:function(t){var e=this;ur(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((function(){var t="exponential"===e._curve?2*n:0;e._stopSource(e.now()+t),e._onended()}),this._stopTime-this.context.currentTime),this}},{key:"_onended",value:function(){var t=this;if(this.onended!==uo&&(this.onended(this),this.onended=uo,!this.context.isOffline)){var e=function(){return t.dispose()};"undefined"!==typeof window.requestIdleCallback?window.requestIdleCallback(e):setTimeout(e,1e3)}}},{key:"state",get:function(){return this.getStateAtTime(this.now())}},{key:"cancelStop",value:function(){return this.log("cancelStop"),ur(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:uo})}}]),n}(No),Bo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["offset"]))).name="ToneConstantSource",t._source=t.context.createConstantSource();var i=jr(n.getDefaults(),arguments,["offset"]);return jo(t._source,t._gainNode),t.offset=new Io({context:t.context,convert:i.convert,param:t._source.offset,units:i.units,value:i.offset,minValue:i.minValue,maxValue:i.maxValue}),t}return(0,u.Z)(n,[{key:"start",value:function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}},{key:"_stopSource",value:function(t){this._source.stop(t)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Wo.getDefaults(),{convert:!0,offset:1,units:"number"})}}]),n}(Wo),Go=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["value","units"]))).name="Signal",t.override=!0;var i=jr(n.getDefaults(),arguments,["value","units"]);return t.output=t._constantSource=new Bo({context:t.context,convert:i.convert,offset:i.value,units:i.units,minValue:i.minValue,maxValue:i.maxValue}),t._constantSource.start(0),t.input=t._param=t._constantSource.offset,t}return(0,u.Z)(n,[{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Uo(this,t,e,n),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._param.dispose(),this._constantSource.dispose(),this}},{key:"setValueAtTime",value:function(t,e){return this._param.setValueAtTime(t,e),this}},{key:"getValueAtTime",value:function(t){return this._param.getValueAtTime(t)}},{key:"setRampPoint",value:function(t){return this._param.setRampPoint(t),this}},{key:"linearRampToValueAtTime",value:function(t,e){return this._param.linearRampToValueAtTime(t,e),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}},{key:"exponentialRampTo",value:function(t,e,n){return this._param.exponentialRampTo(t,e,n),this}},{key:"linearRampTo",value:function(t,e,n){return this._param.linearRampTo(t,e,n),this}},{key:"targetRampTo",value:function(t,e,n){return this._param.targetRampTo(t,e,n),this}},{key:"exponentialApproachValueAtTime",value:function(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}},{key:"setTargetAtTime",value:function(t,e,n){return this._param.setTargetAtTime(t,e,n),this}},{key:"setValueCurveAtTime",value:function(t,e,n,i){return this._param.setValueCurveAtTime(t,e,n,i),this}},{key:"cancelScheduledValues",value:function(t){return this._param.cancelScheduledValues(t),this}},{key:"cancelAndHoldAtTime",value:function(t){return this._param.cancelAndHoldAtTime(t),this}},{key:"rampTo",value:function(t,e,n){return this._param.rampTo(t,e,n),this}},{key:"value",get:function(){return this._param.value},set:function(t){this._param.value=t}},{key:"convert",get:function(){return this._param.convert},set:function(t){this._param.convert=t}},{key:"units",get:function(){return this._param.units}},{key:"overridden",get:function(){return this._param.overridden},set:function(t){this._param.overridden=t}},{key:"maxValue",get:function(){return this._param.maxValue}},{key:"minValue",get:function(){return this._param.minValue}},{key:"apply",value:function(t){return this._param.apply(t),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{convert:!0,units:"number",value:0})}}]),n}(No);function Uo(t,e,n,i){(e instanceof Io||Rr(e)||e instanceof Go&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Go&&(e.overridden=!0)),jo(t,e,n,i)}var Yo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["value"]))).name="TickParam",t._events=new Hr(1/0),t._multiplier=1;var i=jr(n.getDefaults(),arguments,["value"]);return t._multiplier=i.multiplier,t._events.cancel(0),t._events.add({ticks:0,time:0,type:"setValueAtTime",value:t._fromType(i.value)}),t.setValueAtTime(i.value,0),t}return(0,u.Z)(n,[{key:"setTargetAtTime",value:function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);for(var i=this._fromType(t),r=this._events.get(e),o=Math.round(Math.max(1/n,1)),a=0;a<=o;a++){var s=n*a+e,u=this._exponentialApproach(r.time,r.value,i,n,s);this.linearRampToValueAtTime(this._toType(u),s)}return this}},{key:"setValueAtTime",value:function(t,e){var i=this.toSeconds(e);(0,Cr.Z)((0,Dr.Z)(n.prototype),"setValueAtTime",this).call(this,t,e);var r=this._events.get(i),o=this._events.previousEvent(r),a=this._getTicksUntilEvent(o,i);return r.ticks=Math.max(a,0),this}},{key:"linearRampToValueAtTime",value:function(t,e){var i=this.toSeconds(e);(0,Cr.Z)((0,Dr.Z)(n.prototype),"linearRampToValueAtTime",this).call(this,t,e);var r=this._events.get(i),o=this._events.previousEvent(r),a=this._getTicksUntilEvent(o,i);return r.ticks=Math.max(a,0),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){e=this.toSeconds(e);for(var n=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(10*(e-i.time),1)),o=(e-i.time)/r,a=0;a<=r;a++){var s=o*a+i.time,u=this._exponentialInterpolate(i.time,i.value,e,n,s);this.linearRampToValueAtTime(this._toType(u),s)}return this}},{key:"_getTicksUntilEvent",value:function(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(vr(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var i=this._fromType(this.getValueAtTime(t.time)),r=this._fromType(this.getValueAtTime(e)),o=this._events.get(e);return o&&o.time===e&&"setValueAtTime"===o.type&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+r)+t.ticks}},{key:"getTicksAtTime",value:function(t){var e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}},{key:"getDurationOfTicks",value:function(t,e){var n=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-n}},{key:"getTimeOfTick",value:function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){var i=this._fromType(this.getValueAtTime(e.time)),r=(this._fromType(this.getValueAtTime(n.time))-i)/(n.time-e.time),o=Math.sqrt(Math.pow(i,2)-2*r*(e.ticks-t)),a=(-i+o)/r;return(a>0?a:(-i-o)/r)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}},{key:"ticksToTime",value:function(t,e){return this.getDurationOfTicks(t,e)}},{key:"timeToTicks",value:function(t,e){var n=this.toSeconds(e),i=this.toSeconds(t),r=this.getTicksAtTime(n);return this.getTicksAtTime(n+i)-r}},{key:"_fromType",value:function(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):(0,Cr.Z)((0,Dr.Z)(n.prototype),"_fromType",this).call(this,t)}},{key:"_toType",value:function(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:(0,Cr.Z)((0,Dr.Z)(n.prototype),"_toType",this).call(this,t)}},{key:"multiplier",get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}],[{key:"getDefaults",value:function(){return Object.assign(Io.getDefaults(),{multiplier:1,units:"hertz",value:1})}}]),n}(Io),Qo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["value"]))).name="TickSignal";var i=jr(n.getDefaults(),arguments,["value"]);return t.input=t._param=new Yo({context:t.context,convert:i.convert,multiplier:i.multiplier,param:t._constantSource.offset,units:i.units,value:i.value}),t}return(0,u.Z)(n,[{key:"ticksToTime",value:function(t,e){return this._param.ticksToTime(t,e)}},{key:"timeToTicks",value:function(t,e){return this._param.timeToTicks(t,e)}},{key:"getTimeOfTick",value:function(t){return this._param.getTimeOfTick(t)}},{key:"getDurationOfTicks",value:function(t,e){return this._param.getDurationOfTicks(t,e)}},{key:"getTicksAtTime",value:function(t){return this._param.getTicksAtTime(t)}},{key:"multiplier",get:function(){return this._param.multiplier},set:function(t){this._param.multiplier=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._param.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Go.getDefaults(),{multiplier:1,units:"hertz",value:1})}}]),n}(Go),Xo=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency"]))).name="TickSource",t._state=new Vo,t._tickOffset=new Hr;var i=jr(n.getDefaults(),arguments,["frequency"]);return t.frequency=new Qo({context:t.context,units:i.units,value:i.frequency}),ao((0,U.Z)(t),"frequency"),t._state.setStateAtTime("stopped",0),t.setTicksAtTime(0,0),t}return(0,u.Z)(n,[{key:"state",get:function(){return this.getStateAtTime(this.now())}},{key:"start",value:function(t,e){var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),yr(e)&&this.setTicksAtTime(e,n)),this}},{key:"stop",value:function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var n=this._state.get(e);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}},{key:"pause",value:function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}},{key:"cancel",value:function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}},{key:"getTicksAtTime",value:function(t){var e=this,n=this.toSeconds(t),i=this._state.getLastState("stopped",n),r={state:"paused",time:n};this._state.add(r);var o=i,a=0;return this._state.forEachBetween(i.time,n+this.sampleTime,(function(t){var n=o.time,i=e._tickOffset.get(t.time);i&&i.time>=o.time&&(a=i.ticks,n=i.time),"started"===o.state&&"started"!==t.state&&(a+=e.frequency.getTicksAtTime(t.time)-e.frequency.getTicksAtTime(n)),o=t})),this._state.remove(r),a}},{key:"ticks",get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}},{key:"seconds",get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}},{key:"getSecondsAtTime",value:function(t){var e=this;t=this.toSeconds(t);var n=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);var r=n,o=0;return this._state.forEachBetween(n.time,t+this.sampleTime,(function(t){var n=r.time,i=e._tickOffset.get(t.time);i&&i.time>=r.time&&(o=i.seconds,n=i.time),"started"===r.state&&"started"!==t.state&&(o+=t.time-n),r=t})),this._state.remove(i),o}},{key:"setTicksAtTime",value:function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}},{key:"getStateAtTime",value:function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}},{key:"getTimeOfTick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now(),n=this._tickOffset.get(e),i=this._state.get(e),r=Math.max(n.time,i.time),o=this.frequency.getTicksAtTime(r)+t-n.ticks;return this.frequency.getTimeOfTick(o)}},{key:"forEachTickBetween",value:function(t,e,n){var i=this,r=this._state.get(t);this._state.forEachBetween(t,e,(function(e){r&&"started"===r.state&&"started"!==e.state&&i.forEachTickBetween(Math.max(r.time,t),e.time-i.sampleTime,n),r=e}));var o=null;if(r&&"started"===r.state){var a=Math.max(r.time,t),s=this.frequency.getTicksAtTime(a),u=s-this.frequency.getTicksAtTime(r.time),c=Math.ceil(u)-u;c=Qr(c,1)?0:c;for(var l=this.frequency.getTimeOfTick(s+c);l<e;){try{n(l,Math.round(this.getTicksAtTime(l)))}catch(h){o=h;break}l+=this.frequency.getDurationOfTicks(1,l)}}if(o)throw o;return this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign({frequency:1,units:"hertz"},Fo.getDefaults())}}]),n}(Fo),Ho=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["callback","frequency"]))).name="Clock",t.callback=uo,t._lastUpdate=0,t._state=new Vo("stopped"),t._boundLoop=t._loop.bind((0,U.Z)(t));var i=jr(n.getDefaults(),arguments,["callback","frequency"]);return t.callback=i.callback,t._tickSource=new Xo({context:t.context,frequency:i.frequency,units:i.units}),t._lastUpdate=0,t.frequency=t._tickSource.frequency,ao((0,U.Z)(t),"frequency"),t._state.setStateAtTime("stopped",0),t.context.on("tick",t._boundLoop),t}return(0,u.Z)(n,[{key:"state",get:function(){return this._state.getValueAtTime(this.now())}},{key:"start",value:function(t,e){lr(this.context);var n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}},{key:"stop",value:function(t){var e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}},{key:"pause",value:function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}},{key:"ticks",get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}},{key:"seconds",get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}},{key:"getSecondsAtTime",value:function(t){return this._tickSource.getSecondsAtTime(t)}},{key:"setTicksAtTime",value:function(t,e){return this._tickSource.setTicksAtTime(t,e),this}},{key:"getTimeOfTick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(t,e)}},{key:"getTicksAtTime",value:function(t){return this._tickSource.getTicksAtTime(t)}},{key:"nextTickTime",value:function(t,e){var n=this.toSeconds(e),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+t,n)}},{key:"_loop",value:function(){var t=this,e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,(function(e){switch(e.state){case"started":var n=t._tickSource.getTicksAtTime(e.time);t.emit("start",e.time,n);break;case"stopped":0!==e.time&&t.emit("stop",e.time);break;case"paused":t.emit("pause",e.time)}})),this._tickSource.forEachTickBetween(e,n,(function(e,n){t.callback(e,n)})))}},{key:"getStateAtTime",value:function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Fo.getDefaults(),{callback:uo,frequency:1,units:"hertz"})}}]),n}(Fo);no.mixin(Ho);var $o=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["delayTime","maxDelay"]))).name="Delay";var i=jr(n.getDefaults(),arguments,["delayTime","maxDelay"]),r=t.toSeconds(i.maxDelay);return t._maxDelay=Math.max(r,t.toSeconds(i.delayTime)),t._delayNode=t.input=t.output=t.context.createDelay(r),t.delayTime=new Io({context:t.context,param:t._delayNode.delayTime,units:"time",value:i.delayTime,minValue:0,maxValue:t.maxDelay}),ao((0,U.Z)(t),"delayTime"),t}return(0,u.Z)(n,[{key:"maxDelay",get:function(){return this._maxDelay}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{delayTime:0,maxDelay:1})}}]),n}(No);function Jo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:po().sampleRate;return Mr(this,void 0,void 0,N().mark((function r(){var o,a,s,u;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=po(),vo(a=new lo(n,e,i)),r.next=5,t(a);case 5:return s=a.render(),vo(o),r.next=9,s;case 9:return u=r.sent,r.abrupt("return",new co(u));case 11:case"end":return r.stop()}}),r)})))}var Ko=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this)).name="ToneAudioBuffers",t._buffers=new Map,t._loadingCount=0;var i=jr(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");return t.baseUrl=i.baseUrl,Object.keys(i.urls).forEach((function(e){t._loadingCount++;var n=i.urls[e];t.add(e,n,t._bufferLoaded.bind((0,U.Z)(t),i.onload),i.onerror)})),t}return(0,u.Z)(n,[{key:"has",value:function(t){return this._buffers.has(t.toString())}},{key:"get",value:function(t){return ur(this.has(t),"ToneAudioBuffers has no buffer named: ".concat(t)),this._buffers.get(t.toString())}},{key:"_bufferLoaded",value:function(t){this._loadingCount--,0===this._loadingCount&&t&&t()}},{key:"loaded",get:function(){return Array.from(this._buffers).every((function(t){var e=(0,s.Z)(t,2);e[0];return e[1].loaded}))}},{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uo,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uo;return wr(e)?this._buffers.set(t.toString(),new co(this.baseUrl+e,n,i)):this._buffers.set(t.toString(),new co(e,n,i)),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._buffers.forEach((function(t){return t.dispose()})),this._buffers.clear(),this}}],[{key:"getDefaults",value:function(){return{baseUrl:"",onerror:uo,onload:uo,urls:{}}}}]),n}(Wr),ta=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="MidiClass",t.defaultUnits="midi",t}return(0,u.Z)(n,[{key:"_frequencyToUnits",value:function(t){return bo((0,Cr.Z)((0,Dr.Z)(n.prototype),"_frequencyToUnits",this).call(this,t))}},{key:"_ticksToUnits",value:function(t){return bo((0,Cr.Z)((0,Dr.Z)(n.prototype),"_ticksToUnits",this).call(this,t))}},{key:"_beatsToUnits",value:function(t){return bo((0,Cr.Z)((0,Dr.Z)(n.prototype),"_beatsToUnits",this).call(this,t))}},{key:"_secondsToUnits",value:function(t){return bo((0,Cr.Z)((0,Dr.Z)(n.prototype),"_secondsToUnits",this).call(this,t))}},{key:"toMidi",value:function(){return this.valueOf()}},{key:"toFrequency",value:function(){return To(this.toMidi())}},{key:"transpose",value:function(t){return new n(this.context,this.toMidi()+t)}}]),n}(Do);function ea(t,e){return new ta(po(),t,e)}var na=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="Ticks",t.defaultUnits="i",t}return(0,u.Z)(n,[{key:"_now",value:function(){return this.context.transport.ticks}},{key:"_beatsToUnits",value:function(t){return this._getPPQ()*t}},{key:"_secondsToUnits",value:function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}},{key:"_ticksToUnits",value:function(t){return t}},{key:"toTicks",value:function(){return this.valueOf()}},{key:"toSeconds",value:function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}]),n}(Ro);function ia(t,e){return new na(po(),t,e)}var ra=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="Draw",t.expiration=.25,t.anticipation=.008,t._events=new Hr,t._boundDrawLoop=t._drawLoop.bind((0,U.Z)(t)),t._animationFrame=-1,t}return(0,u.Z)(n,[{key:"schedule",value:function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}},{key:"cancel",value:function(t){return this._events.cancel(this.toSeconds(t)),this}},{key:"_drawLoop",value:function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}]),n}(Fo);Jr((function(t){t.draw=new ra({context:t})})),to((function(t){t.draw.dispose()}));var oa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="IntervalTimeline",t._root=null,t._length=0,t}return(0,u.Z)(n,[{key:"add",value:function(t){ur(yr(t.time),"Events must have a time property"),ur(yr(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new aa(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}},{key:"remove",value:function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r.event===t){this._removeNode(r),this._length--;break}}}return this}},{key:"length",get:function(){return this._length}},{key:"cancel",value:function(t){var e=this;return this.forEachFrom(t,(function(t){return e.remove(t)})),this}},{key:"_setRoot",value:function(t){this._root=t,null!==this._root&&(this._root.parent=null)}},{key:"_replaceNodeInParent",value:function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}},{key:"_removeNode",value:function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,n=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}},{key:"_rotateLeft",value:function(t){var e=t.parent,n=t.isLeftChild(),i=t.right;i&&(t.right=i.left,i.left=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}},{key:"_rotateRight",value:function(t){var e=t.parent,n=t.isLeftChild(),i=t.left;i&&(t.left=i.right,i.right=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}},{key:"_rebalance",value:function(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}},{key:"get",value:function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],i=1;i<e.length;i++)e[i].low>n.low&&(n=e[i]);return n.event}}return null}},{key:"forEach",value:function(t){if(null!==this._root){var e=[];this._root.traverse((function(t){return e.push(t)})),e.forEach((function(e){e.event&&t(e.event)}))}return this}},{key:"forEachAtTime",value:function(t,e){if(null!==this._root){var n=[];this._root.search(t,n),n.forEach((function(t){t.event&&e(t.event)}))}return this}},{key:"forEachFrom",value:function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n),n.forEach((function(t){t.event&&e(t.event)}))}return this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),null!==this._root&&this._root.traverse((function(t){return t.dispose()})),this._root=null,this}}]),n}(Wr),aa=function(){function t(e,n,i){(0,c.Z)(this,t),this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=e,this.high=n,this.max=this.high}return(0,u.Z)(t,[{key:"insert",value:function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}},{key:"search",value:function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}},{key:"searchAfter",value:function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}},{key:"traverse",value:function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}},{key:"updateHeight",value:function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}},{key:"updateMax",value:function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}},{key:"getBalance",value:function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}},{key:"isLeftChild",value:function(){return null!==this.parent&&this.parent.left===this}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}},{key:"dispose",value:function(){this.parent=null,this._left=null,this._right=null,this.event=null}}]),t}(),sa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["volume"]))).name="Volume";var i=jr(n.getDefaults(),arguments,["volume"]);return t.input=t.output=new zo({context:t.context,gain:i.volume,units:"decibels"}),t.volume=t.output.gain,ao((0,U.Z)(t),"volume"),t._unmutedVolume=i.volume,t.mute=i.mute,t}return(0,u.Z)(n,[{key:"mute",get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{mute:!1,volume:0})}}]),n}(No),ua=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="Destination",t.input=new sa({context:t.context}),t.output=new zo({context:t.context}),t.volume=t.input.volume;var i=jr(n.getDefaults(),arguments);return Po(t.input,t.output,t.context.rawContext.destination),t.mute=i.mute,t._internalChannels=[t.input,t.context.rawContext.destination,t.output],t}return(0,u.Z)(n,[{key:"mute",get:function(){return this.input.mute},set:function(t){this.input.mute=t}},{key:"chain",value:function(){this.input.disconnect();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift(this.input),e.push(this.output),Po.apply(void 0,e),this}},{key:"maxChannelCount",get:function(){return this.context.rawContext.destination.maxChannelCount}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{mute:!1,volume:0})}}]),n}(No);Jr((function(t){t.destination=new ua({context:t})})),to((function(t){t.destination.dispose()}));var ca=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this)).name="TimelineValue",i._timeline=new Hr({memory:10}),i._initialValue=t,i}return(0,u.Z)(n,[{key:"set",value:function(t,e){return this._timeline.add({value:t,time:e}),this}},{key:"get",value:function(t){var e=this._timeline.get(t);return e?e.value:this._initialValue}}]),n}(Wr),la=function(){function t(e,n){(0,c.Z)(this,t),this.id=t._eventId++;var i=Object.assign(t.getDefaults(),n);this.transport=e,this.callback=i.callback,this._once=i.once,this.time=i.time}return(0,u.Z)(t,[{key:"invoke",value:function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}},{key:"dispose",value:function(){return this.callback=void 0,this}}],[{key:"getDefaults",value:function(){return{callback:uo,once:!1,time:0}}}]),t}();la._eventId=0;var ha=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t,i){var r;(0,c.Z)(this,n),(r=e.call(this,t,i))._currentId=-1,r._nextId=-1,r._nextTick=r.time,r._boundRestart=r._restart.bind((0,U.Z)(r));var o=Object.assign(n.getDefaults(),i);return r.duration=new na(t.context,o.duration).valueOf(),r._interval=new na(t.context,o.interval).valueOf(),r._nextTick=o.time,r.transport.on("start",r._boundRestart),r.transport.on("loopStart",r._boundRestart),r.context=r.transport.context,r._restart(),r}return(0,u.Z)(n,[{key:"invoke",value:function(t){this._createEvents(t),(0,Cr.Z)((0,Dr.Z)(n.prototype),"invoke",this).call(this,t)}},{key:"_createEvents",value:function(t){var e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new na(this.context,this._nextTick).toSeconds()))}},{key:"_restart",value:function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new na(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new na(this.context,this._nextTick).toSeconds())}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}],[{key:"getDefaults",value:function(){return Object.assign({},la.getDefaults(),{duration:1/0,interval:1,once:!1})}}]),n}(la),fa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="Transport",t._loop=new ca(!1),t._loopStart=0,t._loopEnd=0,t._scheduledEvents={},t._timeline=new Hr,t._repeatedEvents=new oa,t._syncedSignals=[],t._swingAmount=0;var i=jr(n.getDefaults(),arguments);return t._ppq=i.ppq,t._clock=new Ho({callback:t._processTick.bind((0,U.Z)(t)),context:t.context,frequency:0,units:"bpm"}),t._bindClockEvents(),t.bpm=t._clock.frequency,t._clock.frequency.multiplier=i.ppq,t.bpm.setValueAtTime(i.bpm,0),ao((0,U.Z)(t),"bpm"),t._timeSignature=i.timeSignature,t._swingTicks=i.ppq/2,t}return(0,u.Z)(n,[{key:"_processTick",value:function(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(2*this._swingTicks)!==0){var n=e%(2*this._swingTicks)/(2*this._swingTicks),i=Math.sin(n*Math.PI)*this._swingAmount;t+=new na(this.context,2*this._swingTicks/3).toSeconds()*i}this._timeline.forEachAtTime(e,(function(e){return e.invoke(t)}))}},{key:"schedule",value:function(t,e){var n=new la(this,{callback:t,time:new Ro(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}},{key:"scheduleRepeat",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=new ha(this,{callback:t,duration:new Ao(this.context,i).toTicks(),interval:new Ao(this.context,e).toTicks(),time:new Ro(this.context,n).toTicks()});return this._addEvent(r,this._repeatedEvents)}},{key:"scheduleOnce",value:function(t,e){var n=new la(this,{callback:t,once:!0,time:new Ro(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}},{key:"clear",value:function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}},{key:"_addEvent",value:function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}},{key:"cancel",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.toTicks(e);return this._timeline.forEachFrom(n,(function(e){return t.clear(e.id)})),this._repeatedEvents.forEachFrom(n,(function(e){return t.clear(e.id)})),this}},{key:"_bindClockEvents",value:function(){var t=this;this._clock.on("start",(function(e,n){n=new na(t.context,n).toSeconds(),t.emit("start",e,n)})),this._clock.on("stop",(function(e){t.emit("stop",e)})),this._clock.on("pause",(function(e){t.emit("pause",e)}))}},{key:"state",get:function(){return this._clock.getStateAtTime(this.now())}},{key:"start",value:function(t,e){var n;return yr(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}},{key:"stop",value:function(t){return this._clock.stop(t),this}},{key:"pause",value:function(t){return this._clock.pause(t),this}},{key:"toggle",value:function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}},{key:"timeSignature",get:function(){return this._timeSignature},set:function(t){xr(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}},{key:"loopStart",get:function(){return new Ao(this.context,this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}},{key:"loopEnd",get:function(){return new Ao(this.context,this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}},{key:"loop",get:function(){return this._loop.get(this.now())},set:function(t){this._loop.set(t,this.now())}},{key:"setLoopPoints",value:function(t,e){return this.loopStart=t,this.loopEnd=e,this}},{key:"swing",get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}},{key:"swingSubdivision",get:function(){return new na(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}},{key:"position",get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new na(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}},{key:"seconds",get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}},{key:"progress",get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}},{key:"ticks",get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();if("started"===this.state){var n=this._clock.getTicksAtTime(e),i=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(t,e)}}},{key:"getTicksAtTime",value:function(t){return Math.round(this._clock.getTicksAtTime(t))}},{key:"getSecondsAtTime",value:function(t){return this._clock.getSecondsAtTime(t)}},{key:"PPQ",get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t}},{key:"nextSubdivision",value:function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}},{key:"syncSignal",value:function(t,e){if(!e){var n=this.now();if(0!==t.getValueAtTime(n)){var i=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/i}else e=0}var r=new zo(e);return this.bpm.connect(r),r.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:r,signal:t}),t.value=0,this}},{key:"unsyncSignal",value:function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._clock.dispose(),so(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Fo.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}}]),n}(Fo);no.mixin(fa),Jr((function(t){t.transport=new fa({context:t})})),to((function(t){t.transport.dispose()}));var pa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t)).input=void 0,i._state=new Vo("stopped"),i._synced=!1,i._scheduled=[],i._syncedStart=uo,i._syncedStop=uo,i._state.memory=100,i._state.increasing=!0,i._volume=i.output=new sa({context:i.context,mute:t.mute,volume:t.volume}),i.volume=i._volume.volume,ao((0,U.Z)(i),"volume"),i.onstop=t.onstop,i}return(0,u.Z)(n,[{key:"state",get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}},{key:"mute",get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}},{key:"_clampToCurrentTime",value:function(t){return this._synced?t:Math.max(t,this.context.currentTime)}},{key:"start",value:function(t,e,n){var i=this,r=vr(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),this._synced||"started"!==this._state.getValueAtTime(r))if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){var o=this._state.get(r);o&&(o.offset=this.toSeconds(Lr(e,0)),o.duration=n?this.toSeconds(n):void 0);var a=this.context.transport.schedule((function(t){i._start(t,e,n)}),r);this._scheduled.push(a),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else lr(this.context),this._start(r,e,n);else ur(Gr(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,n);return this}},{key:"stop",value:function(t){var e=vr(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||yr(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){var n=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}},{key:"restart",value:function(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}},{key:"sync",value:function(){var t=this;return this._synced||(this._synced=!0,this._syncedStart=function(e,n){if(n>0){var i=t._state.get(n);if(i&&"started"===i.state&&i.time!==n){var r,o=n-t.toSeconds(i.time);i.duration&&(r=t.toSeconds(i.duration)-o),t._start(e,t.toSeconds(i.offset)+o,r)}}},this._syncedStop=function(e){var n=t.context.transport.getSecondsAtTime(Math.max(e-t.sampleTime,0));"started"===t._state.getValueAtTime(n)&&t._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}},{key:"unsync",value:function(){var t=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((function(e){return t.context.transport.clear(e)})),this._scheduled=[],this._state.cancel(0),this._stop(0),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.onstop=uo,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{mute:!1,onstop:uo,volume:0})}}]),n}(No),da=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["url","onload"]))).name="ToneBufferSource",t._source=t.context.createBufferSource(),t._internalChannels=[t._source],t._sourceStarted=!1,t._sourceStopped=!1;var i=jr(n.getDefaults(),arguments,["url","onload"]);return jo(t._source,t._gainNode),t._source.onended=function(){return t._stopSource()},t.playbackRate=new Io({context:t.context,param:t._source.playbackRate,units:"positive",value:i.playbackRate}),t.loop=i.loop,t.loopStart=i.loopStart,t.loopEnd=i.loopEnd,t._buffer=new co(i.url,i.onload,i.onerror),t._internalChannels.push(t._source),t}return(0,u.Z)(n,[{key:"fadeIn",get:function(){return this._fadeIn},set:function(t){this._fadeIn=t}},{key:"fadeOut",get:function(){return this._fadeOut},set:function(t){this._fadeOut=t}},{key:"curve",get:function(){return this._curve},set:function(t){this._curve=t}},{key:"start",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ur(this.buffer.loaded,"buffer is either not set or not loaded");var r=this.toSeconds(t);this._startGain(r,i),e=this.loop?Lr(e,this.loopStart):Lr(e,0);var o=Math.max(this.toSeconds(e),0);if(this.loop){var a=this.toSeconds(this.loopEnd)||this.buffer.duration,s=this.toSeconds(this.loopStart),u=a-s;Ur(o,a)&&(o=(o-s)%u+s),Qr(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Yr(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,o)),yr(n)){var c=this.toSeconds(n);c=Math.max(c,0),this.stop(r+c)}return this}},{key:"_stopSource",value:function(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}},{key:"loopStart",get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}},{key:"loopEnd",get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}},{key:"buffer",get:function(){return this._buffer},set:function(t){this._buffer.set(t)}},{key:"loop",get:function(){return this._source.loop},set:function(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Wo.getDefaults(),{url:new co,loop:!1,loopEnd:0,loopStart:0,onload:uo,onerror:uo,playbackRate:1})}}]),n}(Wo),va=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["type"]))).name="Noise",t._source=null;var i=jr(n.getDefaults(),arguments,["type"]);return t._playbackRate=i.playbackRate,t.type=i.type,t._fadeIn=i.fadeIn,t._fadeOut=i.fadeOut,t}return(0,u.Z)(n,[{key:"type",get:function(){return this._type},set:function(t){if(ur(t in _a,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){var e=this.now();this._stop(e),this._start(e)}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}},{key:"_start",value:function(t){var e=this,n=_a[this._type];this._source=new da({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:function(){return e.onstop(e)},playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(n.duration-.001))}},{key:"_stop",value:function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}},{key:"fadeIn",get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}},{key:"fadeOut",get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}},{key:"_restart",value:function(t){this._stop(t),this._start(t)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._source&&this._source.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pa.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}}]),n}(pa),ya=220500,ma={brown:null,pink:null,white:null},_a={get brown(){if(!ma.brown){for(var t=[],e=0;e<2;e++){var n=new Float32Array(ya);t[e]=n;for(var i=0,r=0;r<ya;r++){var o=2*Math.random()-1;n[r]=(i+.02*o)/1.02,i=n[r],n[r]*=3.5}}ma.brown=(new co).fromArray(t)}return ma.brown},get pink(){if(!ma.pink){for(var t=[],e=0;e<2;e++){var n=new Float32Array(ya);t[e]=n;var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,c=void 0;i=r=o=a=s=u=c=0;for(var l=0;l<ya;l++){var h=2*Math.random()-1;i=.99886*i+.0555179*h,r=.99332*r+.0750759*h,o=.969*o+.153852*h,a=.8665*a+.3104856*h,s=.55*s+.5329522*h,u=-.7616*u-.016898*h,n[l]=i+r+o+a+s+u+c+.5362*h,n[l]*=.11,c=.115926*h}}ma.pink=(new co).fromArray(t)}return ma.pink},get white(){if(!ma.white){for(var t=[],e=0;e<2;e++){var n=new Float32Array(ya);t[e]=n;for(var i=0;i<ya;i++)n[i]=2*Math.random()-1}ma.white=(new co).fromArray(t)}return ma.white}},ga=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["volume"]))).name="UserMedia";var i=jr(n.getDefaults(),arguments,["volume"]);return t._volume=t.output=new sa({context:t.context,volume:i.volume}),t.volume=t._volume.volume,ao((0,U.Z)(t),"volume"),t.mute=i.mute,t}return(0,u.Z)(n,[{key:"open",value:function(t){return Mr(this,void 0,void 0,N().mark((function e(){var i,r,o,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ur(n.supported,"UserMedia is not supported"),"started"===this.state&&this.close(),e.next=4,n.enumerateDevices();case 4:return i=e.sent,_r(t)?this._device=i[t]:(this._device=i.find((function(e){return e.label===t||e.deviceId===t})),!this._device&&i.length>0&&(this._device=i[0]),ur(yr(this._device),"No matching device ".concat(t))),r={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}},this._device&&(r.audio.deviceId=this._device.deviceId),e.next=10,navigator.mediaDevices.getUserMedia(r);case 10:return o=e.sent,this._stream||(this._stream=o,jo(a=this.context.createMediaStreamSource(o),this.output),this._mediaStream=a),e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((function(t){t.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}},{key:"state",get:function(){return this._stream&&this._stream.active?"started":"stopped"}},{key:"deviceId",get:function(){return this._device?this._device.deviceId:void 0}},{key:"groupId",get:function(){return this._device?this._device.groupId:void 0}},{key:"label",get:function(){return this._device?this._device.label:void 0}},{key:"mute",get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.close(),this._volume.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{mute:!1,volume:0})}},{key:"enumerateDevices",value:function(){return Mr(this,void 0,void 0,N().mark((function t(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.enumerateDevices();case 2:return e=t.sent,t.abrupt("return",e.filter((function(t){return"audioinput"===t.kind})));case 4:case"end":return t.stop()}}),t)})))}},{key:"supported",get:function(){return yr(navigator.mediaDevices)&&yr(navigator.mediaDevices.getUserMedia)}}]),n}(No);function ka(t,e){return Mr(this,void 0,void 0,N().mark((function n(){var i,r,o;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e/t.context.sampleRate,r=new lo(1,i,t.context.sampleRate),new t.constructor(Object.assign(t.get(),{frequency:2/i,detune:0,context:r})).toDestination().start(0),n.next=6,r.render();case 6:return o=n.sent,n.abrupt("return",o.getChannelData(0));case 8:case"end":return n.stop()}}),n)})))}var xa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type"]))).name="ToneOscillatorNode",t._oscillator=t.context.createOscillator(),t._internalChannels=[t._oscillator];var i=jr(n.getDefaults(),arguments,["frequency","type"]);return jo(t._oscillator,t._gainNode),t.type=i.type,t.frequency=new Io({context:t.context,param:t._oscillator.frequency,units:"frequency",value:i.frequency}),t.detune=new Io({context:t.context,param:t._oscillator.detune,units:"cents",value:i.detune}),ao((0,U.Z)(t),["frequency","detune"]),t}return(0,u.Z)(n,[{key:"start",value:function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}},{key:"_stopSource",value:function(t){this._oscillator.stop(t)}},{key:"setPeriodicWave",value:function(t){return this._oscillator.setPeriodicWave(t),this}},{key:"type",get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Wo.getDefaults(),{detune:0,frequency:440,type:"sine"})}}]),n}(Wo),wa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type"]))).name="Oscillator",t._oscillator=null;var i=jr(n.getDefaults(),arguments,["frequency","type"]);return t.frequency=new Go({context:t.context,units:"frequency",value:i.frequency}),ao((0,U.Z)(t),"frequency"),t.detune=new Go({context:t.context,units:"cents",value:i.detune}),ao((0,U.Z)(t),"detune"),t._partials=i.partials,t._partialCount=i.partialCount,t._type=i.type,i.partialCount&&"custom"!==i.type&&(t._type=t.baseType+i.partialCount.toString()),t.phase=i.phase,t}return(0,u.Z)(n,[{key:"_start",value:function(t){var e=this,n=this.toSeconds(t),i=new xa({context:this.context,onended:function(){return e.onstop(e)}});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}},{key:"_stop",value:function(t){var e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}},{key:"_restart",value:function(t){var e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}},{key:"syncFrequency",value:function(){return this.context.transport.syncSignal(this.frequency),this}},{key:"unsyncFrequency",value:function(){return this.context.transport.unsyncSignal(this.frequency),this}},{key:"_getCachedPeriodicWave",value:function(){var t=this;if("custom"===this._type)return n._periodicWaveCache.find((function(e){return e.phase===t._phase&&(n=e.partials,i=t._partials,n.length===i.length&&n.every((function(t,e){return i[e]===t})));var n,i}));var e=n._periodicWaveCache.find((function(e){return e.type===t._type&&e.phase===t._phase}));return this._partialCount=e?e.partialCount:this._partialCount,e}},{key:"type",get:function(){return this._type},set:function(t){this._type=t;var e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var i=this._getCachedPeriodicWave();if(yr(i)){var r=i.partials,o=i.wave;this._wave=o,this._partials=r,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{var a=this._getRealImaginary(t,this._phase),u=(0,s.Z)(a,2),c=u[0],l=u[1],h=this.context.createPeriodicWave(c,l);this._wave=h,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),n._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:c,type:this._type,wave:this._wave}),n._periodicWaveCache.length>100&&n._periodicWaveCache.shift()}}}},{key:"baseType",get:function(){return this._type.replace(this.partialCount.toString(),"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}},{key:"partialCount",get:function(){return this._partialCount},set:function(t){cr(t,0);var e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{var i=new Float32Array(t);this._partials.forEach((function(t,e){return i[e]=t})),this._partials=Array.from(i),this.type=this._type}}},{key:"_getRealImaginary",value:function(t,e){var n=2048,i=new Float32Array(n),r=new Float32Array(n),o=1;if("custom"===t){if(o=this._partials.length+1,this._partialCount=this._partials.length,n=o,0===this._partials.length)return[i,r]}else{var a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);a?(o=parseInt(a[2],10)+1,this._partialCount=parseInt(a[2],10),t=a[1],n=o=Math.max(o,2)):this._partialCount=0,this._partials=[]}for(var s=1;s<n;++s){var u=2/(s*Math.PI),c=void 0;switch(t){case"sine":c=s<=o?1:0,this._partials[s-1]=c;break;case"square":c=1&s?2*u:0,this._partials[s-1]=c;break;case"sawtooth":c=u*(1&s?1:-1),this._partials[s-1]=c;break;case"triangle":c=1&s?u*u*2*(s-1>>1&1?-1:1):0,this._partials[s-1]=c;break;case"custom":c=this._partials[s-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==c?(i[s]=-c*Math.sin(e*s),r[s]=c*Math.cos(e*s)):(i[s]=0,r[s]=0)}return[i,r]}},{key:"_inverseFFT",value:function(t,e,n){for(var i=0,r=t.length,o=0;o<r;o++)i+=t[o]*Math.cos(o*n)+e[o]*Math.sin(o*n);return i}},{key:"getInitialValue",value:function(){for(var t=this._getRealImaginary(this._type,0),e=(0,s.Z)(t,2),n=e[0],i=e[1],r=0,o=2*Math.PI,a=0;a<32;a++)r=Math.max(this._inverseFFT(n,i,a/32*o),r);return Xr(-this._inverseFFT(n,i,this._phase)/r,-1,1)}},{key:"partials",get:function(){return this._partials.slice(0,this.partialCount)},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}},{key:"phase",get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pa.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}}]),n}(pa);wa._periodicWaveCache=[];var ba=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){return(0,c.Z)(this,n),e.call(this,Object.assign(jr(n.getDefaults(),arguments,["context"])))}return(0,u.Z)(n,[{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Uo(this,t,e,n),this}}]),n}(No),Za=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["mapping","length"])))).name="WaveShaper",t._shaper=t.context.createWaveShaper(),t.input=t._shaper,t.output=t._shaper;var i=jr(n.getDefaults(),arguments,["mapping","length"]);return xr(i.mapping)||i.mapping instanceof Float32Array?t.curve=Float32Array.from(i.mapping):mr(i.mapping)&&t.setMap(i.mapping,i.length),t}return(0,u.Z)(n,[{key:"setMap",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=new Float32Array(e),i=0,r=e;i<r;i++){var o=i/(r-1)*2-1;n[i]=t(o,i)}return this.curve=n,this}},{key:"curve",get:function(){return this._shaper.curve},set:function(t){this._shaper.curve=t}},{key:"oversample",get:function(){return this._shaper.oversample},set:function(t){ur(["none","2x","4x"].some((function(e){return e.includes(t)})),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._shaper.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Go.getDefaults(),{length:1024})}}]),n}(ba),Ta=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="AudioToGain",t._norm=new Za({context:t.context,mapping:function(t){return(t+1)/2}}),t.input=t._norm,t.output=t._norm,t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._norm.dispose(),this}}]),n}(ba),Sa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["value"])))).name="Multiply",t.override=!1;var i=jr(n.getDefaults(),arguments,["value"]);return t._mult=t.input=t.output=new zo({context:t.context,minValue:i.minValue,maxValue:i.maxValue}),t.factor=t._param=t._mult.gain,t.factor.setValueAtTime(i.value,0),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._mult.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Go.getDefaults(),{value:0})}}]),n}(Go),Aa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type","modulationType"]))).name="AMOscillator",t._modulationScale=new Ta({context:t.context}),t._modulationNode=new zo({context:t.context});var i=jr(n.getDefaults(),arguments,["frequency","type","modulationType"]);return t._carrier=new wa({context:t.context,detune:i.detune,frequency:i.frequency,onstop:function(){return t.onstop((0,U.Z)(t))},phase:i.phase,type:i.type}),t.frequency=t._carrier.frequency,t.detune=t._carrier.detune,t._modulator=new wa({context:t.context,phase:i.phase,type:i.modulationType}),t.harmonicity=new Sa({context:t.context,units:"positive",value:i.harmonicity}),t.frequency.chain(t.harmonicity,t._modulator.frequency),t._modulator.chain(t._modulationScale,t._modulationNode.gain),t._carrier.chain(t._modulationNode,t.output),ao((0,U.Z)(t),["frequency","detune","harmonicity"]),t}return(0,u.Z)(n,[{key:"_start",value:function(t){this._modulator.start(t),this._carrier.start(t)}},{key:"_stop",value:function(t){this._modulator.stop(t),this._carrier.stop(t)}},{key:"_restart",value:function(t){this._modulator.restart(t),this._carrier.restart(t)}},{key:"type",get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}},{key:"baseType",get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}},{key:"partialCount",get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}},{key:"modulationType",get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}},{key:"phase",get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}},{key:"partials",get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(wa.getDefaults(),{harmonicity:1,modulationType:"square"})}}]),n}(pa),Ca=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type","modulationType"]))).name="FMOscillator",t._modulationNode=new zo({context:t.context,gain:0});var i=jr(n.getDefaults(),arguments,["frequency","type","modulationType"]);return t._carrier=new wa({context:t.context,detune:i.detune,frequency:0,onstop:function(){return t.onstop((0,U.Z)(t))},phase:i.phase,type:i.type}),t.detune=t._carrier.detune,t.frequency=new Go({context:t.context,units:"frequency",value:i.frequency}),t._modulator=new wa({context:t.context,phase:i.phase,type:i.modulationType}),t.harmonicity=new Sa({context:t.context,units:"positive",value:i.harmonicity}),t.modulationIndex=new Sa({context:t.context,units:"positive",value:i.modulationIndex}),t.frequency.connect(t._carrier.frequency),t.frequency.chain(t.harmonicity,t._modulator.frequency),t.frequency.chain(t.modulationIndex,t._modulationNode),t._modulator.connect(t._modulationNode.gain),t._modulationNode.connect(t._carrier.frequency),t._carrier.connect(t.output),t.detune.connect(t._modulator.detune),ao((0,U.Z)(t),["modulationIndex","frequency","detune","harmonicity"]),t}return(0,u.Z)(n,[{key:"_start",value:function(t){this._modulator.start(t),this._carrier.start(t)}},{key:"_stop",value:function(t){this._modulator.stop(t),this._carrier.stop(t)}},{key:"_restart",value:function(t){return this._modulator.restart(t),this._carrier.restart(t),this}},{key:"type",get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}},{key:"baseType",get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}},{key:"partialCount",get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}},{key:"modulationType",get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}},{key:"phase",get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}},{key:"partials",get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(wa.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}}]),n}(pa),Da=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","width"]))).name="PulseOscillator",t._widthGate=new zo({context:t.context,gain:0}),t._thresh=new Za({context:t.context,mapping:function(t){return t<=0?-1:1}});var i=jr(n.getDefaults(),arguments,["frequency","width"]);return t.width=new Go({context:t.context,units:"audioRange",value:i.width}),t._triangle=new wa({context:t.context,detune:i.detune,frequency:i.frequency,onstop:function(){return t.onstop((0,U.Z)(t))},phase:i.phase,type:"triangle"}),t.frequency=t._triangle.frequency,t.detune=t._triangle.detune,t._triangle.chain(t._thresh,t.output),t.width.chain(t._widthGate,t._thresh),ao((0,U.Z)(t),["width","frequency","detune"]),t}return(0,u.Z)(n,[{key:"_start",value:function(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}},{key:"_restart",value:function(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}},{key:"phase",get:function(){return this._triangle.phase},set:function(t){this._triangle.phase=t}},{key:"type",get:function(){return"pulse"}},{key:"baseType",get:function(){return"pulse"}},{key:"partials",get:function(){return[]}},{key:"partialCount",get:function(){return 0}},{key:"carrierType",set:function(t){this._triangle.type=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pa.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}}]),n}(pa),Oa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type","spread"]))).name="FatOscillator",t._oscillators=[];var i=jr(n.getDefaults(),arguments,["frequency","type","spread"]);return t.frequency=new Go({context:t.context,units:"frequency",value:i.frequency}),t.detune=new Go({context:t.context,units:"cents",value:i.detune}),t._spread=i.spread,t._type=i.type,t._phase=i.phase,t._partials=i.partials,t._partialCount=i.partialCount,t.count=i.count,ao((0,U.Z)(t),["frequency","detune"]),t}return(0,u.Z)(n,[{key:"_start",value:function(t){t=this.toSeconds(t),this._forEach((function(e){return e.start(t)}))}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._forEach((function(e){return e.stop(t)}))}},{key:"_restart",value:function(t){this._forEach((function(e){return e.restart(t)}))}},{key:"_forEach",value:function(t){for(var e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this._forEach((function(e){return e.type=t}))}},{key:"spread",get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach((function(t,i){return t.detune.value=e+n*i}))}}},{key:"count",get:function(){return this._oscillators.length},set:function(t){var e=this;if(cr(t,1),this._oscillators.length!==t){this._forEach((function(t){return t.dispose()})),this._oscillators=[];for(var n=0;n<t;n++){var i=new wa({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+n/t*360,partialCount:this._partialCount,onstop:0===n?function(){return e.onstop(e)}:uo});"custom"===this.type&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[n]=i}this.spread=this._spread,"started"===this.state&&this._forEach((function(t){return t.start()}))}}},{key:"phase",get:function(){return this._phase},set:function(t){var e=this;this._phase=t,this._forEach((function(t,n){return t.phase=e._phase+n/e.count*360}))}},{key:"baseType",get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach((function(e){return e.baseType=t})),this._type=this._oscillators[0].type}},{key:"partials",get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((function(e){return e.partials=t})))}},{key:"partialCount",get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach((function(e){return e.partialCount=t})),this._type=this._oscillators[0].type}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach((function(t){return t.dispose()})),this}}],[{key:"getDefaults",value:function(){return Object.assign(wa.getDefaults(),{count:3,spread:20,type:"sawtooth"})}}]),n}(pa),Ma=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","modulationFrequency"]))).name="PWMOscillator",t.sourceType="pwm",t._scale=new Sa({context:t.context,value:2});var i=jr(n.getDefaults(),arguments,["frequency","modulationFrequency"]);return t._pulse=new Da({context:t.context,frequency:i.modulationFrequency}),t._pulse.carrierType="sine",t.modulationFrequency=t._pulse.frequency,t._modulator=new wa({context:t.context,detune:i.detune,frequency:i.frequency,onstop:function(){return t.onstop((0,U.Z)(t))},phase:i.phase}),t.frequency=t._modulator.frequency,t.detune=t._modulator.detune,t._modulator.chain(t._scale,t._pulse.width),t._pulse.connect(t.output),ao((0,U.Z)(t),["modulationFrequency","frequency","detune"]),t}return(0,u.Z)(n,[{key:"_start",value:function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}},{key:"_stop",value:function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}},{key:"_restart",value:function(t){this._modulator.restart(t),this._pulse.restart(t)}},{key:"type",get:function(){return"pwm"}},{key:"baseType",get:function(){return"pwm"}},{key:"partials",get:function(){return[]}},{key:"partialCount",get:function(){return 0}},{key:"phase",get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pa.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}}]),n}(pa),Ea={am:Aa,fat:Oa,fm:Ca,oscillator:wa,pulse:Da,pwm:Ma},Ra=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type"]))).name="OmniOscillator";var i=jr(n.getDefaults(),arguments,["frequency","type"]);return t.frequency=new Go({context:t.context,units:"frequency",value:i.frequency}),t.detune=new Go({context:t.context,units:"cents",value:i.detune}),ao((0,U.Z)(t),["frequency","detune"]),t.set(i),t}return(0,u.Z)(n,[{key:"_start",value:function(t){this._oscillator.start(t)}},{key:"_stop",value:function(t){this._oscillator.stop(t)}},{key:"_restart",value:function(t){return this._oscillator.restart(t),this}},{key:"type",get:function(){var t=this,e="";return["am","fm","fat"].some((function(e){return t._sourceType===e}))&&(e=this._sourceType),e+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}},{key:"partials",get:function(){return this._oscillator.partials},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}},{key:"partialCount",get:function(){return this._oscillator.partialCount},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}},{key:"set",value:function(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),(0,Cr.Z)((0,Dr.Z)(n.prototype),"set",this).call(this,t),this}},{key:"_createNewOscillator",value:function(t){var e=this;if(t!==this._sourceType){this._sourceType=t;var n=Ea[t],i=this.now();if(this._oscillator){var r=this._oscillator;r.stop(i),this.context.setTimeout((function(){return r.dispose()}),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return e.onstop(e)},"started"===this.state&&this._oscillator.start(i)}}},{key:"phase",get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}},{key:"sourceType",get:function(){return this._sourceType},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}},{key:"_getOscType",value:function(t,e){return t instanceof Ea[e]}},{key:"baseType",get:function(){return this._oscillator.baseType},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}},{key:"width",get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}},{key:"count",get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&_r(t)&&(this._oscillator.count=t)}},{key:"spread",get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&_r(t)&&(this._oscillator.spread=t)}},{key:"modulationType",get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&wr(t)&&(this._oscillator.modulationType=t)}},{key:"modulationIndex",get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}},{key:"harmonicity",get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}},{key:"modulationFrequency",get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka(this,t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(wa.getDefaults(),Ca.getDefaults(),Aa.getDefaults(),Oa.getDefaults(),Da.getDefaults(),Ma.getDefaults())}}]),n}(pa),qa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["value"])))).override=!1,t.name="Add",t._sum=new zo({context:t.context}),t.input=t._sum,t.output=t._sum,t.addend=t._param,Po(t._constantSource,t._sum),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._sum.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Go.getDefaults(),{value:0})}}]),n}(Go),Fa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["min","max"])))).name="Scale";var i=jr(n.getDefaults(),arguments,["min","max"]);return t._mult=t.input=new Sa({context:t.context,value:i.max-i.min}),t._add=t.output=new qa({context:t.context,value:i.min}),t._min=i.min,t._max=i.max,t.input.connect(t.output),t}return(0,u.Z)(n,[{key:"min",get:function(){return this._min},set:function(t){this._min=t,this._setRange()}},{key:"max",get:function(){return this._max},set:function(t){this._max=t,this._setRange()}},{key:"_setRange",value:function(){this._add.value=this._min,this._mult.value=this._max-this._min}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._add.dispose(),this._mult.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(ba.getDefaults(),{max:1,min:0})}}]),n}(ba),Va=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments)))).name="Zero",t._gain=new zo({context:t.context}),t.output=t._gain,t.input=void 0,jo(t.context.getConstant(0),t._gain),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),Lo(this.context.getConstant(0),this._gain),this}}]),n}(ba),Ia=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","min","max"]))).name="LFO",t._stoppedValue=0,t._units="number",t.convert=!0,t._fromType=Io.prototype._fromType,t._toType=Io.prototype._toType,t._is=Io.prototype._is,t._clampValue=Io.prototype._clampValue;var i=jr(n.getDefaults(),arguments,["frequency","min","max"]);return t._oscillator=new wa(i),t.frequency=t._oscillator.frequency,t._amplitudeGain=new zo({context:t.context,gain:i.amplitude,units:"normalRange"}),t.amplitude=t._amplitudeGain.gain,t._stoppedSignal=new Go({context:t.context,units:"audioRange",value:0}),t._zeros=new Va({context:t.context}),t._a2g=new Ta({context:t.context}),t._scaler=t.output=new Fa({context:t.context,max:i.max,min:i.min}),t.units=i.units,t.min=i.min,t.max=i.max,t._oscillator.chain(t._amplitudeGain,t._a2g,t._scaler),t._zeros.connect(t._a2g),t._stoppedSignal.connect(t._a2g),ao((0,U.Z)(t),["amplitude","frequency"]),t.phase=i.phase,t}return(0,u.Z)(n,[{key:"start",value:function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}},{key:"stop",value:function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}},{key:"sync",value:function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}},{key:"unsync",value:function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}},{key:"_setStoppedValue",value:function(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}},{key:"min",get:function(){return this._toType(this._scaler.min)},set:function(t){t=this._fromType(t),this._scaler.min=t}},{key:"max",get:function(){return this._toType(this._scaler.max)},set:function(t){t=this._fromType(t),this._scaler.max=t}},{key:"type",get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._setStoppedValue()}},{key:"partials",get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t,this._setStoppedValue()}},{key:"phase",get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._setStoppedValue()}},{key:"units",get:function(){return this._units},set:function(t){var e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}},{key:"state",get:function(){return this._oscillator.state}},{key:"connect",value:function(t,e,n){return(t instanceof Io||t instanceof Go)&&(this.convert=t.convert,this.units=t.units),Uo(this,t,e,n),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(wa.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}}]),n}(No);function Na(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){cr(i,t,e),n.set(this,i)}})}}function Pa(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){cr(this.toSeconds(i),t,e),n.set(this,i)}})}}var ja=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["url","onload"]))).name="Player",t._activeSources=new Set;var i=jr(n.getDefaults(),arguments,["url","onload"]);return t._buffer=new co({onload:t._onload.bind((0,U.Z)(t),i.onload),onerror:i.onerror,reverse:i.reverse,url:i.url}),t.autostart=i.autostart,t._loop=i.loop,t._loopStart=i.loopStart,t._loopEnd=i.loopEnd,t._playbackRate=i.playbackRate,t.fadeIn=i.fadeIn,t.fadeOut=i.fadeOut,t}return(0,u.Z)(n,[{key:"load",value:function(t){return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._buffer.load(t);case 2:return this._onload(),e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_onload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uo;t(),this.autostart&&this.start()}},{key:"_onSourceEnd",value:function(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}},{key:"start",value:function(t,e,i){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"start",this).call(this,t,e,i),this}},{key:"_start",value:function(t,e,n){e=this._loop?Lr(e,this._loopStart):Lr(e,0);var i=this.toSeconds(e),r=n;n=Lr(n,Math.max(this._buffer.duration-i,0));var o=this.toSeconds(n);o/=this._playbackRate,t=this.toSeconds(t);var a=new da({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&vr(r)?a.start(t,i):a.start(t,i,o-this.toSeconds(this.fadeOut))}},{key:"_stop",value:function(t){var e=this.toSeconds(t);this._activeSources.forEach((function(t){return t.stop(e)}))}},{key:"restart",value:function(t,e,i){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"restart",this).call(this,t,e,i),this}},{key:"_restart",value:function(t,e,n){this._stop(t),this._start(t,e,n)}},{key:"seek",value:function(t,e){var n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){var i=this.toSeconds(t);this._stop(n),this._start(n,i)}return this}},{key:"setLoopPoints",value:function(t,e){return this.loopStart=t,this.loopEnd=e,this}},{key:"loopStart",get:function(){return this._loopStart},set:function(t){this._loopStart=t,this.buffer.loaded&&cr(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((function(e){e.loopStart=t}))}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this.buffer.loaded&&cr(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((function(e){e.loopEnd=t}))}},{key:"buffer",get:function(){return this._buffer},set:function(t){this._buffer.set(t)}},{key:"loop",get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((function(e){e.loop=t})),t)){var e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((function(t){return t.cancelStop()}))),this._activeSources.forEach((function(n){n.playbackRate.setValueAtTime(t,e)}))}},{key:"reverse",get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}},{key:"loaded",get:function(){return this._buffer.loaded}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._activeSources.forEach((function(t){return t.dispose()})),this._activeSources.clear(),this._buffer.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pa.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:uo,onerror:uo,playbackRate:1,reverse:!1})}}]),n}(pa);Or([Pa(0)],ja.prototype,"fadeIn",void 0),Or([Pa(0)],ja.prototype,"fadeOut",void 0);var La=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["urls","onload"],"urls"))).name="Players",t.input=void 0,t._players=new Map;var i=jr(n.getDefaults(),arguments,["urls","onload"],"urls");return t._volume=t.output=new sa({context:t.context,volume:i.volume}),t.volume=t._volume.volume,ao((0,U.Z)(t),"volume"),t._buffers=new Ko({urls:i.urls,onload:i.onload,baseUrl:i.baseUrl,onerror:i.onerror}),t.mute=i.mute,t._fadeIn=i.fadeIn,t._fadeOut=i.fadeOut,t}return(0,u.Z)(n,[{key:"mute",get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}},{key:"fadeIn",get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._players.forEach((function(e){e.fadeIn=t}))}},{key:"fadeOut",get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._players.forEach((function(e){e.fadeOut=t}))}},{key:"state",get:function(){return Array.from(this._players).some((function(t){var e=(0,s.Z)(t,2);e[0];return"started"===e[1].state}))?"started":"stopped"}},{key:"has",value:function(t){return this._buffers.has(t)}},{key:"player",value:function(t){if(ur(this.has(t),"No Player with the name ".concat(t," exists on this object")),!this._players.has(t)){var e=new ja({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)}},{key:"loaded",get:function(){return this._buffers.loaded}},{key:"add",value:function(t,e,n){return ur(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this}},{key:"stopAll",value:function(t){return this._players.forEach((function(e){return e.stop(t)})),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._volume.dispose(),this.volume.dispose(),this._players.forEach((function(t){return t.dispose()})),this._buffers.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pa.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:uo,onerror:uo,urls:{},volume:0})}}]),n}(No),za=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["url","onload"]))).name="GrainPlayer",t._loopStart=0,t._loopEnd=0,t._activeSources=[];var i=jr(n.getDefaults(),arguments,["url","onload"]);return t.buffer=new co({onload:i.onload,onerror:i.onerror,reverse:i.reverse,url:i.url}),t._clock=new Ho({context:t.context,callback:t._tick.bind((0,U.Z)(t)),frequency:1/i.grainSize}),t._playbackRate=i.playbackRate,t._grainSize=i.grainSize,t._overlap=i.overlap,t.detune=i.detune,t.overlap=i.overlap,t.loop=i.loop,t.playbackRate=i.playbackRate,t.grainSize=i.grainSize,t.loopStart=i.loopStart,t.loopEnd=i.loopEnd,t.reverse=i.reverse,t._clock.on("stop",t._onstop.bind((0,U.Z)(t))),t}return(0,u.Z)(n,[{key:"_start",value:function(t,e,n){e=Lr(e,0),e=this.toSeconds(e),t=this.toSeconds(t);var i=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/i),n&&this.stop(t+this.toSeconds(n))}},{key:"restart",value:function(t,e,i){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"restart",this).call(this,t,e,i),this}},{key:"_restart",value:function(t,e,n){this._stop(t),this._start(t,e,n)}},{key:"_stop",value:function(t){this._clock.stop(t)}},{key:"_onstop",value:function(t){this._activeSources.forEach((function(e){e.fadeOut=0,e.stop(t)})),this.onstop(this)}},{key:"_tick",value:function(t){var e=this,n=this._clock.getTicksAtTime(t),i=n*this._grainSize;if(this.log("offset",i),!this.loop&&i>this.buffer.duration)this.stop(t);else{var r=i<this._overlap?0:this._overlap,o=new da({context:this.context,url:this.buffer,fadeIn:r,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:xo(this.detune/100)}).connect(this.output);o.start(t,this._grainSize*n),o.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(o),o.onended=function(){var t=e._activeSources.indexOf(o);-1!==t&&e._activeSources.splice(t,1)}}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){cr(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}},{key:"loopStart",get:function(){return this._loopStart},set:function(t){this.buffer.loaded&&cr(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(t){this.buffer.loaded&&cr(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}},{key:"reverse",get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}},{key:"grainSize",get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}},{key:"overlap",get:function(){return this._overlap},set:function(t){var e=this.toSeconds(t);cr(e,0),this._overlap=e}},{key:"loaded",get:function(){return this.buffer.loaded}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((function(t){return t.dispose()})),this}}],[{key:"getDefaults",value:function(){return Object.assign(pa.getDefaults(),{onload:uo,onerror:uo,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}}]),n}(pa),Wa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="Abs",t._abs=new Za({context:t.context,mapping:function(t){return Math.abs(t)<.001?0:Math.abs(t)}}),t.input=t._abs,t.output=t._abs,t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._abs.dispose(),this}}]),n}(ba),Ba=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="GainToAudio",t._norm=new Za({context:t.context,mapping:function(t){return 2*Math.abs(t)-1}}),t.input=t._norm,t.output=t._norm,t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._norm.dispose(),this}}]),n}(ba),Ga=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="Negate",t._multiply=new Sa({context:t.context,value:-1}),t.input=t._multiply,t.output=t._multiply,t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._multiply.dispose(),this}}]),n}(ba),Ua=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["value"])))).override=!1,t.name="Subtract",t._sum=new zo({context:t.context}),t.input=t._sum,t.output=t._sum,t._neg=new Ga({context:t.context}),t.subtrahend=t._param,Po(t._constantSource,t._neg,t._sum),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._neg.dispose(),this._sum.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Go.getDefaults(),{value:0})}}]),n}(Go),Ya=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments)))).name="GreaterThanZero",t._thresh=t.output=new Za({context:t.context,length:127,mapping:function(t){return t<=0?0:1}}),t._scale=t.input=new Sa({context:t.context,value:1e4}),t._scale.connect(t._thresh),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._scale.dispose(),this._thresh.dispose(),this}}]),n}(ba),Qa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["value"])))).name="GreaterThan",t.override=!1;var i=jr(n.getDefaults(),arguments,["value"]);return t._subtract=t.input=new Ua({context:t.context,value:i.value}),t._gtz=t.output=new Ya({context:t.context}),t.comparator=t._param=t._subtract.subtrahend,ao((0,U.Z)(t),"comparator"),t._subtract.connect(t._gtz),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Go.getDefaults(),{value:0})}}]),n}(Go),Xa=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["value"])))).name="Pow";var i=jr(n.getDefaults(),arguments,["value"]);return t._exponentScaler=t.input=t.output=new Za({context:t.context,mapping:t._expFunc(i.value),length:8192}),t._exponent=i.value,t}return(0,u.Z)(n,[{key:"_expFunc",value:function(t){return function(e){return Math.pow(Math.abs(e),t)}}},{key:"value",get:function(){return this._exponent},set:function(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._exponentScaler.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(ba.getDefaults(),{value:1})}}]),n}(ba),Ha=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["min","max","exponent"])))).name="ScaleExp";var i=jr(n.getDefaults(),arguments,["min","max","exponent"]);return t.input=t._exp=new Xa({context:t.context,value:i.exponent}),t._exp.connect(t._mult),t}return(0,u.Z)(n,[{key:"exponent",get:function(){return this._exp.value},set:function(t){this._exp.value=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._exp.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Fa.getDefaults(),{exponent:1})}}]),n}(Fa),$a=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(Go.getDefaults(),arguments,["value","units"]))).name="SyncedSignal",t.override=!1;var i=jr(Go.getDefaults(),arguments,["value","units"]);return t._lastVal=i.value,t._synced=t.context.transport.scheduleRepeat(t._onTick.bind((0,U.Z)(t)),"1i"),t._syncedCallback=t._anchorValue.bind((0,U.Z)(t)),t.context.transport.on("start",t._syncedCallback),t.context.transport.on("pause",t._syncedCallback),t.context.transport.on("stop",t._syncedCallback),t._constantSource.disconnect(),t._constantSource.stop(0),t._constantSource=t.output=new Bo({context:t.context,offset:i.value,units:i.units}).start(0),t.setValueAtTime(i.value,0),t}return(0,u.Z)(n,[{key:"_onTick",value:function(t){var e=(0,Cr.Z)((0,Dr.Z)(n.prototype),"getValueAtTime",this).call(this,this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))}},{key:"_anchorValue",value:function(t){var e=(0,Cr.Z)((0,Dr.Z)(n.prototype),"getValueAtTime",this).call(this,this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)}},{key:"getValueAtTime",value:function(t){var e=new Ro(this.context,t).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"getValueAtTime",this).call(this,e)}},{key:"setValueAtTime",value:function(t,e){var i=new Ro(this.context,e).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"setValueAtTime",this).call(this,t,i),this}},{key:"linearRampToValueAtTime",value:function(t,e){var i=new Ro(this.context,e).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"linearRampToValueAtTime",this).call(this,t,i),this}},{key:"exponentialRampToValueAtTime",value:function(t,e){var i=new Ro(this.context,e).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"exponentialRampToValueAtTime",this).call(this,t,i),this}},{key:"setTargetAtTime",value:function(t,e,i){var r=new Ro(this.context,e).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"setTargetAtTime",this).call(this,t,r,i),this}},{key:"cancelScheduledValues",value:function(t){var e=new Ro(this.context,t).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"cancelScheduledValues",this).call(this,e),this}},{key:"setValueCurveAtTime",value:function(t,e,i,r){var o=new Ro(this.context,e).toSeconds();return i=this.toSeconds(i),(0,Cr.Z)((0,Dr.Z)(n.prototype),"setValueCurveAtTime",this).call(this,t,o,i,r),this}},{key:"cancelAndHoldAtTime",value:function(t){var e=new Ro(this.context,t).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"cancelAndHoldAtTime",this).call(this,e),this}},{key:"setRampPoint",value:function(t){var e=new Ro(this.context,t).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"setRampPoint",this).call(this,e),this}},{key:"exponentialRampTo",value:function(t,e,i){var r=new Ro(this.context,i).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"exponentialRampTo",this).call(this,t,e,r),this}},{key:"linearRampTo",value:function(t,e,i){var r=new Ro(this.context,i).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"linearRampTo",this).call(this,t,e,r),this}},{key:"targetRampTo",value:function(t,e,i){var r=new Ro(this.context,i).toSeconds();return(0,Cr.Z)((0,Dr.Z)(n.prototype),"targetRampTo",this).call(this,t,e,r),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}]),n}(Go),Ja=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="Envelope",t._sig=new Go({context:t.context,value:0}),t.output=t._sig,t.input=void 0;var i=jr(n.getDefaults(),arguments,["attack","decay","sustain","release"]);return t.attack=i.attack,t.decay=i.decay,t.sustain=i.sustain,t.release=i.release,t.attackCurve=i.attackCurve,t.releaseCurve=i.releaseCurve,t.decayCurve=i.decayCurve,t}return(0,u.Z)(n,[{key:"value",get:function(){return this.getValueAtTime(this.now())}},{key:"_getCurve",value:function(t,e){if(wr(t))return t;var n;for(n in Ka)if(Ka[n][e]===t)return n;return t}},{key:"_setCurve",value:function(t,e,n){if(wr(n)&&Reflect.has(Ka,n)){var i=Ka[n];gr(i)?"_decayCurve"!==t&&(this[t]=i[e]):this[t]=i}else{if(!xr(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}},{key:"attackCurve",get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)}},{key:"releaseCurve",get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)}},{key:"decayCurve",get:function(){return this._decayCurve},set:function(t){ur(["linear","exponential"].some((function(e){return e===t})),"Invalid envelope curve: ".concat(t)),this._decayCurve=t}},{key:"triggerAttack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",t,e),t=this.toSeconds(t);var n=this.toSeconds(this.attack),i=n,r=this.toSeconds(this.decay),o=this.getValueAtTime(t);if(o>0){var a=1/i,s=1-o;i=s/a}if(i<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,i,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,i,t);else{this._sig.cancelAndHoldAtTime(t);for(var u=this._attackCurve,c=1;c<u.length;c++)if(u[c-1]<=o&&o<=u[c]){(u=this._attackCurve.slice(c))[0]=o;break}this._sig.setValueCurveAtTime(u,t,i,e)}if(r&&this.sustain<1){var l=e*this.sustain,h=t+i;this.log("decay",h),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(l,r+h):this._sig.exponentialApproachValueAtTime(l,h,r)}return this}},{key:"triggerRelease",value:function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(ur(xr(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}},{key:"getValueAtTime",value:function(t){return this._sig.getValueAtTime(t)}},{key:"triggerAttackRelease",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}},{key:"cancel",value:function(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Uo(this,t,e,n),this}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return Mr(this,void 0,void 0,N().mark((function e(){var n,i,r,o,a,s,u,c;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t/this.context.sampleRate,i=new lo(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=r+this.toSeconds(this.release),s=o+(a=.1*o),(u=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/s,decay:n*this.toSeconds(this.decay)/s,release:n*this.toSeconds(this.release)/s,context:i})))._sig.toDestination(),u.triggerAttackRelease(n*(r+a)/s,0),e.next=11,i.render();case 11:return c=e.sent,e.abrupt("return",c.getChannelData(0));case 13:case"end":return e.stop()}}),e,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._sig.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}}]),n}(No);Or([Pa(0)],Ja.prototype,"attack",void 0),Or([Pa(0)],Ja.prototype,"decay",void 0),Or([Na(0,1)],Ja.prototype,"sustain",void 0),Or([Pa(0)],Ja.prototype,"release",void 0);var Ka=function(){var t,e,n=128,i=[];for(t=0;t<n;t++)i[t]=Math.sin(t/127*(Math.PI/2));var r=[];for(t=0;t<127;t++){e=t/127;var o=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;r[t]=o/10+.83*e}r[127]=1;var a=[];for(t=0;t<n;t++)a[t]=Math.ceil(t/127*5)/5;var s=[];for(t=0;t<n;t++)e=t/127,s[t]=.5*(1-Math.cos(Math.PI*e));var u,c=[];for(t=0;t<n;t++){e=t/127;var l=4*Math.pow(e,3)+.2,h=Math.cos(l*Math.PI*2*e);c[t]=Math.abs(h*(1-e))}function f(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:f(c),Out:c},cosine:{In:i,Out:(u=i,u.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:r,Out:f(r)},sine:{In:s,Out:f(s)},step:{In:a,Out:f(a)}}}(),ts=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments)))._scheduledEvents=[],t._synced=!1,t._original_triggerAttack=t.triggerAttack,t._original_triggerRelease=t.triggerRelease;var i=jr(n.getDefaults(),arguments);return t._volume=t.output=new sa({context:t.context,volume:i.volume}),t.volume=t._volume.volume,ao((0,U.Z)(t),"volume"),t}return(0,u.Z)(n,[{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}},{key:"_syncState",value:function(){var t=!1;return this._synced||(this._synced=!0,t=!0),t}},{key:"_syncMethod",value:function(t,e){var n=this,i=this["_original_"+t]=this[t];this[t]=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=r[e],s=n.context.transport.schedule((function(t){r[e]=t,i.apply(n,r)}),a);n._scheduledEvents.push(s)}}},{key:"unsync",value:function(){var t=this;return this._scheduledEvents.forEach((function(e){return t.context.transport.clear(e)})),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}},{key:"triggerAttackRelease",value:function(t,e,n,i){var r=this.toSeconds(n),o=this.toSeconds(e);return this.triggerAttack(t,r,i),this.triggerRelease(r+o),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{volume:0})}}]),n}(No),es=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),t=e.call(this,jr(n.getDefaults(),arguments));var i=jr(n.getDefaults(),arguments);return t.portamento=i.portamento,t.onsilence=i.onsilence,t}return(0,u.Z)(n,[{key:"triggerAttack",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",t,e,n);var i=this.toSeconds(e);return this._triggerEnvelopeAttack(i,n),this.setNote(t,i),this}},{key:"triggerRelease",value:function(t){this.log("triggerRelease",t);var e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}},{key:"setNote",value:function(t,e){var n=this.toSeconds(e),i=t instanceof Do?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){var r=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,r,n)}else this.frequency.setValueAtTime(i,n);return this}}],[{key:"getDefaults",value:function(){return Object.assign(ts.getDefaults(),{detune:0,onsilence:uo,portamento:0})}}]),n}(ts);Or([Pa(0)],es.prototype,"portamento",void 0);var ns=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="AmplitudeEnvelope",t._gainNode=new zo({context:t.context,gain:0}),t.output=t._gainNode,t.input=t._gainNode,t._sig.connect(t._gainNode.gain),t.output=t._gainNode,t.input=t._gainNode,t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._gainNode.dispose(),this}}]),n}(Ja),is=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="Synth";var i=jr(n.getDefaults(),arguments);return t.oscillator=new Ra(Object.assign({context:t.context,detune:i.detune,onstop:function(){return t.onsilence((0,U.Z)(t))}},i.oscillator)),t.frequency=t.oscillator.frequency,t.detune=t.oscillator.detune,t.envelope=new ns(Object.assign({context:t.context},i.envelope)),t.oscillator.chain(t.envelope,t.output),ao((0,U.Z)(t),["oscillator","frequency","detune","envelope"]),t}return(0,u.Z)(n,[{key:"_triggerEnvelopeAttack",value:function(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+i)}}},{key:"_triggerEnvelopeRelease",value:function(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}},{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(es.getDefaults(),{envelope:Object.assign(zr(Ja.getDefaults(),Object.keys(No.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(zr(Ra.getDefaults(),[].concat((0,$.Z)(Object.keys(pa.getDefaults())),["frequency","detune"])),{type:"triangle"})})}}]),n}(es),rs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="ModulationSynth";var i=jr(n.getDefaults(),arguments);return t._carrier=new is({context:t.context,oscillator:i.oscillator,envelope:i.envelope,onsilence:function(){return t.onsilence((0,U.Z)(t))},volume:-10}),t._modulator=new is({context:t.context,oscillator:i.modulation,envelope:i.modulationEnvelope,volume:-10}),t.oscillator=t._carrier.oscillator,t.envelope=t._carrier.envelope,t.modulation=t._modulator.oscillator,t.modulationEnvelope=t._modulator.envelope,t.frequency=new Go({context:t.context,units:"frequency"}),t.detune=new Go({context:t.context,value:i.detune,units:"cents"}),t.harmonicity=new Sa({context:t.context,value:i.harmonicity,minValue:0}),t._modulationNode=new zo({context:t.context,gain:0}),ao((0,U.Z)(t),["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),t}return(0,u.Z)(n,[{key:"_triggerEnvelopeAttack",value:function(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}},{key:"_triggerEnvelopeRelease",value:function(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}},{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(es.getDefaults(),{harmonicity:3,oscillator:Object.assign(zr(Ra.getDefaults(),[].concat((0,$.Z)(Object.keys(pa.getDefaults())),["frequency","detune"])),{type:"sine"}),envelope:Object.assign(zr(Ja.getDefaults(),Object.keys(No.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(zr(Ra.getDefaults(),[].concat((0,$.Z)(Object.keys(pa.getDefaults())),["frequency","detune"])),{type:"square"}),modulationEnvelope:Object.assign(zr(Ja.getDefaults(),Object.keys(No.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}}]),n}(es),os=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="AMSynth",t._modulationScale=new Ta({context:t.context}),t.frequency.connect(t._carrier.frequency),t.frequency.chain(t.harmonicity,t._modulator.frequency),t.detune.fan(t._carrier.detune,t._modulator.detune),t._modulator.chain(t._modulationScale,t._modulationNode.gain),t._carrier.chain(t._modulationNode,t.output),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._modulationScale.dispose(),this}}]),n}(rs),as=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type"]))).name="BiquadFilter";var i=jr(n.getDefaults(),arguments,["frequency","type"]);return t._filter=t.context.createBiquadFilter(),t.input=t.output=t._filter,t.Q=new Io({context:t.context,units:"number",value:i.Q,param:t._filter.Q}),t.frequency=new Io({context:t.context,units:"frequency",value:i.frequency,param:t._filter.frequency}),t.detune=new Io({context:t.context,units:"cents",value:i.detune,param:t._filter.detune}),t.gain=new Io({context:t.context,units:"decibels",convert:!1,value:i.gain,param:t._filter.gain}),t.type=i.type,t}return(0,u.Z)(n,[{key:"type",get:function(){return this._filter.type},set:function(t){ur(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: ".concat(t)),this._filter.type=t}},{key:"getFrequencyResponse",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,e=new Float32Array(t),n=0;n<t;n++){var i=Math.pow(n/t,2),r=19980*i+20;e[n]=r}var o=new Float32Array(t),a=new Float32Array(t),s=this.context.createBiquadFilter();return s.type=this.type,s.Q.value=this.Q.value,s.frequency.value=this.frequency.value,s.gain.value=this.gain.value,s.getFrequencyResponse(e,o,a),o}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}}]),n}(No),ss=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type","rolloff"]))).name="Filter",t.input=new zo({context:t.context}),t.output=new zo({context:t.context}),t._filters=[];var i=jr(n.getDefaults(),arguments,["frequency","type","rolloff"]);return t._filters=[],t.Q=new Go({context:t.context,units:"positive",value:i.Q}),t.frequency=new Go({context:t.context,units:"frequency",value:i.frequency}),t.detune=new Go({context:t.context,units:"cents",value:i.detune}),t.gain=new Go({context:t.context,units:"decibels",convert:!1,value:i.gain}),t._type=i.type,t.rolloff=i.rolloff,ao((0,U.Z)(t),["detune","frequency","gain","Q"]),t}return(0,u.Z)(n,[{key:"type",get:function(){return this._type},set:function(t){ur(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: ".concat(t)),this._type=t,this._filters.forEach((function(e){return e.type=t}))}},{key:"rolloff",get:function(){return this._rolloff},set:function(t){var e=_r(t)?t:parseInt(t,10),n=[-12,-24,-48,-96],i=n.indexOf(e);ur(-1!==i,"rolloff can only be ".concat(n.join(", "))),i+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((function(t){return t.disconnect()})),this._filters=new Array(i);for(var r=0;r<i;r++){var o=new as({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[r]=o}this._internalChannels=this._filters,Po.apply(void 0,[this.input].concat((0,$.Z)(this._internalChannels),[this.output]))}},{key:"getFrequencyResponse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,e=new as({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map((function(){return 1}));return this._filters.forEach((function(){e.getFrequencyResponse(t).forEach((function(t,e){return n[e]*=t}))})),e.dispose(),n}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._filters.forEach((function(t){t.dispose()})),so(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}}]),n}(No),us=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["attack","decay","sustain","release"]))).name="FrequencyEnvelope";var i=jr(n.getDefaults(),arguments,["attack","decay","sustain","release"]);return t._octaves=i.octaves,t._baseFrequency=t.toFrequency(i.baseFrequency),t._exponent=t.input=new Xa({context:t.context,value:i.exponent}),t._scale=t.output=new Fa({context:t.context,min:t._baseFrequency,max:t._baseFrequency*Math.pow(2,t._octaves)}),t._sig.chain(t._exponent,t._scale),t}return(0,u.Z)(n,[{key:"baseFrequency",get:function(){return this._baseFrequency},set:function(t){var e=this.toFrequency(t);cr(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}},{key:"octaves",get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}},{key:"exponent",get:function(){return this._exponent.value},set:function(t){this._exponent.value=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._exponent.dispose(),this._scale.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ja.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}}]),n}(Ja),cs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="MonoSynth";var i=jr(n.getDefaults(),arguments);return t.oscillator=new Ra(Object.assign(i.oscillator,{context:t.context,detune:i.detune,onstop:function(){return t.onsilence((0,U.Z)(t))}})),t.frequency=t.oscillator.frequency,t.detune=t.oscillator.detune,t.filter=new ss(Object.assign(i.filter,{context:t.context})),t.filterEnvelope=new us(Object.assign(i.filterEnvelope,{context:t.context})),t.envelope=new ns(Object.assign(i.envelope,{context:t.context})),t.oscillator.chain(t.filter,t.envelope,t.output),t.filterEnvelope.connect(t.filter.frequency),ao((0,U.Z)(t),["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),t}return(0,u.Z)(n,[{key:"_triggerEnvelopeAttack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+i)}}},{key:"_triggerEnvelopeRelease",value:function(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}},{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(es.getDefaults(),{envelope:Object.assign(zr(Ja.getDefaults(),Object.keys(No.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(zr(ss.getDefaults(),Object.keys(No.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(zr(us.getDefaults(),Object.keys(No.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(zr(Ra.getDefaults(),Object.keys(pa.getDefaults())),{type:"sawtooth"})})}}]),n}(es),ls=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="DuoSynth";var i=jr(n.getDefaults(),arguments);return t.voice0=new cs(Object.assign(i.voice0,{context:t.context,onsilence:function(){return t.onsilence((0,U.Z)(t))}})),t.voice1=new cs(Object.assign(i.voice1,{context:t.context})),t.harmonicity=new Sa({context:t.context,units:"positive",value:i.harmonicity}),t._vibrato=new Ia({frequency:i.vibratoRate,context:t.context,min:-50,max:50}),t._vibrato.start(),t.vibratoRate=t._vibrato.frequency,t._vibratoGain=new zo({context:t.context,units:"normalRange",gain:i.vibratoAmount}),t.vibratoAmount=t._vibratoGain.gain,t.frequency=new Go({context:t.context,units:"frequency",value:440}),t.detune=new Go({context:t.context,units:"cents",value:i.detune}),t.frequency.connect(t.voice0.frequency),t.frequency.chain(t.harmonicity,t.voice1.frequency),t._vibrato.connect(t._vibratoGain),t._vibratoGain.fan(t.voice0.detune,t.voice1.detune),t.detune.fan(t.voice0.detune,t.voice1.detune),t.voice0.connect(t.output),t.voice1.connect(t.output),ao((0,U.Z)(t),["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),t}return(0,u.Z)(n,[{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}},{key:"_triggerEnvelopeAttack",value:function(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}},{key:"_triggerEnvelopeRelease",value:function(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}],[{key:"getDefaults",value:function(){return Pr(es.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:Pr(zr(cs.getDefaults(),Object.keys(es.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:Pr(zr(cs.getDefaults(),Object.keys(es.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}}]),n}(es),hs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="FMSynth";var i=jr(n.getDefaults(),arguments);return t.modulationIndex=new Sa({context:t.context,value:i.modulationIndex}),t.frequency.connect(t._carrier.frequency),t.frequency.chain(t.harmonicity,t._modulator.frequency),t.frequency.chain(t.modulationIndex,t._modulationNode),t.detune.fan(t._carrier.detune,t._modulator.detune),t._modulator.connect(t._modulationNode.gain),t._modulationNode.connect(t._carrier.frequency),t._carrier.connect(t.output),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.modulationIndex.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(rs.getDefaults(),{modulationIndex:10})}}]),n}(rs),fs=[1,1.483,1.932,2.546,2.63,3.897],ps=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="MetalSynth",t._oscillators=[],t._freqMultipliers=[];var i=jr(n.getDefaults(),arguments);t.detune=new Go({context:t.context,units:"cents",value:i.detune}),t.frequency=new Go({context:t.context,units:"frequency"}),t._amplitude=new zo({context:t.context,gain:0}).connect(t.output),t._highpass=new ss({Q:0,context:t.context,type:"highpass"}).connect(t._amplitude);for(var r=0;r<fs.length;r++){var o=new Ca({context:t.context,harmonicity:i.harmonicity,modulationIndex:i.modulationIndex,modulationType:"square",onstop:0===r?function(){return t.onsilence((0,U.Z)(t))}:uo,type:"square"});o.connect(t._highpass),t._oscillators[r]=o;var a=new Sa({context:t.context,value:fs[r]});t._freqMultipliers[r]=a,t.frequency.chain(a,o.frequency),t.detune.connect(o.detune)}return t._filterFreqScaler=new Fa({context:t.context,max:7e3,min:t.toFrequency(i.resonance)}),t.envelope=new Ja({attack:i.envelope.attack,attackCurve:"linear",context:t.context,decay:i.envelope.decay,release:i.envelope.release,sustain:0}),t.envelope.chain(t._filterFreqScaler,t._highpass.frequency),t.envelope.connect(t._amplitude.gain),t._octaves=i.octaves,t.octaves=i.octaves,t}return(0,u.Z)(n,[{key:"_triggerEnvelopeAttack",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.envelope.triggerAttack(t,n),this._oscillators.forEach((function(e){return e.start(t)})),0===this.envelope.sustain&&this._oscillators.forEach((function(n){n.stop(t+e.toSeconds(e.envelope.attack)+e.toSeconds(e.envelope.decay))})),this}},{key:"_triggerEnvelopeRelease",value:function(t){var e=this;return this.envelope.triggerRelease(t),this._oscillators.forEach((function(n){return n.stop(t+e.toSeconds(e.envelope.release))})),this}},{key:"getLevelAtTime",value:function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}},{key:"modulationIndex",get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){this._oscillators.forEach((function(e){return e.modulationIndex.value=t}))}},{key:"harmonicity",get:function(){return this._oscillators[0].harmonicity.value},set:function(t){this._oscillators.forEach((function(e){return e.harmonicity.value=t}))}},{key:"resonance",get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}},{key:"octaves",get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._oscillators.forEach((function(t){return t.dispose()})),this._freqMultipliers.forEach((function(t){return t.dispose()})),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}],[{key:"getDefaults",value:function(){return Pr(es.getDefaults(),{envelope:Object.assign(zr(Ja.getDefaults(),Object.keys(No.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}}]),n}(es),ds=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="MembraneSynth",t.portamento=0;var i=jr(n.getDefaults(),arguments);return t.pitchDecay=i.pitchDecay,t.octaves=i.octaves,ao((0,U.Z)(t),["oscillator","envelope"]),t}return(0,u.Z)(n,[{key:"setNote",value:function(t,e){var n=this.toSeconds(e),i=this.toFrequency(t instanceof Do?t.toFrequency():t),r=i*this.octaves;return this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.frequency.exponentialRampToValueAtTime(i,n+this.toSeconds(this.pitchDecay)),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this}}],[{key:"getDefaults",value:function(){return Pr(es.getDefaults(),is.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}}]),n}(is);Or([Na(0)],ds.prototype,"octaves",void 0),Or([Pa(0)],ds.prototype,"pitchDecay",void 0);var vs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="NoiseSynth";var i=jr(n.getDefaults(),arguments);return t.noise=new va(Object.assign({context:t.context},i.noise)),t.envelope=new ns(Object.assign({context:t.context},i.envelope)),t.noise.chain(t.envelope,t.output),t}return(0,u.Z)(n,[{key:"triggerAttack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}},{key:"triggerRelease",value:function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}},{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}},{key:"triggerAttackRelease",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.noise.dispose(),this.envelope.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(ts.getDefaults(),{envelope:Object.assign(zr(Ja.getDefaults(),Object.keys(No.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(zr(va.getDefaults(),Object.keys(pa.getDefaults())),{type:"white"})})}}]),n}(ts),ys=new Set;function ms(t){ys.add(t)}function _s(t,e){var n='registerProcessor("'.concat(t,'", ').concat(e,")");ys.add(n)}var gs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;(0,c.Z)(this,n),(i=e.call(this,t)).name="ToneAudioWorklet",i.workletOptions={},i.onprocessorerror=uo;var r=URL.createObjectURL(new Blob([Array.from(ys).join("\n")],{type:"text/javascript"})),o=i._audioWorkletName();return i._dummyGain=i.context.createGain(),i._dummyParam=i._dummyGain.gain,i.context.addAudioWorkletModule(r,o).then((function(){i.disposed||(i._worklet=i.context.createAudioWorkletNode(o,i.workletOptions),i._worklet.onprocessorerror=i.onprocessorerror.bind((0,U.Z)(i)),i.onReady(i._worklet))})),i}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}]),n}(No);ms('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');ms("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");ms("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");var ks="feedback-comb-filter";_s(ks,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');var xs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["delayTime","resonance"]))).name="FeedbackCombFilter";var i=jr(n.getDefaults(),arguments,["delayTime","resonance"]);return t.input=new zo({context:t.context}),t.output=new zo({context:t.context}),t.delayTime=new Io({context:t.context,value:i.delayTime,units:"time",minValue:0,maxValue:1,param:t._dummyParam,swappable:!0}),t.resonance=new Io({context:t.context,value:i.resonance,units:"normalRange",param:t._dummyParam,swappable:!0}),ao((0,U.Z)(t),["resonance","delayTime"]),t}return(0,u.Z)(n,[{key:"_audioWorkletName",value:function(){return ks}},{key:"onReady",value:function(t){Po(this.input,t,this.output);var e=t.parameters.get("delayTime");this.delayTime.setParam(e);var n=t.parameters.get("feedback");this.resonance.setParam(n)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{delayTime:.1,resonance:.5})}}]),n}(gs),ws=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","type"]))).name="OnePoleFilter";var i=jr(n.getDefaults(),arguments,["frequency","type"]);return t._frequency=i.frequency,t._type=i.type,t.input=new zo({context:t.context}),t.output=new zo({context:t.context}),t._createFilter(),t}return(0,u.Z)(n,[{key:"_createFilter",value:function(){var t=this,e=this._filter,n=this.toFrequency(this._frequency),i=1/(2*Math.PI*n);if("lowpass"===this._type){var r=1/(i*this.context.sampleRate),o=r-1;this._filter=this.context.createIIRFilter([r,0],[1,o])}else{var a=1/(i*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,a])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout((function(){t.disposed||(t.input.disconnect(e),e.disconnect())}),this.blockTime)}},{key:"frequency",get:function(){return this._frequency},set:function(t){this._frequency=t,this._createFilter()}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this._createFilter()}},{key:"getFrequencyResponse",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,e=new Float32Array(t),n=0;n<t;n++){var i=Math.pow(n/t,2),r=19980*i+20;e[n]=r}var o=new Float32Array(t),a=new Float32Array(t);return this._filter.getFrequencyResponse(e,o,a),o}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{frequency:880,type:"lowpass"})}}]),n}(No),bs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["delayTime","resonance","dampening"]))).name="LowpassCombFilter";var i=jr(n.getDefaults(),arguments,["delayTime","resonance","dampening"]);return t._combFilter=t.output=new xs({context:t.context,delayTime:i.delayTime,resonance:i.resonance}),t.delayTime=t._combFilter.delayTime,t.resonance=t._combFilter.resonance,t._lowpass=t.input=new ws({context:t.context,frequency:i.dampening,type:"lowpass"}),t._lowpass.connect(t._combFilter),t}return(0,u.Z)(n,[{key:"dampening",get:function(){return this._lowpass.frequency},set:function(t){this._lowpass.frequency=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._combFilter.dispose(),this._lowpass.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}}]),n}(No),Zs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="PluckSynth";var i=jr(n.getDefaults(),arguments);return t._noise=new va({context:t.context,type:"pink"}),t.attackNoise=i.attackNoise,t._lfcf=new bs({context:t.context,dampening:i.dampening,resonance:i.resonance}),t.resonance=i.resonance,t.release=i.release,t._noise.connect(t._lfcf),t._lfcf.connect(t.output),t}return(0,u.Z)(n,[{key:"dampening",get:function(){return this._lfcf.dampening},set:function(t){this._lfcf.dampening=t}},{key:"triggerAttack",value:function(t,e){var n=this.toFrequency(t);e=this.toSeconds(e);var i=1/n;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}},{key:"triggerRelease",value:function(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._noise.dispose(),this._lfcf.dispose(),this}}],[{key:"getDefaults",value:function(){return Pr(ts.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}}]),n}(ts),Ts=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["voice","options"]))).name="PolySynth",t._availableVoices=[],t._activeVoices=[],t._voices=[],t._gcTimeout=-1,t._averageActiveVoices=0;var i=jr(n.getDefaults(),arguments,["voice","options"]);ur(!_r(i.voice),"DEPRECATED: The polyphony count is no longer the first argument.");var r=i.voice.getDefaults();t.options=Object.assign(r,i.options),t.voice=i.voice,t.maxPolyphony=i.maxPolyphony,t._dummyVoice=t._getNextAvailableVoice();var o=t._voices.indexOf(t._dummyVoice);return t._voices.splice(o,1),t._gcTimeout=t.context.setInterval(t._collectGarbage.bind((0,U.Z)(t)),1),t}return(0,u.Z)(n,[{key:"activeVoices",get:function(){return this._activeVoices.length}},{key:"_makeVoiceAvailable",value:function(t){this._availableVoices.push(t);var e=this._activeVoices.findIndex((function(e){return e.voice===t}));this._activeVoices.splice(e,1)}},{key:"_getNextAvailableVoice",value:function(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){var t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}dr("Max polyphony exceeded. Note dropped.")}},{key:"_collectGarbage",value:function(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){var t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}},{key:"_triggerAttack",value:function(t,e,n){var i=this;t.forEach((function(t){var r=new ta(i.context,t).toMidi(),o=i._getNextAvailableVoice();o&&(o.triggerAttack(t,e,n),i._activeVoices.push({midi:r,voice:o,released:!1}),i.log("triggerAttack",t,e))}))}},{key:"_triggerRelease",value:function(t,e){var n=this;t.forEach((function(t){var i=new ta(n.context,t).toMidi(),r=n._activeVoices.find((function(t){var e=t.midi,n=t.released;return e===i&&!n}));r&&(r.voice.triggerRelease(e),r.released=!0,n.log("triggerRelease",t,e))}))}},{key:"_scheduleEvent",value:function(t,e,n,i){var r=this;ur(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,i):this._triggerRelease(e,n):this.context.setTimeout((function(){r._scheduleEvent(t,e,n,i)}),n-this.now())}},{key:"triggerAttack",value:function(t,e,n){Array.isArray(t)||(t=[t]);var i=this.toSeconds(e);return this._scheduleEvent("attack",t,i,n),this}},{key:"triggerRelease",value:function(t,e){Array.isArray(t)||(t=[t]);var n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}},{key:"triggerAttackRelease",value:function(t,e,n,i){var r=this.toSeconds(n);if(this.triggerAttack(t,r,i),xr(e)){ur(xr(t),"If the duration is an array, the notes must also be an array");for(var o=0;o<t.length;o++){var a=e[Math.min(o,e.length-1)],s=this.toSeconds(a);ur(s>0,"The duration must be greater than 0"),this.triggerRelease(t[o],r+s)}}else{var u=this.toSeconds(e);ur(u>0,"The duration must be greater than 0"),this.triggerRelease(t,r+u)}return this}},{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}},{key:"set",value:function(t){var e=zr(t,["onsilence","context"]);return this.options=Pr(this.options,e),this._voices.forEach((function(t){return t.set(e)})),this._dummyVoice.set(e),this}},{key:"get",value:function(){return this._dummyVoice.get()}},{key:"releaseAll",value:function(t){var e=this.toSeconds(t);return this._activeVoices.forEach((function(t){t.voice.triggerRelease(e)})),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._dummyVoice.dispose(),this._voices.forEach((function(t){return t.dispose()})),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}],[{key:"getDefaults",value:function(){return Object.assign(ts.getDefaults(),{maxPolyphony:32,options:{},voice:is})}}]),n}(ts),Ss=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))).name="Sampler",t._activeSources=new Map;var i=jr(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),r={};return Object.keys(i.urls).forEach((function(e){var n=parseInt(e,10);if(ur(br(e)||_r(n)&&isFinite(n),"url key is neither a note or midi pitch: ".concat(e)),br(e)){var o=new Do(t.context,e).toMidi();r[o]=i.urls[e]}else _r(n)&&isFinite(n)&&(r[n]=i.urls[n])})),t._buffers=new Ko({urls:r,onload:i.onload,baseUrl:i.baseUrl,onerror:i.onerror}),t.attack=i.attack,t.release=i.release,t.curve=i.curve,t._buffers.loaded&&Promise.resolve().then(i.onload),t}return(0,u.Z)(n,[{key:"_findClosest",value:function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error("No available buffers for note: ".concat(t))}},{key:"triggerAttack",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]),t.forEach((function(t){var r=Zo(new Do(n.context,t).toFrequency()),o=Math.round(r),a=r-o,s=n._findClosest(o),u=o-s,c=n._buffers.get(u),l=xo(s+a),h=new da({url:c,context:n.context,curve:n.curve,fadeIn:n.attack,fadeOut:n.release,playbackRate:l}).connect(n.output);h.start(e,0,c.duration/l,i),xr(n._activeSources.get(o))||n._activeSources.set(o,[]),n._activeSources.get(o).push(h),h.onended=function(){if(n._activeSources&&n._activeSources.has(o)){var t=n._activeSources.get(o),e=t.indexOf(h);-1!==e&&t.splice(e,1)}}})),this}},{key:"triggerRelease",value:function(t,e){var n=this;return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((function(t){var i=new Do(n.context,t).toMidi();if(n._activeSources.has(i)&&n._activeSources.get(i).length){var r=n._activeSources.get(i);e=n.toSeconds(e),r.forEach((function(t){t.stop(e)})),n._activeSources.set(i,[])}})),this}},{key:"releaseAll",value:function(t){var e=this.toSeconds(t);return this._activeSources.forEach((function(t){for(;t.length;){t.shift().stop(e)}})),this}},{key:"sync",value:function(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}},{key:"triggerAttackRelease",value:function(t,e,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=this.toSeconds(n);return this.triggerAttack(t,o,r),xr(e)?(ur(xr(t),"notes must be an array when duration is array"),t.forEach((function(t,n){var r=e[Math.min(n,e.length-1)];i.triggerRelease(t,o+i.toSeconds(r))}))):this.triggerRelease(t,o+this.toSeconds(e)),this}},{key:"add",value:function(t,e,n){if(ur(br(t)||isFinite(t),"note must be a pitch or midi: ".concat(t)),br(t)){var i=new Do(this.context,t).toMidi();this._buffers.add(i,e,n)}else this._buffers.add(t,e,n);return this}},{key:"loaded",get:function(){return this._buffers.loaded}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._buffers.dispose(),this._activeSources.forEach((function(t){t.forEach((function(t){return t.dispose()}))})),this._activeSources.clear(),this}}],[{key:"getDefaults",value:function(){return Object.assign(ts.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:uo,onerror:uo,release:.1,urls:{}})}}]),n}(ts);Or([Pa(0)],Ss.prototype,"attack",void 0),Or([Pa(0)],Ss.prototype,"release",void 0);var As=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["callback","value"]))).name="ToneEvent",t._state=new Vo("stopped"),t._startOffset=0;var i=jr(n.getDefaults(),arguments,["callback","value"]);return t._loop=i.loop,t.callback=i.callback,t.value=i.value,t._loopStart=t.toTicks(i.loopStart),t._loopEnd=t.toTicks(i.loopEnd),t._playbackRate=i.playbackRate,t._probability=i.probability,t._humanize=i.humanize,t.mute=i.mute,t._playbackRate=i.playbackRate,t._state.increasing=!0,t._rescheduleEvents(),t}return(0,u.Z)(n,[{key:"_rescheduleEvents",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._state.forEachFrom(e,(function(e){var n;if("started"===e.state){-1!==e.id&&t.context.transport.clear(e.id);var i=e.time+Math.round(t.startOffset/t._playbackRate);if(!0===t._loop||_r(t._loop)&&t._loop>1){n=1/0,_r(t._loop)&&(n=t._loop*t._getLoopDuration());var r=t._state.getAfter(i);null!==r&&(n=Math.min(n,r.time-i)),n!==1/0&&(t._state.setStateAtTime("stopped",i+n+1,{id:-1}),n=new na(t.context,n));var o=new na(t.context,t._getLoopDuration());e.id=t.context.transport.scheduleRepeat(t._tick.bind(t),o,new na(t.context,i),n)}else e.id=t.context.transport.schedule(t._tick.bind(t),new na(t.context,i))}}))}},{key:"state",get:function(){return this._state.getValueAtTime(this.context.transport.ticks)}},{key:"startOffset",get:function(){return this._startOffset},set:function(t){this._startOffset=t}},{key:"probability",get:function(){return this._probability},set:function(t){this._probability=t}},{key:"humanize",get:function(){return this._humanize},set:function(t){this._humanize=t}},{key:"start",value:function(t){var e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}},{key:"stop",value:function(t){this.cancel(t);var e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});var n=this._state.getBefore(e),i=e;null!==n&&(i=n.time),this._rescheduleEvents(i)}return this}},{key:"cancel",value:function(t){var e=this;t=Lr(t,-1/0);var n=this.toTicks(t);return this._state.forEachFrom(n,(function(t){e.context.transport.clear(t.id)})),this._state.cancel(n),this}},{key:"_tick",value:function(t){var e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;kr(this.humanize)||(n=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*n}this.callback(t,this.value)}}},{key:"_getLoopDuration",value:function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}},{key:"loop",get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}},{key:"loopEnd",get:function(){return new na(this.context,this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}},{key:"loopStart",get:function(){return new na(this.context,this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}},{key:"progress",get:function(){if(this._loop){var t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){var n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.cancel(),this._state.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Fo.getDefaults(),{callback:uo,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}}]),n}(Fo),Cs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["callback","interval"]))).name="Loop";var i=jr(n.getDefaults(),arguments,["callback","interval"]);return t._event=new As({context:t.context,callback:t._tick.bind((0,U.Z)(t)),loop:!0,loopEnd:i.interval,playbackRate:i.playbackRate,probability:i.probability}),t.callback=i.callback,t.iterations=i.iterations,t}return(0,u.Z)(n,[{key:"start",value:function(t){return this._event.start(t),this}},{key:"stop",value:function(t){return this._event.stop(t),this}},{key:"cancel",value:function(t){return this._event.cancel(t),this}},{key:"_tick",value:function(t){this.callback(t)}},{key:"state",get:function(){return this._event.state}},{key:"progress",get:function(){return this._event.progress}},{key:"interval",get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}},{key:"playbackRate",get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}},{key:"humanize",get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}},{key:"probability",get:function(){return this._event.probability},set:function(t){this._event.probability=t}},{key:"mute",get:function(){return this._event.mute},set:function(t){this._event.mute=t}},{key:"iterations",get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._event.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Fo.getDefaults(),{interval:"4n",callback:uo,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}}]),n}(Fo),Ds=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["callback","events"]))).name="Part",t._state=new Vo("stopped"),t._events=new Set;var i=jr(n.getDefaults(),arguments,["callback","events"]);return t._state.increasing=!0,i.events.forEach((function(e){xr(e)?t.add(e[0],e[1]):t.add(e)})),t}return(0,u.Z)(n,[{key:"start",value:function(t,e){var n=this,i=this.toTicks(t);if("started"!==this._state.getValueAtTime(i)){e=Lr(e,this._loop?this._loopStart:0),e=this._loop?Lr(e,this._loopStart):Lr(e,0);var r=this.toTicks(e);this._state.add({id:-1,offset:r,state:"started",time:i}),this._forEach((function(t){n._startNote(t,i,r)}))}return this}},{key:"_startNote",value:function(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new na(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new na(this.context,e))):t.startOffset>=n&&t.start(new na(this.context,e))}},{key:"startOffset",get:function(){return this._startOffset},set:function(t){var e=this;this._startOffset=t,this._forEach((function(t){t.startOffset+=e._startOffset}))}},{key:"stop",value:function(t){var e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((function(e){e.stop(t)})),this}},{key:"at",value:function(t,e){for(var n=new Ro(this.context,t).toTicks(),i=new na(this.context,1).toSeconds(),r=this._events.values(),o=r.next();!o.done;){var a=o.value;if(Math.abs(n-a.startOffset)<i)return yr(e)&&(a.value=e),a;o=r.next()}return yr(e)?(this.add(t,e),this.at(t)):null}},{key:"add",value:function(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);var n,i=this.toTicks(t);return e instanceof As?(n=e).callback=this._tick.bind(this):n=new As({callback:this._tick.bind(this),context:this.context,value:e}),n.startOffset=i,n.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(n),this._restartEvent(n),this}},{key:"_restartEvent",value:function(t){var e=this;this._state.forEach((function(n){"started"===n.state?e._startNote(t,n.time,n.offset):t.stop(new na(e.context,n.time))}))}},{key:"remove",value:function(t,e){var n=this;return gr(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((function(i){i.startOffset===t&&(vr(e)||yr(e)&&i.value===e)&&(n._events.delete(i),i.dispose())})),this}},{key:"clear",value:function(){return this._forEach((function(t){return t.dispose()})),this._events.clear(),this}},{key:"cancel",value:function(t){return this._forEach((function(e){return e.cancel(t)})),this._state.cancel(this.toTicks(t)),this}},{key:"_forEach",value:function(t){return this._events&&this._events.forEach((function(e){e instanceof n?e._forEach(t):t(e)})),this}},{key:"_setAll",value:function(t,e){this._forEach((function(n){n[t]=e}))}},{key:"_tick",value:function(t,e){this.mute||this.callback(t,e)}},{key:"_testLoopBoundries",value:function(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}},{key:"probability",get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}},{key:"humanize",get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}},{key:"loop",get:function(){return this._loop},set:function(t){var e=this;this._loop=t,this._forEach((function(n){n.loopStart=e.loopStart,n.loopEnd=e.loopEnd,n.loop=t,e._testLoopBoundries(n)}))}},{key:"loopEnd",get:function(){return new na(this.context,this._loopEnd).toSeconds()},set:function(t){var e=this;this._loopEnd=this.toTicks(t),this._loop&&this._forEach((function(n){n.loopEnd=t,e._testLoopBoundries(n)}))}},{key:"loopStart",get:function(){return new na(this.context,this._loopStart).toSeconds()},set:function(t){var e=this;this._loopStart=this.toTicks(t),this._loop&&this._forEach((function(t){t.loopStart=e.loopStart,e._testLoopBoundries(t)}))}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}},{key:"length",get:function(){return this._events.size}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.clear(),this}}],[{key:"getDefaults",value:function(){return Object.assign(As.getDefaults(),{events:[]})}}]),n}(As),Os=N().mark(Ps),Ms=N().mark(js),Es=N().mark(Ls),Rs=N().mark(Ws),qs=N().mark(Bs),Fs=N().mark(Gs),Vs=N().mark(Us),Is=N().mark(Ys),Ns=N().mark(Qs);function Ps(t){var e;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=0;case 1:if(!(e<t.length)){n.next=8;break}return e=zs(e,t),n.next=5,t[e];case 5:e++,n.next=1;break;case 8:case"end":return n.stop()}}),Os)}function js(t){var e;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=t.length-1;case 1:if(!(e>=0)){n.next=8;break}return e=zs(e,t),n.next=5,t[e];case 5:e--,n.next=1;break;case 8:case"end":return n.stop()}}),Ms)}function Ls(t,e){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(e(t),"t0",2);case 2:n.next=0;break;case 4:case"end":return n.stop()}}),Es)}function zs(t,e){return Xr(t,0,e.length-1)}function Ws(t,e){var n;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=e?0:t.length-1;case 1:return n=zs(n,t),i.next=5,t[n];case 5:e?++n>=t.length-1&&(e=!1):--n<=0&&(e=!0),i.next=1;break;case 8:case"end":return i.stop()}}),Rs)}function Bs(t){var e,n;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=0,n=0;case 2:if(!(e<t.length)){i.next=10;break}return e=zs(e,t),i.next=6,t[e];case 6:n++,e+=n%2?2:-1,i.next=2;break;case 10:case"end":return i.stop()}}),qs)}function Gs(t){var e,n;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=t.length-1,n=0;case 2:if(!(e>=0)){i.next=10;break}return e=zs(e,t),i.next=6,t[e];case 6:n++,e+=n%2?-2:1,i.next=2;break;case 10:case"end":return i.stop()}}),Fs)}function Us(t){var e;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=Math.floor(Math.random()*t.length),n.next=4,t[e];case 4:n.next=0;break;case 6:case"end":return n.stop()}}),Vs)}function Ys(t){var e,n,i,r;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(e=[],n=0;n<t.length;n++)e.push(n);case 2:if(!(e.length>0)){o.next=9;break}return i=e.splice(Math.floor(e.length*Math.random()),1),r=zs(i[0],t),o.next=7,t[r];case 7:o.next=2;break;case 9:case"end":return o.stop()}}),Is)}function Qs(t){var e;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=Math.floor(Math.random()*t.length);case 1:return 0===e?e++:e===t.length-1||Math.random()<.5?e--:e++,n.next=5,t[e];case 5:n.next=1;break;case 7:case"end":return n.stop()}}),Ns)}function Xs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up";return N().mark((function n(){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:ur(t.length>0,"The array must have more than one value in it"),n.t0=e,n.next="up"===n.t0?4:"down"===n.t0?5:"upDown"===n.t0?6:"downUp"===n.t0?7:"alternateUp"===n.t0?8:"alternateDown"===n.t0?9:"random"===n.t0?10:"randomOnce"===n.t0?11:"randomWalk"===n.t0?12:13;break;case 4:return n.delegateYield(Ls(t,Ps),"t1",5);case 5:return n.delegateYield(Ls(t,js),"t2",6);case 6:return n.delegateYield(Ws(t,!0),"t3",7);case 7:return n.delegateYield(Ws(t,!1),"t4",8);case 8:return n.delegateYield(Ls(t,Bs),"t5",9);case 9:return n.delegateYield(Ls(t,Gs),"t6",10);case 10:return n.delegateYield(Us(t),"t7",11);case 11:return n.delegateYield(Ls(t,Ys),"t8",12);case 12:return n.delegateYield(Qs(t),"t9",13);case 13:case"end":return n.stop()}}),n)}))()}var Hs=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["callback","values","pattern"]))).name="Pattern";var i=jr(n.getDefaults(),arguments,["callback","values","pattern"]);return t.callback=i.callback,t._values=i.values,t._pattern=Xs(i.values,i.pattern),t._type=i.pattern,t}return(0,u.Z)(n,[{key:"_tick",value:function(t){var e=this._pattern.next();this._value=e.value,this.callback(t,this._value)}},{key:"values",get:function(){return this._values},set:function(t){this._values=t,this.pattern=this._type}},{key:"value",get:function(){return this._value}},{key:"pattern",get:function(){return this._type},set:function(t){this._type=t,this._pattern=Xs(this._values,this._type)}}],[{key:"getDefaults",value:function(){return Object.assign(Cs.getDefaults(),{pattern:"up",values:[],callback:uo})}}]),n}(Cs),$s=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["callback","events","subdivision"]))).name="Sequence",t._part=new Ds({callback:t._seqCallback.bind((0,U.Z)(t)),context:t.context}),t._events=[],t._eventsArray=[];var i=jr(n.getDefaults(),arguments,["callback","events","subdivision"]);return t._subdivision=t.toTicks(i.subdivision),t.events=i.events,t.loop=i.loop,t.loopStart=i.loopStart,t.loopEnd=i.loopEnd,t.playbackRate=i.playbackRate,t.probability=i.probability,t.humanize=i.humanize,t.mute=i.mute,t.playbackRate=i.playbackRate,t}return(0,u.Z)(n,[{key:"_seqCallback",value:function(t,e){null!==e&&this.callback(t,e)}},{key:"events",get:function(){return this._events},set:function(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}},{key:"start",value:function(t,e){return this._part.start(t,e?this._indexTime(e):e),this}},{key:"stop",value:function(t){return this._part.stop(t),this}},{key:"subdivision",get:function(){return new na(this.context,this._subdivision).toSeconds()}},{key:"_createSequence",value:function(t){var e=this;return new Proxy(t,{get:function(t,e){return t[e]},set:function(t,n,i){return wr(n)&&isFinite(parseInt(n,10))&&xr(i)?t[n]=e._createSequence(i):t[n]=i,e._eventsUpdated(),!0}})}},{key:"_eventsUpdated",value:function(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}},{key:"_rescheduleSequence",value:function(t,e,n){var i=this;t.forEach((function(t,r){var o=r*e+n;if(xr(t))i._rescheduleSequence(t,e/t.length,o);else{var a=new na(i.context,o,"i").toSeconds();i._part.add(a,t)}}))}},{key:"_indexTime",value:function(t){return new na(this.context,t*this._subdivision+this.startOffset).toSeconds()}},{key:"clear",value:function(){return this._part.clear(),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._part.dispose(),this}},{key:"loop",get:function(){return this._part.loop},set:function(t){this._part.loop=t}},{key:"loopStart",get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}},{key:"loopEnd",get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}},{key:"startOffset",get:function(){return this._part.startOffset},set:function(t){this._part.startOffset=t}},{key:"playbackRate",get:function(){return this._part.playbackRate},set:function(t){this._part.playbackRate=t}},{key:"probability",get:function(){return this._part.probability},set:function(t){this._part.probability=t}},{key:"progress",get:function(){return this._part.progress}},{key:"humanize",get:function(){return this._part.humanize},set:function(t){this._part.humanize=t}},{key:"length",get:function(){return this._part.length}}],[{key:"getDefaults",value:function(){return Object.assign(zr(As.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}}]),n}(As),Js=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["fade"])))).name="CrossFade",t._panner=t.context.createStereoPanner(),t._split=t.context.createChannelSplitter(2),t._g2a=new Ba({context:t.context}),t.a=new zo({context:t.context,gain:0}),t.b=new zo({context:t.context,gain:0}),t.output=new zo({context:t.context}),t._internalChannels=[t.a,t.b];var i=jr(n.getDefaults(),arguments,["fade"]);return t.fade=new Go({context:t.context,units:"normalRange",value:i.fade}),ao((0,U.Z)(t),"fade"),t.context.getConstant(1).connect(t._panner),t._panner.connect(t._split),t._panner.channelCount=1,t._panner.channelCountMode="explicit",jo(t._split,t.a.gain,0),jo(t._split,t.b.gain,1),t.fade.chain(t._g2a,t._panner.pan),t.a.connect(t.output),t.b.connect(t.output),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{fade:.5})}}]),n}(No),Ks=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t)).name="Effect",i._dryWet=new Js({context:i.context}),i.wet=i._dryWet.fade,i.effectSend=new zo({context:i.context}),i.effectReturn=new zo({context:i.context}),i.input=new zo({context:i.context}),i.output=i._dryWet,i.input.fan(i._dryWet.a,i.effectSend),i.effectReturn.connect(i._dryWet.b),i.wet.setValueAtTime(t.wet,0),i._internalChannels=[i.effectReturn,i.effectSend],ao((0,U.Z)(i),"wet"),i}return(0,u.Z)(n,[{key:"connectEffect",value:function(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{wet:1})}}]),n}(No),tu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t)).name="LFOEffect",i._lfo=new Ia({context:i.context,frequency:t.frequency,amplitude:t.depth}),i.depth=i._lfo.amplitude,i.frequency=i._lfo.frequency,i.type=t.type,ao((0,U.Z)(i),["frequency","depth"]),i}return(0,u.Z)(n,[{key:"start",value:function(t){return this._lfo.start(t),this}},{key:"stop",value:function(t){return this._lfo.stop(t),this}},{key:"sync",value:function(){return this._lfo.sync(),this}},{key:"unsync",value:function(){return this._lfo.unsync(),this}},{key:"type",get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{frequency:1,type:"sine",depth:1})}}]),n}(Ks),eu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","baseFrequency","octaves"]))).name="AutoFilter";var i=jr(n.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);return t.filter=new ss(Object.assign(i.filter,{context:t.context})),t.connectEffect(t.filter),t._lfo.connect(t.filter.frequency),t.octaves=i.octaves,t.baseFrequency=i.baseFrequency,t}return(0,u.Z)(n,[{key:"baseFrequency",get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}},{key:"octaves",get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.filter.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(tu.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}}]),n}(tu),nu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["pan"])))).name="Panner",t._panner=t.context.createStereoPanner(),t.input=t._panner,t.output=t._panner;var i=jr(n.getDefaults(),arguments,["pan"]);return t.pan=new Io({context:t.context,param:t._panner.pan,value:i.pan,minValue:-1,maxValue:1}),t._panner.channelCount=i.channelCount,t._panner.channelCountMode="explicit",ao((0,U.Z)(t),"pan"),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._panner.disconnect(),this.pan.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{pan:0,channelCount:1})}}]),n}(No),iu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency"]))).name="AutoPanner";var i=jr(n.getDefaults(),arguments,["frequency"]);return t._panner=new nu({context:t.context,channelCount:i.channelCount}),t.connectEffect(t._panner),t._lfo.connect(t._panner.pan),t._lfo.min=-1,t._lfo.max=1,t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._panner.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(tu.getDefaults(),{channelCount:1})}}]),n}(tu),ru=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["smoothing"]))).name="Follower";var i=jr(n.getDefaults(),arguments,["smoothing"]);return t._abs=t.input=new Wa({context:t.context}),t._lowpass=t.output=new ws({context:t.context,frequency:1/t.toSeconds(i.smoothing),type:"lowpass"}),t._abs.connect(t._lowpass),t._smoothing=i.smoothing,t}return(0,u.Z)(n,[{key:"smoothing",get:function(){return this._smoothing},set:function(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._abs.dispose(),this._lowpass.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{smoothing:.05})}}]),n}(No),ou=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]))).name="AutoWah";var i=jr(n.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);return t._follower=new ru({context:t.context,smoothing:i.follower}),t._sweepRange=new Ha({context:t.context,min:0,max:1,exponent:.5}),t._baseFrequency=t.toFrequency(i.baseFrequency),t._octaves=i.octaves,t._inputBoost=new zo({context:t.context}),t._bandpass=new ss({context:t.context,rolloff:-48,frequency:0,Q:i.Q}),t._peaking=new ss({context:t.context,type:"peaking"}),t._peaking.gain.value=i.gain,t.gain=t._peaking.gain,t.Q=t._bandpass.Q,t.effectSend.chain(t._inputBoost,t._follower,t._sweepRange),t._sweepRange.connect(t._bandpass.frequency),t._sweepRange.connect(t._peaking.frequency),t.effectSend.chain(t._bandpass,t._peaking,t.effectReturn),t._setSweepRange(),t.sensitivity=i.sensitivity,ao((0,U.Z)(t),["gain","Q"]),t}return(0,u.Z)(n,[{key:"octaves",get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}},{key:"follower",get:function(){return this._follower.smoothing},set:function(t){this._follower.smoothing=t}},{key:"baseFrequency",get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}},{key:"sensitivity",get:function(){return ko(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/go(t)}},{key:"_setSweepRange",value:function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}}]),n}(Ks),au="bit-crusher";_s(au,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");var su=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["bits"]))).name="BitCrusher";var i=jr(n.getDefaults(),arguments,["bits"]);return t._bitCrusherWorklet=new uu({context:t.context,bits:i.bits}),t.connectEffect(t._bitCrusherWorklet),t.bits=t._bitCrusherWorklet.bits,t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._bitCrusherWorklet.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{bits:4})}}]),n}(Ks),uu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="BitCrusherWorklet";var i=jr(n.getDefaults(),arguments);return t.input=new zo({context:t.context}),t.output=new zo({context:t.context}),t.bits=new Io({context:t.context,value:i.bits,units:"positive",minValue:1,maxValue:16,param:t._dummyParam,swappable:!0}),t}return(0,u.Z)(n,[{key:"_audioWorkletName",value:function(){return au}},{key:"onReady",value:function(t){Po(this.input,t,this.output);var e=t.parameters.get("bits");this.bits.setParam(e)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(gs.getDefaults(),{bits:12})}}]),n}(gs),cu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["order"]))).name="Chebyshev";var i=jr(n.getDefaults(),arguments,["order"]);return t._shaper=new Za({context:t.context,length:4096}),t._order=i.order,t.connectEffect(t._shaper),t.order=i.order,t.oversample=i.oversample,t}return(0,u.Z)(n,[{key:"_getCoefficient",value:function(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)}},{key:"order",get:function(){return this._order},set:function(t){var e=this;this._order=t,this._shaper.setMap((function(n){return e._getCoefficient(n,t,new Map)}))}},{key:"oversample",get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._shaper.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{order:1,oversample:"none"})}}]),n}(Ks),lu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["channels"]))).name="Split";var i=jr(n.getDefaults(),arguments,["channels"]);return t._splitter=t.input=t.output=t.context.createChannelSplitter(i.channels),t._internalChannels=[t._splitter],t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._splitter.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{channels:2})}}]),n}(No),hu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["channels"]))).name="Merge";var i=jr(n.getDefaults(),arguments,["channels"]);return t._merger=t.output=t.input=t.context.createChannelMerger(i.channels),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._merger.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{channels:2})}}]),n}(No),fu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t)).name="StereoEffect",i.input=new zo({context:i.context}),i.input.channelCount=2,i.input.channelCountMode="explicit",i._dryWet=i.output=new Js({context:i.context,fade:t.wet}),i.wet=i._dryWet.fade,i._split=new lu({context:i.context,channels:2}),i._merge=new hu({context:i.context,channels:2}),i.input.connect(i._split),i.input.connect(i._dryWet.a),i._merge.connect(i._dryWet.b),ao((0,U.Z)(i),["wet"]),i}return(0,u.Z)(n,[{key:"connectEffectLeft",value:function(){var t;this._split.connect(arguments.length<=0?void 0:arguments[0],0,0),Po.apply(void 0,arguments),jo((t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],this._merge,0,0)}},{key:"connectEffectRight",value:function(){var t;this._split.connect(arguments.length<=0?void 0:arguments[0],1,0),Po.apply(void 0,arguments),jo((t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],this._merge,0,1)}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{wet:1})}}]),n}(No),pu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t)).feedback=new Go({context:i.context,value:t.feedback,units:"normalRange"}),i._feedbackL=new zo({context:i.context}),i._feedbackR=new zo({context:i.context}),i._feedbackSplit=new lu({context:i.context,channels:2}),i._feedbackMerge=new hu({context:i.context,channels:2}),i._merge.connect(i._feedbackSplit),i._feedbackMerge.connect(i._split),i._feedbackSplit.connect(i._feedbackL,0,0),i._feedbackL.connect(i._feedbackMerge,0,0),i._feedbackSplit.connect(i._feedbackR,1,0),i._feedbackR.connect(i._feedbackMerge,0,1),i.feedback.fan(i._feedbackL.gain,i._feedbackR.gain),ao((0,U.Z)(i),["feedback"]),i}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(fu.getDefaults(),{feedback:.5})}}]),n}(fu),du=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","delayTime","depth"]))).name="Chorus";var i=jr(n.getDefaults(),arguments,["frequency","delayTime","depth"]);return t._depth=i.depth,t._delayTime=i.delayTime/1e3,t._lfoL=new Ia({context:t.context,frequency:i.frequency,min:0,max:1}),t._lfoR=new Ia({context:t.context,frequency:i.frequency,min:0,max:1,phase:180}),t._delayNodeL=new $o({context:t.context}),t._delayNodeR=new $o({context:t.context}),t.frequency=t._lfoL.frequency,ao((0,U.Z)(t),["frequency"]),t._lfoL.frequency.connect(t._lfoR.frequency),t.connectEffectLeft(t._delayNodeL),t.connectEffectRight(t._delayNodeR),t._lfoL.connect(t._delayNodeL.delayTime),t._lfoR.connect(t._delayNodeR.delayTime),t.depth=t._depth,t.type=i.type,t.spread=i.spread,t}return(0,u.Z)(n,[{key:"depth",get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}},{key:"delayTime",get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}},{key:"type",get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}},{key:"spread",get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}},{key:"start",value:function(t){return this._lfoL.start(t),this._lfoR.start(t),this}},{key:"stop",value:function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}},{key:"sync",value:function(){return this._lfoL.sync(),this._lfoR.sync(),this}},{key:"unsync",value:function(){return this._lfoL.unsync(),this._lfoR.unsync(),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(pu.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}}]),n}(pu),vu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["distortion"]))).name="Distortion";var i=jr(n.getDefaults(),arguments,["distortion"]);return t._shaper=new Za({context:t.context,length:4096}),t._distortion=i.distortion,t.connectEffect(t._shaper),t.distortion=i.distortion,t.oversample=i.oversample,t}return(0,u.Z)(n,[{key:"distortion",get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,n=Math.PI/180;this._shaper.setMap((function(t){return Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))}))}},{key:"oversample",get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._shaper.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{distortion:.4,oversample:"none"})}}]),n}(Ks),yu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t)).name="FeedbackEffect",i._feedbackGain=new zo({context:i.context,gain:t.feedback,units:"normalRange"}),i.feedback=i._feedbackGain.gain,ao((0,U.Z)(i),"feedback"),i.effectReturn.chain(i._feedbackGain,i.effectSend),i}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._feedbackGain.dispose(),this.feedback.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{feedback:.125})}}]),n}(Ks),mu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["delayTime","feedback"]))).name="FeedbackDelay";var i=jr(n.getDefaults(),arguments,["delayTime","feedback"]);return t._delayNode=new $o({context:t.context,delayTime:i.delayTime,maxDelay:i.maxDelay}),t.delayTime=t._delayNode.delayTime,t.connectEffect(t._delayNode),ao((0,U.Z)(t),"delayTime"),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._delayNode.dispose(),this.delayTime.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(yu.getDefaults(),{delayTime:.25,maxDelay:1})}}]),n}(yu),_u=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;(0,c.Z)(this,n),(i=e.call(this,t)).name="PhaseShiftAllpass",i.input=new zo({context:i.context}),i.output=new zo({context:i.context}),i.offset90=new zo({context:i.context});return i._bank0=i._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),i._bank1=i._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),i._oneSampleDelay=i.context.createIIRFilter([0,1],[1,0]),Po.apply(void 0,[i.input].concat((0,$.Z)(i._bank0),[i._oneSampleDelay,i.output])),Po.apply(void 0,[i.input].concat((0,$.Z)(i._bank1),[i.offset90])),i}return(0,u.Z)(n,[{key:"_createAllPassFilterBank",value:function(t){var e=this;return t.map((function(t){var n=[[t*t,0,-1],[1,0,-t*t]];return e.context.createIIRFilter(n[0],n[1])}))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((function(t){return t.disconnect()})),this._bank1.forEach((function(t){return t.disconnect()})),this._oneSampleDelay.disconnect(),this}}]),n}(No),gu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency"]))).name="FrequencyShifter";var i=jr(n.getDefaults(),arguments,["frequency"]);t.frequency=new Go({context:t.context,units:"frequency",value:i.frequency,minValue:-t.context.sampleRate/2,maxValue:t.context.sampleRate/2}),t._sine=new xa({context:t.context,type:"sine"}),t._cosine=new wa({context:t.context,phase:-90,type:"sine"}),t._sineMultiply=new Sa({context:t.context}),t._cosineMultiply=new Sa({context:t.context}),t._negate=new Ga({context:t.context}),t._add=new qa({context:t.context}),t._phaseShifter=new _u({context:t.context}),t.effectSend.connect(t._phaseShifter),t.frequency.fan(t._sine.frequency,t._cosine.frequency),t._phaseShifter.offset90.connect(t._cosineMultiply),t._cosine.connect(t._cosineMultiply.factor),t._phaseShifter.connect(t._sineMultiply),t._sine.connect(t._sineMultiply.factor),t._sineMultiply.connect(t._negate),t._cosineMultiply.connect(t._add),t._negate.connect(t._add.addend),t._add.connect(t.effectReturn);var r=t.immediate();return t._sine.start(r),t._cosine.start(r),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{frequency:0})}}]),n}(Ks),ku=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],xu=[225,556,441,341],wu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["roomSize","dampening"]))).name="Freeverb",t._combFilters=[],t._allpassFiltersL=[],t._allpassFiltersR=[];var i=jr(n.getDefaults(),arguments,["roomSize","dampening"]);return t.roomSize=new Go({context:t.context,value:i.roomSize,units:"normalRange"}),t._allpassFiltersL=xu.map((function(e){var n=t.context.createBiquadFilter();return n.type="allpass",n.frequency.value=e,n})),t._allpassFiltersR=xu.map((function(e){var n=t.context.createBiquadFilter();return n.type="allpass",n.frequency.value=e,n})),t._combFilters=ku.map((function(e,n){var r,o,a=new bs({context:t.context,dampening:i.dampening,delayTime:e});n<ku.length/2?(r=t).connectEffectLeft.apply(r,[a].concat((0,$.Z)(t._allpassFiltersL))):(o=t).connectEffectRight.apply(o,[a].concat((0,$.Z)(t._allpassFiltersR)));return t.roomSize.connect(a.resonance),a})),ao((0,U.Z)(t),["roomSize"]),t}return(0,u.Z)(n,[{key:"dampening",get:function(){return this._combFilters[0].dampening},set:function(t){this._combFilters.forEach((function(e){return e.dampening=t}))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._allpassFiltersL.forEach((function(t){return t.disconnect()})),this._allpassFiltersR.forEach((function(t){return t.disconnect()})),this._combFilters.forEach((function(t){return t.dispose()})),this.roomSize.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(fu.getDefaults(),{roomSize:.7,dampening:3e3})}}]),n}(fu),bu=[.06748,.06404,.08212,.09004],Zu=[.773,.802,.753,.733],Tu=[347,113,37],Su=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["roomSize"]))).name="JCReverb",t._allpassFilters=[],t._feedbackCombFilters=[];var i=jr(n.getDefaults(),arguments,["roomSize"]);return t.roomSize=new Go({context:t.context,value:i.roomSize,units:"normalRange"}),t._scaleRoomSize=new Fa({context:t.context,min:-.733,max:.197}),t._allpassFilters=Tu.map((function(e){var n=t.context.createBiquadFilter();return n.type="allpass",n.frequency.value=e,n})),t._feedbackCombFilters=bu.map((function(e,n){var i,r,o=new xs({context:t.context,delayTime:e});(t._scaleRoomSize.connect(o.resonance),o.resonance.value=Zu[n],n<bu.length/2)?(i=t).connectEffectLeft.apply(i,(0,$.Z)(t._allpassFilters).concat([o])):(r=t).connectEffectRight.apply(r,(0,$.Z)(t._allpassFilters).concat([o]));return o})),t.roomSize.connect(t._scaleRoomSize),ao((0,U.Z)(t),["roomSize"]),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._allpassFilters.forEach((function(t){return t.disconnect()})),this._feedbackCombFilters.forEach((function(t){return t.dispose()})),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(fu.getDefaults(),{roomSize:.5})}}]),n}(fu),Au=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t))._feedbackL.disconnect(),i._feedbackL.connect(i._feedbackMerge,0,1),i._feedbackR.disconnect(),i._feedbackR.connect(i._feedbackMerge,0,0),ao((0,U.Z)(i),["feedback"]),i}return(0,u.Z)(n)}(pu),Cu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["delayTime","feedback"]))).name="PingPongDelay";var i=jr(n.getDefaults(),arguments,["delayTime","feedback"]);return t._leftDelay=new $o({context:t.context,maxDelay:i.maxDelay}),t._rightDelay=new $o({context:t.context,maxDelay:i.maxDelay}),t._rightPreDelay=new $o({context:t.context,maxDelay:i.maxDelay}),t.delayTime=new Go({context:t.context,units:"time",value:i.delayTime}),t.connectEffectLeft(t._leftDelay),t.connectEffectRight(t._rightPreDelay,t._rightDelay),t.delayTime.fan(t._leftDelay.delayTime,t._rightDelay.delayTime,t._rightPreDelay.delayTime),t._feedbackL.disconnect(),t._feedbackL.connect(t._rightDelay),ao((0,U.Z)(t),["delayTime"]),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Au.getDefaults(),{delayTime:.25,maxDelay:1})}}]),n}(Au),Du=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["pitch"]))).name="PitchShift";var i=jr(n.getDefaults(),arguments,["pitch"]);t._frequency=new Go({context:t.context}),t._delayA=new $o({maxDelay:1,context:t.context}),t._lfoA=new Ia({context:t.context,min:0,max:.1,type:"sawtooth"}).connect(t._delayA.delayTime),t._delayB=new $o({maxDelay:1,context:t.context}),t._lfoB=new Ia({context:t.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(t._delayB.delayTime),t._crossFade=new Js({context:t.context}),t._crossFadeLFO=new Ia({context:t.context,min:0,max:1,type:"triangle",phase:90}).connect(t._crossFade.fade),t._feedbackDelay=new $o({delayTime:i.delayTime,context:t.context}),t.delayTime=t._feedbackDelay.delayTime,ao((0,U.Z)(t),"delayTime"),t._pitch=i.pitch,t._windowSize=i.windowSize,t._delayA.connect(t._crossFade.a),t._delayB.connect(t._crossFade.b),t._frequency.fan(t._lfoA.frequency,t._lfoB.frequency,t._crossFadeLFO.frequency),t.effectSend.fan(t._delayA,t._delayB),t._crossFade.chain(t._feedbackDelay,t.effectReturn);var r=t.now();return t._lfoA.start(r),t._lfoB.start(r),t._crossFadeLFO.start(r),t.windowSize=t._windowSize,t}return(0,u.Z)(n,[{key:"pitch",get:function(){return this._pitch},set:function(t){this._pitch=t;var e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=xo(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=xo(t)-1),this._frequency.value=e*(1.2/this._windowSize)}},{key:"windowSize",get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(yu.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}}]),n}(yu),Ou=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t,i,r;(0,c.Z)(this,n),(r=e.call(this,jr(n.getDefaults(),arguments,["frequency","octaves","baseFrequency"]))).name="Phaser";var o=jr(n.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);return r._lfoL=new Ia({context:r.context,frequency:o.frequency,min:0,max:1}),r._lfoR=new Ia({context:r.context,frequency:o.frequency,min:0,max:1,phase:180}),r._baseFrequency=r.toFrequency(o.baseFrequency),r._octaves=o.octaves,r.Q=new Go({context:r.context,value:o.Q,units:"positive"}),r._filtersL=r._makeFilters(o.stages,r._lfoL),r._filtersR=r._makeFilters(o.stages,r._lfoR),r.frequency=r._lfoL.frequency,r.frequency.value=o.frequency,(t=r).connectEffectLeft.apply(t,(0,$.Z)(r._filtersL)),(i=r).connectEffectRight.apply(i,(0,$.Z)(r._filtersR)),r._lfoL.frequency.connect(r._lfoR.frequency),r.baseFrequency=o.baseFrequency,r.octaves=o.octaves,r._lfoL.start(),r._lfoR.start(),ao((0,U.Z)(r),["frequency","Q"]),r}return(0,u.Z)(n,[{key:"_makeFilters",value:function(t,e){for(var n=[],i=0;i<t;i++){var r=this.context.createBiquadFilter();r.type="allpass",this.Q.connect(r.Q),e.connect(r.frequency),n.push(r)}return n}},{key:"octaves",get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}},{key:"baseFrequency",get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((function(t){return t.disconnect()})),this._filtersR.forEach((function(t){return t.disconnect()})),this.frequency.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(fu.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}}]),n}(fu),Mu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["decay"]))).name="Reverb",t._convolver=t.context.createConvolver(),t.ready=Promise.resolve();var i=jr(n.getDefaults(),arguments,["decay"]);return t._decay=i.decay,t._preDelay=i.preDelay,t.generate(),t.connectEffect(t._convolver),t}return(0,u.Z)(n,[{key:"decay",get:function(){return this._decay},set:function(t){cr(t=this.toSeconds(t),.001),this._decay=t,this.generate()}},{key:"preDelay",get:function(){return this._preDelay},set:function(t){cr(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}},{key:"generate",value:function(){return Mr(this,void 0,void 0,N().mark((function t(){var e,n,i,r,o,a,s;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.ready,n=new lo(2,this._decay+this._preDelay,this.context.sampleRate),i=new va({context:n}),r=new va({context:n}),o=new hu({context:n}),i.connect(o,0,0),r.connect(o,0,1),a=new zo({context:n}).toDestination(),o.connect(a),i.start(0),r.start(0),a.gain.setValueAtTime(0,0),a.gain.setValueAtTime(1,this._preDelay),a.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay),s=n.render(),this.ready=s.then(uo),t.next=18,e;case 18:return t.next=20,s;case 20:return this._convolver.buffer=t.sent.get(),t.abrupt("return",this);case 22:case"end":return t.stop()}}),t,this)})))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._convolver.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{decay:1.5,preDelay:.01})}}]),n}(Ks),Eu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="MidSideSplit",t._split=t.input=new lu({channels:2,context:t.context}),t._midAdd=new qa({context:t.context}),t.mid=new Sa({context:t.context,value:Math.SQRT1_2}),t._sideSubtract=new Ua({context:t.context}),t.side=new Sa({context:t.context,value:Math.SQRT1_2}),t._split.connect(t._midAdd,0),t._split.connect(t._midAdd.addend,1),t._split.connect(t._sideSubtract,0),t._split.connect(t._sideSubtract.subtrahend,1),t._midAdd.connect(t.mid),t._sideSubtract.connect(t.side),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}]),n}(No),Ru=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="MidSideMerge",t.mid=new zo({context:t.context}),t.side=new zo({context:t.context}),t._left=new qa({context:t.context}),t._leftMult=new Sa({context:t.context,value:Math.SQRT1_2}),t._right=new Ua({context:t.context}),t._rightMult=new Sa({context:t.context,value:Math.SQRT1_2}),t._merge=t.output=new hu({context:t.context}),t.mid.fan(t._left),t.side.connect(t._left.addend),t.mid.connect(t._right),t.side.connect(t._right.subtrahend),t._left.connect(t._leftMult),t._right.connect(t._rightMult),t._leftMult.connect(t._merge,0,0),t._rightMult.connect(t._merge,0,1),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}]),n}(No),qu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(t){var i;return(0,c.Z)(this,n),(i=e.call(this,t)).name="MidSideEffect",i._midSideMerge=new Ru({context:i.context}),i._midSideSplit=new Eu({context:i.context}),i._midSend=i._midSideSplit.mid,i._sideSend=i._midSideSplit.side,i._midReturn=i._midSideMerge.mid,i._sideReturn=i._midSideMerge.side,i.effectSend.connect(i._midSideSplit),i._midSideMerge.connect(i.effectReturn),i}return(0,u.Z)(n,[{key:"connectEffectMid",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=this._midSend).chain.apply(t,n.concat([this._midReturn]))}},{key:"connectEffectSide",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=this._sideSend).chain.apply(t,n.concat([this._sideReturn]))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}]),n}(Ks),Fu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["width"]))).name="StereoWidener";var i=jr(n.getDefaults(),arguments,["width"]);return t.width=new Go({context:t.context,value:i.width,units:"normalRange"}),ao((0,U.Z)(t),["width"]),t._twoTimesWidthMid=new Sa({context:t.context,value:2}),t._twoTimesWidthSide=new Sa({context:t.context,value:2}),t._midMult=new Sa({context:t.context}),t._twoTimesWidthMid.connect(t._midMult.factor),t.connectEffectMid(t._midMult),t._oneMinusWidth=new Ua({context:t.context}),t._oneMinusWidth.connect(t._twoTimesWidthMid),jo(t.context.getConstant(1),t._oneMinusWidth),t.width.connect(t._oneMinusWidth.subtrahend),t._sideMult=new Sa({context:t.context}),t.width.connect(t._twoTimesWidthSide),t._twoTimesWidthSide.connect(t._sideMult.factor),t.connectEffectSide(t._sideMult),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(qu.getDefaults(),{width:.5})}}]),n}(qu),Vu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","depth"]))).name="Tremolo";var i=jr(n.getDefaults(),arguments,["frequency","depth"]);return t._lfoL=new Ia({context:t.context,type:i.type,min:1,max:0}),t._lfoR=new Ia({context:t.context,type:i.type,min:1,max:0}),t._amplitudeL=new zo({context:t.context}),t._amplitudeR=new zo({context:t.context}),t.frequency=new Go({context:t.context,value:i.frequency,units:"frequency"}),t.depth=new Go({context:t.context,value:i.depth,units:"normalRange"}),ao((0,U.Z)(t),["frequency","depth"]),t.connectEffectLeft(t._amplitudeL),t.connectEffectRight(t._amplitudeR),t._lfoL.connect(t._amplitudeL.gain),t._lfoR.connect(t._amplitudeR.gain),t.frequency.fan(t._lfoL.frequency,t._lfoR.frequency),t.depth.fan(t._lfoR.amplitude,t._lfoL.amplitude),t.spread=i.spread,t}return(0,u.Z)(n,[{key:"start",value:function(t){return this._lfoL.start(t),this._lfoR.start(t),this}},{key:"stop",value:function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}},{key:"sync",value:function(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}},{key:"unsync",value:function(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}},{key:"type",get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}},{key:"spread",get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(fu.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}}]),n}(fu),Iu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["frequency","depth"]))).name="Vibrato";var i=jr(n.getDefaults(),arguments,["frequency","depth"]);return t._delayNode=new $o({context:t.context,delayTime:0,maxDelay:i.maxDelay}),t._lfo=new Ia({context:t.context,type:i.type,min:0,max:i.maxDelay,frequency:i.frequency,phase:-90}).start().connect(t._delayNode.delayTime),t.frequency=t._lfo.frequency,t.depth=t._lfo.amplitude,t.depth.value=i.depth,ao((0,U.Z)(t),["frequency","depth"]),t.effectSend.chain(t._delayNode,t.effectReturn),t}return(0,u.Z)(n,[{key:"type",get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Ks.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}}]),n}(Ks),Nu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["type","size"]))).name="Analyser",t._analysers=[],t._buffers=[];var i=jr(n.getDefaults(),arguments,["type","size"]);t.input=t.output=t._gain=new zo({context:t.context}),t._split=new lu({context:t.context,channels:i.channels}),t.input.connect(t._split),cr(i.channels,1);for(var r=0;r<i.channels;r++)t._analysers[r]=t.context.createAnalyser(),t._split.connect(t._analysers[r],r,0);return t.size=i.size,t.type=i.type,t}return(0,u.Z)(n,[{key:"getValue",value:function(){var t=this;return this._analysers.forEach((function(e,n){var i=t._buffers[n];"fft"===t._type?e.getFloatFrequencyData(i):"waveform"===t._type&&e.getFloatTimeDomainData(i)})),1===this.channels?this._buffers[0]:this._buffers}},{key:"size",get:function(){return this._analysers[0].frequencyBinCount},set:function(t){var e=this;this._analysers.forEach((function(n,i){n.fftSize=2*t,e._buffers[i]=new Float32Array(t)}))}},{key:"channels",get:function(){return this._analysers.length}},{key:"type",get:function(){return this._type},set:function(t){ur("waveform"===t||"fft"===t,"Analyser: invalid type: ".concat(t)),this._type=t}},{key:"smoothing",get:function(){return this._analysers[0].smoothingTimeConstant},set:function(t){this._analysers.forEach((function(e){return e.smoothingTimeConstant=t}))}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._analysers.forEach((function(t){return t.disconnect()})),this._split.dispose(),this._gain.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}}]),n}(No),Pu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="MeterBase",t.input=t.output=t._analyser=new Nu({context:t.context,size:256,type:"waveform"}),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._analyser.dispose(),this}}]),n}(No),ju=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["smoothing"]))).name="Meter",t._rms=0;var i=jr(n.getDefaults(),arguments,["smoothing"]);return t.input=t.output=t._analyser=new Nu({context:t.context,size:256,type:"waveform",channels:i.channels}),t.smoothing=i.smoothing,t.normalRange=i.normalRange,t}return(0,u.Z)(n,[{key:"getLevel",value:function(){return dr("'getLevel' has been changed to 'getValue'"),this.getValue()}},{key:"getValue",value:function(){var t=this,e=this._analyser.getValue(),n=(1===this.channels?[e]:e).map((function(e){var n=e.reduce((function(t,e){return t+e*e}),0),i=Math.sqrt(n/e.length);return t._rms=Math.max(i,t._rms*t.smoothing),t.normalRange?t._rms:ko(t._rms)}));return 1===this.channels?n[0]:n}},{key:"channels",get:function(){return this._analyser.channels}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._analyser.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(Pu.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}}]),n}(Pu),Lu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["size"]))).name="FFT";var i=jr(n.getDefaults(),arguments,["size"]);return t.normalRange=i.normalRange,t._analyser.type="fft",t.size=i.size,t}return(0,u.Z)(n,[{key:"getValue",value:function(){var t=this;return this._analyser.getValue().map((function(e){return t.normalRange?go(e):e}))}},{key:"size",get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}},{key:"smoothing",get:function(){return this._analyser.smoothing},set:function(t){this._analyser.smoothing=t}},{key:"getFrequencyOfIndex",value:function(t){return ur(0<=t&&t<this.size,"index must be greater than or equal to 0 and less than ".concat(this.size)),t*this.context.sampleRate/(2*this.size)}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}}]),n}(Pu),zu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="DCMeter",t._analyser.type="waveform",t._analyser.size=256,t}return(0,u.Z)(n,[{key:"getValue",value:function(){return this._analyser.getValue()[0]}}]),n}(Pu),Wu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["size"]))).name="Waveform";var i=jr(n.getDefaults(),arguments,["size"]);return t._analyser.type="waveform",t.size=i.size,t}return(0,u.Z)(n,[{key:"getValue",value:function(){return this._analyser.getValue()}},{key:"size",get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}],[{key:"getDefaults",value:function(){return Object.assign(Pu.getDefaults(),{size:1024})}}]),n}(Pu),Bu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["solo"]))).name="Solo";var i=jr(n.getDefaults(),arguments,["solo"]);return t.input=t.output=new zo({context:t.context}),n._allSolos.has(t.context)||n._allSolos.set(t.context,new Set),n._allSolos.get(t.context).add((0,U.Z)(t)),t.solo=i.solo,t}return(0,u.Z)(n,[{key:"solo",get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),n._allSolos.get(this.context).forEach((function(t){return t._updateSolo()}))}},{key:"muted",get:function(){return 0===this.input.gain.value}},{key:"_addSolo",value:function(){n._soloed.has(this.context)||n._soloed.set(this.context,new Set),n._soloed.get(this.context).add(this)}},{key:"_removeSolo",value:function(){n._soloed.has(this.context)&&n._soloed.get(this.context).delete(this)}},{key:"_isSoloed",value:function(){return n._soloed.has(this.context)&&n._soloed.get(this.context).has(this)}},{key:"_noSolos",value:function(){return!n._soloed.has(this.context)||n._soloed.has(this.context)&&0===n._soloed.get(this.context).size}},{key:"_updateSolo",value:function(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),n._allSolos.get(this.context).delete(this),this._removeSolo(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{solo:!1})}}]),n}(No);Bu._allSolos=new Map,Bu._soloed=new Map;var Gu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["pan","volume"]))).name="PanVol";var i=jr(n.getDefaults(),arguments,["pan","volume"]);return t._panner=t.input=new nu({context:t.context,pan:i.pan,channelCount:i.channelCount}),t.pan=t._panner.pan,t._volume=t.output=new sa({context:t.context,volume:i.volume}),t.volume=t._volume.volume,t._panner.connect(t._volume),t.mute=i.mute,ao((0,U.Z)(t),["pan","volume"]),t}return(0,u.Z)(n,[{key:"mute",get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}}]),n}(No),Uu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["volume","pan"]))).name="Channel";var i=jr(n.getDefaults(),arguments,["volume","pan"]);return t._solo=t.input=new Bu({solo:i.solo,context:t.context}),t._panVol=t.output=new Gu({context:t.context,pan:i.pan,volume:i.volume,mute:i.mute,channelCount:i.channelCount}),t.pan=t._panVol.pan,t.volume=t._panVol.volume,t._solo.connect(t._panVol),ao((0,U.Z)(t),["pan","volume"]),t}return(0,u.Z)(n,[{key:"solo",get:function(){return this._solo.solo},set:function(t){this._solo.solo=t}},{key:"muted",get:function(){return this._solo.muted||this.mute}},{key:"mute",get:function(){return this._panVol.mute},set:function(t){this._panVol.mute=t}},{key:"_getBus",value:function(t){return n.buses.has(t)||n.buses.set(t,new zo({context:this.context})),n.buses.get(t)}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._getBus(t),i=new zo({context:this.context,units:"decibels",gain:e});return this.connect(i),i.connect(n),i}},{key:"receive",value:function(t){return this._getBus(t).connect(this),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}}]),n}(No);Uu.buses=new Map;var Yu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="Mono",t.input=new zo({context:t.context}),t._merge=t.output=new hu({channels:2,context:t.context}),t.input.connect(t._merge,0,0),t.input.connect(t._merge,0,1),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._merge.dispose(),this.input.dispose(),this}}]),n}(No),Qu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["lowFrequency","highFrequency"]))).name="MultibandSplit",t.input=new zo({context:t.context}),t.output=void 0,t.low=new ss({context:t.context,frequency:0,type:"lowpass"}),t._lowMidFilter=new ss({context:t.context,frequency:0,type:"highpass"}),t.mid=new ss({context:t.context,frequency:0,type:"lowpass"}),t.high=new ss({context:t.context,frequency:0,type:"highpass"}),t._internalChannels=[t.low,t.mid,t.high];var i=jr(n.getDefaults(),arguments,["lowFrequency","highFrequency"]);return t.lowFrequency=new Go({context:t.context,units:"frequency",value:i.lowFrequency}),t.highFrequency=new Go({context:t.context,units:"frequency",value:i.highFrequency}),t.Q=new Go({context:t.context,units:"positive",value:i.Q}),t.input.fan(t.low,t.high),t.input.chain(t._lowMidFilter,t.mid),t.lowFrequency.fan(t.low.frequency,t._lowMidFilter.frequency),t.highFrequency.fan(t.mid.frequency,t.high.frequency),t.Q.connect(t.low.Q),t.Q.connect(t._lowMidFilter.Q),t.Q.connect(t.mid.Q),t.Q.connect(t.high.Q),ao((0,U.Z)(t),["high","mid","low","highFrequency","lowFrequency"]),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),so(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}}]),n}(No),Xu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).name="Listener",t.positionX=new Io({context:t.context,param:t.context.rawContext.listener.positionX}),t.positionY=new Io({context:t.context,param:t.context.rawContext.listener.positionY}),t.positionZ=new Io({context:t.context,param:t.context.rawContext.listener.positionZ}),t.forwardX=new Io({context:t.context,param:t.context.rawContext.listener.forwardX}),t.forwardY=new Io({context:t.context,param:t.context.rawContext.listener.forwardY}),t.forwardZ=new Io({context:t.context,param:t.context.rawContext.listener.forwardZ}),t.upX=new Io({context:t.context,param:t.context.rawContext.listener.upX}),t.upY=new Io({context:t.context,param:t.context.rawContext.listener.upY}),t.upZ=new Io({context:t.context,param:t.context.rawContext.listener.upZ}),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}}]),n}(No);Jr((function(t){t.listener=new Xu({context:t})})),to((function(t){t.listener.dispose()}));var Hu=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["positionX","positionY","positionZ"]))).name="Panner3D";var i=jr(n.getDefaults(),arguments,["positionX","positionY","positionZ"]);return t._panner=t.input=t.output=t.context.createPanner(),t.panningModel=i.panningModel,t.maxDistance=i.maxDistance,t.distanceModel=i.distanceModel,t.coneOuterGain=i.coneOuterGain,t.coneOuterAngle=i.coneOuterAngle,t.coneInnerAngle=i.coneInnerAngle,t.refDistance=i.refDistance,t.rolloffFactor=i.rolloffFactor,t.positionX=new Io({context:t.context,param:t._panner.positionX,value:i.positionX}),t.positionY=new Io({context:t.context,param:t._panner.positionY,value:i.positionY}),t.positionZ=new Io({context:t.context,param:t._panner.positionZ,value:i.positionZ}),t.orientationX=new Io({context:t.context,param:t._panner.orientationX,value:i.orientationX}),t.orientationY=new Io({context:t.context,param:t._panner.orientationY,value:i.orientationY}),t.orientationZ=new Io({context:t.context,param:t._panner.orientationZ,value:i.orientationZ}),t}return(0,u.Z)(n,[{key:"setPosition",value:function(t,e,n){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=n,this}},{key:"setOrientation",value:function(t,e,n){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=n,this}},{key:"panningModel",get:function(){return this._panner.panningModel},set:function(t){this._panner.panningModel=t}},{key:"refDistance",get:function(){return this._panner.refDistance},set:function(t){this._panner.refDistance=t}},{key:"rolloffFactor",get:function(){return this._panner.rolloffFactor},set:function(t){this._panner.rolloffFactor=t}},{key:"distanceModel",get:function(){return this._panner.distanceModel},set:function(t){this._panner.distanceModel=t}},{key:"coneInnerAngle",get:function(){return this._panner.coneInnerAngle},set:function(t){this._panner.coneInnerAngle=t}},{key:"coneOuterAngle",get:function(){return this._panner.coneOuterAngle},set:function(t){this._panner.coneOuterAngle=t}},{key:"coneOuterGain",get:function(){return this._panner.coneOuterGain},set:function(t){this._panner.coneOuterGain=t}},{key:"maxDistance",get:function(){return this._panner.maxDistance},set:function(t){this._panner.maxDistance=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}}]),n}(No),$u=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments))).name="Recorder";var i=jr(n.getDefaults(),arguments);return t.input=new zo({context:t.context}),ur(n.supported,"Media Recorder API is not available"),t._stream=t.context.createMediaStreamDestination(),t.input.connect(t._stream),t._recorder=new MediaRecorder(t._stream.stream,{mimeType:i.mimeType}),t}return(0,u.Z)(n,[{key:"mimeType",get:function(){return this._recorder.mimeType}},{key:"state",get:function(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}},{key:"start",value:function(){return Mr(this,void 0,void 0,N().mark((function t(){var e,n=this;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ur("started"!==this.state,"Recorder is already started"),e=new Promise((function(t){n._recorder.addEventListener("start",(function e(){n._recorder.removeEventListener("start",e,!1),t()}),!1)})),this._recorder.start(),t.next=5,e;case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"stop",value:function(){return Mr(this,void 0,void 0,N().mark((function t(){var e,n=this;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ur("stopped"!==this.state,"Recorder is not started"),e=new Promise((function(t){n._recorder.addEventListener("dataavailable",(function e(i){n._recorder.removeEventListener("dataavailable",e,!1),t(i.data)}),!1)})),this._recorder.stop(),t.next=5,e;case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"pause",value:function(){return ur("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.input.dispose(),this._stream.disconnect(),this}}],[{key:"getDefaults",value:function(){return No.getDefaults()}},{key:"supported",get:function(){return null!==Sr&&Reflect.has(Sr,"MediaRecorder")}}]),n}(No),Ju=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["threshold","ratio"]))).name="Compressor",t._compressor=t.context.createDynamicsCompressor(),t.input=t._compressor,t.output=t._compressor;var i=jr(n.getDefaults(),arguments,["threshold","ratio"]);return t.threshold=new Io({minValue:t._compressor.threshold.minValue,maxValue:t._compressor.threshold.maxValue,context:t.context,convert:!1,param:t._compressor.threshold,units:"decibels",value:i.threshold}),t.attack=new Io({minValue:t._compressor.attack.minValue,maxValue:t._compressor.attack.maxValue,context:t.context,param:t._compressor.attack,units:"time",value:i.attack}),t.release=new Io({minValue:t._compressor.release.minValue,maxValue:t._compressor.release.maxValue,context:t.context,param:t._compressor.release,units:"time",value:i.release}),t.knee=new Io({minValue:t._compressor.knee.minValue,maxValue:t._compressor.knee.maxValue,context:t.context,convert:!1,param:t._compressor.knee,units:"decibels",value:i.knee}),t.ratio=new Io({minValue:t._compressor.ratio.minValue,maxValue:t._compressor.ratio.maxValue,context:t.context,convert:!1,param:t._compressor.ratio,units:"positive",value:i.ratio}),ao((0,U.Z)(t),["knee","release","attack","ratio","threshold"]),t}return(0,u.Z)(n,[{key:"reduction",get:function(){return this._compressor.reduction}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}}]),n}(No),Ku=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["threshold","smoothing"])))).name="Gate";var i=jr(n.getDefaults(),arguments,["threshold","smoothing"]);return t._follower=new ru({context:t.context,smoothing:i.smoothing}),t._gt=new Qa({context:t.context,value:go(i.threshold)}),t.input=new zo({context:t.context}),t._gate=t.output=new zo({context:t.context}),t.input.connect(t._gate),t.input.chain(t._follower,t._gt,t._gate.gain),t}return(0,u.Z)(n,[{key:"threshold",get:function(){return ko(this._gt.value)},set:function(t){this._gt.value=go(t)}},{key:"smoothing",get:function(){return this._follower.smoothing},set:function(t){this._follower.smoothing=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{smoothing:.1,threshold:-40})}}]),n}(No),tc=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments,["threshold"])))).name="Limiter";var i=jr(n.getDefaults(),arguments,["threshold"]);return t._compressor=t.input=t.output=new Ju({context:t.context,ratio:20,attack:.003,release:.01,threshold:i.threshold}),t.threshold=t._compressor.threshold,ao((0,U.Z)(t),"threshold"),t}return(0,u.Z)(n,[{key:"reduction",get:function(){return this._compressor.reduction}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._compressor.dispose(),this.threshold.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{threshold:-12})}}]),n}(No),ec=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments)))).name="MidSideCompressor";var i=jr(n.getDefaults(),arguments);return t._midSideSplit=t.input=new Eu({context:t.context}),t._midSideMerge=t.output=new Ru({context:t.context}),t.mid=new Ju(Object.assign(i.mid,{context:t.context})),t.side=new Ju(Object.assign(i.side,{context:t.context})),t._midSideSplit.mid.chain(t.mid,t._midSideMerge.mid),t._midSideSplit.side.chain(t.side,t._midSideMerge.side),ao((0,U.Z)(t),["mid","side"]),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}}]),n}(No),nc=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,Object.assign(jr(n.getDefaults(),arguments)))).name="MultibandCompressor";var i=jr(n.getDefaults(),arguments);return t._splitter=t.input=new Qu({context:t.context,lowFrequency:i.lowFrequency,highFrequency:i.highFrequency}),t.lowFrequency=t._splitter.lowFrequency,t.highFrequency=t._splitter.highFrequency,t.output=new zo({context:t.context}),t.low=new Ju(Object.assign(i.low,{context:t.context})),t.mid=new Ju(Object.assign(i.mid,{context:t.context})),t.high=new Ju(Object.assign(i.high,{context:t.context})),t._splitter.low.chain(t.low,t.output),t._splitter.mid.chain(t.mid,t.output),t._splitter.high.chain(t.high,t.output),ao((0,U.Z)(t),["high","mid","low","highFrequency","lowFrequency"]),t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}}]),n}(No),ic=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["low","mid","high"]))).name="EQ3",t.output=new zo({context:t.context}),t._internalChannels=[];var i=jr(n.getDefaults(),arguments,["low","mid","high"]);return t.input=t._multibandSplit=new Qu({context:t.context,highFrequency:i.highFrequency,lowFrequency:i.lowFrequency}),t._lowGain=new zo({context:t.context,gain:i.low,units:"decibels"}),t._midGain=new zo({context:t.context,gain:i.mid,units:"decibels"}),t._highGain=new zo({context:t.context,gain:i.high,units:"decibels"}),t.low=t._lowGain.gain,t.mid=t._midGain.gain,t.high=t._highGain.gain,t.Q=t._multibandSplit.Q,t.lowFrequency=t._multibandSplit.lowFrequency,t.highFrequency=t._multibandSplit.highFrequency,t._multibandSplit.low.chain(t._lowGain,t.output),t._multibandSplit.mid.chain(t._midGain,t.output),t._multibandSplit.high.chain(t._highGain,t.output),ao((0,U.Z)(t),["low","mid","high","lowFrequency","highFrequency"]),t._internalChannels=[t._multibandSplit],t}return(0,u.Z)(n,[{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),so(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}}]),n}(No),rc=function(t){(0,q.Z)(n,t);var e=(0,F.Z)(n);function n(){var t;(0,c.Z)(this,n),(t=e.call(this,jr(n.getDefaults(),arguments,["url","onload"]))).name="Convolver",t._convolver=t.context.createConvolver();var i=jr(n.getDefaults(),arguments,["url","onload"]);return t._buffer=new co(i.url,(function(e){t.buffer=e,i.onload()})),t.input=new zo({context:t.context}),t.output=new zo({context:t.context}),t._buffer.loaded&&(t.buffer=t._buffer),t.normalize=i.normalize,t.input.chain(t._convolver,t.output),t}return(0,u.Z)(n,[{key:"load",value:function(t){return Mr(this,void 0,void 0,N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._buffer.load(t);case 2:this.buffer=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"buffer",get:function(){return this._buffer.length?this._buffer:null},set:function(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));var e=this._buffer.get();this._convolver.buffer=e||null}},{key:"normalize",get:function(){return this._convolver.normalize},set:function(t){this._convolver.normalize=t}},{key:"dispose",value:function(){return(0,Cr.Z)((0,Dr.Z)(n.prototype),"dispose",this).call(this),this._buffer.dispose(),this._convolver.disconnect(),this}}],[{key:"getDefaults",value:function(){return Object.assign(No.getDefaults(),{normalize:!0,onload:uo})}}]),n}(No);function oc(){return po().now()}function ac(){return po().immediate()}var sc=po().transport;function uc(){return po().transport}var cc=po().destination,lc=po().destination;function hc(){return po().destination}var fc=po().listener;function pc(){return po().listener}var dc=po().draw;function vc(){return po().draw}var yc=po();function mc(){return co.loaded()}var _c=co,gc=Ko,kc=da},6801:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},409:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},8860:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9450:function(t,e,n){var i=n(8719);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},1940:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);u=!0);}catch(l){c=!0,r=l}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},8517:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},5463:function(t,e,n){var i=n(409),r=n(1940),o=n(6874),a=n(8517);t.exports=function(t,e){return i(t)||r(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},5157:function(t,e,n){var i=n(6584).default;t.exports=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8719:function(t,e,n){var i=n(6584).default,r=n(5157);t.exports=function(t){var e=r(t,"string");return"symbol"===i(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},6584:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6874:function(t,e,n){var i=n(6801);t.exports=function(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}}]);
//# sourceMappingURL=885.3b46f9c0.chunk.js.map