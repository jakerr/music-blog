"use strict";(self.webpackChunkmusic_blog=self.webpackChunkmusic_blog||[]).push([[905],{6628:function(t,e,n){n.d(e,{N1:function(){return g}});var i=n(7762),o=n(9439),a=n(2791),r=n(6898),s=n(9137),l=n(3410),u=n(7005),c=n(184),h=function(t){var e,n=t.note,i=(0,a.useContext)(u.ST),o=(0,l._N)(n),r=null!==(e=n.highlight)&&void 0!==e?e:"",s=(0,l.V3)(n.bracket),h=n.bracketColor,d="note-".concat(n.name).concat(n.acc?"s":""),v=(0,l.Ky)(n);return(0,c.jsxs)("div",{className:"key ".concat(o," ").concat(r," ").concat(d),children:[(0,c.jsx)("div",{className:"key-bracket ".concat(s," ").concat(h),children:(0,c.jsx)("div",{className:"key-bracket-label",children:n.bracketLabel})}),!1===i.kbNoteNamesEnabled?null:(0,c.jsx)("span",{className:"note-label",children:v})]})},d=n(1146),v=n(958),f=n(8761),p=n(473),y=[new d.G8((0,l.hi)("C0")).AlternatingWholeTones().ColorDualLight().build()],k=[0,2,4,5,7,9,11],m=function(t){var e=Object.keys(d.Zq).indexOf(t);return k[e]},b=function(t){var e=t.scaleStart,n=t.scaleMode,i=t.namingConvention,o=t.patternConvention;if(void 0===e||void 0===n)return null;var a=(0,l.Ky)(e),r=(0,d.gl)(n,i);return(0,c.jsxs)("div",{className:"scale-info",children:[(0,c.jsxs)("div",{className:"scale-name",children:[a," ",r]}),"hide"===o?null:(0,c.jsxs)("div",{className:"pattern-info",children:[(0,c.jsx)("span",{className:"header",children:"Pattern"}),(0,c.jsx)("span",{className:"value",children:(0,d.m5)(n,o)})]})]})},g=function(t){var e=t.from,n=t.to,g=t.scaleStart,C=t.scaleMode,_=t.size,x=void 0===_?"large":_,N=t.shouldAnimate,S=void 0!==N&&N,Z=t.canTranspose,j=void 0!==Z&&Z,A=t.canChangeMode,L=void 0!==A&&A,w=t.staticHighlighters,I=void 0===w?[]:w,M=t.namingConvention,B=void 0===M?"both":M,R=t.patternConvention,T=void 0===R?"whole-clusters":R,z=(0,a.useContext)(u.ST),D=(0,a.useContext)(s.au),E=(0,a.useState)(0),H=(0,o.Z)(E,2),P=H[0],W=H[1],$=(0,a.useState)(-1),F=(0,o.Z)($,2),q=F[0],G=F[1],O=(0,a.useState)(null),K=(0,o.Z)(O,2),V=K[0],J=K[1],Q=(0,a.useState)(!1),U=(0,o.Z)(Q,2),X=U[0],Y=U[1],tt=(0,a.useState)(!1),et=(0,o.Z)(tt,2),nt=et[0],it=et[1],ot=(0,a.useState)(I),at=(0,o.Z)(ot,2),rt=at[0],st=at[1],lt=(0,a.useState)(g),ut=(0,o.Z)(lt,2),ct=ut[0],ht=ut[1],dt=(0,a.useState)(C),vt=(0,o.Z)(dt,2),ft=vt[0],pt=vt[1];(0,a.useEffect)((function(){var t=setTimeout((function(){W(1),Y(!0)}),300);return function(){return clearTimeout(t)}}),[]),(0,a.useEffect)((function(){if(!(I.length>0||void 0===ct||void 0===ft||null===V)){var t,e=z.kbBackgroundHighlightEnabled?y:[],n=new d.G8(ct).ModeNamed(ft).ColorDual().BracketsRunNumbers().Animate(S).build(),o=(0,i.Z)(V);try{for(o.s();!(t=o.n()).done;){t.value.playable=!1}}catch(a){o.e(a)}finally{o.f()}st([].concat(e,[n])),G(-1)}}),[ft,ct,z.kbBackgroundHighlightEnabled,V,S,I.length]),(0,a.useEffect)((function(){var t=(0,l.z$)(e),i=(0,l.z$)(n),o=Array(i-t).fill(0).map((function(e,n){return e+n+t})).map((function(t){return(0,l.dl)(t)}));J(o)}),[n,e]),(0,a.useEffect)((function(){G(-1)}),[z.kbBackgroundHighlightEnabled]),(0,a.useEffect)((function(){if(V){var t=P>=.001?Math.floor(P*V.length):-2;if(q!==t){G(t);var e,n=(0,i.Z)(V);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.bracket=void 0,o.bracketLabel=void 0,o.highlight=void 0}}catch(h){n.e(h)}finally{n.f()}var a,r=(0,i.Z)(rt);try{for(r.s();!(a=r.n()).done;){a.value.reset()}}catch(h){r.e(h)}finally{r.f()}var s,l=(0,i.Z)(rt);try{var u=function(){var e=s.value;V.forEach((function(n,i){e.opts.shouldAnimate?i<=t&&(null===e||void 0===e||e.accept(n)):null===e||void 0===e||e.accept(n)}))};for(l.s();!(s=l.n()).done;)u()}catch(h){l.e(h)}finally{l.f()}var c=V[t];X&&nt&&c&&c.playable&&(!function(t,e){e.playable&&(null===t||void 0===t||t.playNote(e,16))}(D,c),it(!1)),J((function(t){return t}))}}}),[V,P,X,q,rt,D,z,nt]);var yt="large"===x?"kb-80vw":"medium"===x?"kb-50vw":"kb-20vw";return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"keyboard-wrapper ".concat(yt),children:[(0,c.jsx)(b,{scaleStart:ct,scaleMode:ft,namingConvention:B,patternConvention:T}),(0,c.jsx)("div",{className:"keyboard ".concat(yt),children:null===V||void 0===V?void 0:V.map((function(t){return(0,c.jsx)(h,{note:t},(0,l.z$)(t))}))}),S?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"kb-slider",children:[(0,c.jsx)(v.Z,{}),(0,c.jsx)(r.ZP,{value:Math.floor(100*P),color:"secondary",size:"small",valueLabelDisplay:"off",onChange:function(t,e,n){var i=(Array.isArray(e)?e[0]:e)/100;it(!0),W(i)}})]}),j&&void 0!==ct?(0,c.jsxs)("div",{className:"kb-slider",children:[(0,c.jsx)(f.Z,{}),(0,c.jsx)(r.ZP,{color:"secondary",size:"small",value:(0,l.z$)(ct),marks:!0,min:0,max:11,valueLabelFormat:function(t,e){var n,i=(0,l.dl)(t);return"".concat(i.name).concat(null!==(n=i.acc)&&void 0!==n?n:"")},valueLabelDisplay:"on",onChange:function(t,n,i){if(null!==V){var o=Array.isArray(n)?n[0]:n,a=(0,l.z$)(e)+o,r=(0,l.dl)(a);ht(r)}}})]}):void 0,L&&void 0!==ft?(0,c.jsxs)("div",{className:"kb-slider",children:[(0,c.jsx)(p.Z,{}),(0,c.jsx)(r.ZP,{color:"secondary",size:"small",value:m(ft),min:0,max:11,marks:k.map((function(t){return{value:t,label:void 0}})),step:null,valueLabelDisplay:"on",valueLabelFormat:function(t,e){var n=[0,2,4,5,7,9,11].findIndex((function(e){return e===t}));return Object.keys(d.Zq)[n]},onChange:function(t,e,n){if(null!==V){var i=Array.isArray(e)?e[0]:e,o=k.findIndex((function(t){return t===i})),a=Object.keys(d.Zq)[o];pt(a)}}})]}):void 0]}):void 0]})})}},1146:function(t,e,n){n.d(e,{Zq:function(){return p},G8:function(){return k},gl:function(){return v},m5:function(){return f}});var i=n(5671),o=n(3144),a=n(1752),r=n(1120),s=n(136),l=n(7277),u=n(7762),c=n(3410),h=function(){function t(){(0,i.Z)(this,t),this._startNote={name:"C",oct:0},this._pattern=[3,4],this._oddColor="color-1",this._evenColor="color-2",this._shouldAnimate=!1,this._bracketStyle="none"}return(0,o.Z)(t,[{key:"startNote",value:function(t){return this._startNote=t,this}},{key:"pattern",value:function(t){return this._pattern=t,this}},{key:"oddColor",value:function(t){return this._oddColor=t,this}},{key:"evenColor",value:function(t){return this._evenColor=t,this}},{key:"shouldAnimate",value:function(t){return this._shouldAnimate=t,this}},{key:"bracketStyle",value:function(t){return this._bracketStyle=t,this}},{key:"build",value:function(){return{startNote:this._startNote,pattern:this._pattern,oddColor:this._oddColor,evenColor:this._evenColor,shouldAnimate:this._shouldAnimate,bracketStyle:this._bracketStyle,forceBG:!1}}}]),t}(),d=function(){function t(e){(0,i.Z)(this,t),this.opts=void 0,this.patternIndex=0,this.parity="searching",this.currentRun=0,this.scaleNumber=0,this.runTarget=0,this.halfSteps=0,this.step="root",this.opts=e}return(0,o.Z)(t,[{key:"reset",value:function(){this.parity="searching",this.currentRun=0,this.scaleNumber=0,this.halfSteps=0,this.patternIndex=0,this.step="root"}},{key:"startRun",value:function(t){var e=this.patternIndex>0||this.scaleNumber>1?"middle":"left";this.addBracket(t,e),this.halfSteps=0,this.runTarget=this.opts.pattern[this.patternIndex],this.patternIndex=this.patternIndex+1,this.doHighlight(t)}},{key:"addBracket",value:function(t,e){"none"!==this.opts.bracketStyle&&(t.bracket=e,t.bracketColor="odd"===this.parity?"bracket-".concat(this.opts.oddColor):"bracket-".concat(this.opts.evenColor))}},{key:"addBracketLabel",value:function(t){if("none"!==this.opts.bracketStyle){var e="";switch(this.opts.bracketStyle){case"run-num":e="".concat(this.currentRun);break;case"scale-num":e="".concat(this.scaleNumber);break;case"whole-half":e=""+this.step.charAt(0)}t.bracketLabel="".concat(e)}}},{key:"endRun",value:function(t){var e=1===this.scaleNumber?"left":this.scaleNumber>1&&this.scaleNumber<7?"middle":"right";this.addBracket(t,e),this.parity="odd"===this.parity?"even":"odd",this.patternIndex>=this.opts.pattern.length&&(this.parity="searching",this.step="root",this.patternIndex=0),this.currentRun=0}},{key:"doHighlight",value:function(t){var e="odd"===this.parity?"tone-".concat(this.opts.oddColor):"tone-".concat(this.opts.evenColor);this.currentRun+=1,this.scaleNumber+=1,this.opts.shouldAnimate&&(t.playable=!0),t.highlight=e,this.addBracketLabel(t),this.currentRun>=this.runTarget&&this.endRun(t)}},{key:"accept",value:function(t){var e,n,i=this.opts.startNote.name+(null!==(e=this.opts.startNote.acc)&&void 0!==e?e:""),o=t.name+(null!==(n=t.acc)&&void 0!==n?n:"");return t.bracket=void 0,"searching"===this.parity?i===o?(this.parity=(0,c.z$)(t)%2===0?"odd":"even",this.step=0===this.halfSteps?"root":"half",this.scaleNumber=0,void this.startRun(t)):void 0:(this.halfSteps+=1,this.currentRun<=0?(this.step="half",void this.startRun(t)):(this.addBracket(t,"middle"),this.halfSteps%2===0?(this.step="whole",void this.doHighlight(t)):void 0))}}]),t}();function v(t,e){switch(t){case"Ionian":return"easy"===e?"Major":"technical"===e?"Ionian":"Major (Ionian)";case"Aeolian":return"easy"===e?"Minor":"technical"===e?"Aeolian":" Minor (Aeolian)";default:return t}}function f(t,e){var n=p[t];if("whole-clusters"===e)return n.join(", ");var i,o="",a=0,r=[],s=(0,u.Z)(n);try{for(s.s();!(i=s.n()).done;){var l=i.value;o.length>0&&(o+=", ");for(var c=1;c<l;c++)r.push("W"),a+=2;10===a?(r.push("W"),a+=2):(r.push("H"),a+=1)}}catch(h){s.e(h)}finally{s.f()}return r.join(", ")}var p={Ionian:[3,4],Dorian:[2,4,1],Phrygian:[1,4,2],Lydian:[4,3],Mixolydian:[3,3,1],Aeolian:[2,3,2],Locrian:[1,3,3],"Whole Tone":[6]},y=function(t){(0,s.Z)(n,t);var e=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"mode",value:function(t){var e=p[t];return(0,a.Z)((0,r.Z)(n.prototype),"pattern",this).call(this,e),this}}]),n}(h),k=function(){function t(e){(0,i.Z)(this,t),this._opts=new y,this._opts.startNote(e)}return(0,o.Z)(t,[{key:"Note",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return this._opts.startNote(t),this}))},{key:"AlternatingWholeTones",value:function(){return this._opts.pattern(Array(12).fill(1)),this}},{key:"WholeTone",value:function(){return this._opts.pattern([6]),this}},{key:"ModeNamed",value:function(t){return this._opts.mode(t),this}},{key:"Ionian",value:function(){return this._opts.mode("Ionian"),this}},{key:"Dorian",value:function(){return this._opts.mode("Dorian"),this}},{key:"Phrygian",value:function(){return this._opts.mode("Phrygian"),this}},{key:"Lydian",value:function(){return this._opts.mode("Lydian"),this}},{key:"Mixolydian",value:function(){return this._opts.mode("Mixolydian"),this}},{key:"Aeolean",value:function(){return this._opts.mode("Aeolian"),this}},{key:"Locrean",value:function(){return this._opts.mode("Locrian"),this}},{key:"BracketsWholeHalf",value:function(){return this._opts.bracketStyle("whole-half"),this}},{key:"BracketsRunNumbers",value:function(){return this._opts.bracketStyle("run-num"),this}},{key:"BracketsScaleNumbers",value:function(){return this._opts.bracketStyle("scale-num"),this}},{key:"Animate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._opts.shouldAnimate(t),this}},{key:"ColorSingleFirst",value:function(){return this._opts.oddColor("color-1"),this._opts.evenColor("color-1"),this}},{key:"ColorSingleSecond",value:function(){return this._opts.oddColor("color-2"),this._opts.evenColor("color-2"),this}},{key:"ColorDual",value:function(){return this._opts.oddColor("color-1"),this._opts.evenColor("color-2"),this}},{key:"ColorDualLight",value:function(){return this._opts.oddColor("color-1 lighten"),this._opts.evenColor("color-2 lighten"),this}},{key:"build",value:function(){return new d(this._opts.build())}}]),t}()},3508:function(){}}]);
//# sourceMappingURL=905.45dad905.chunk.js.map