"use strict";(self.webpackChunkmusic_blog=self.webpackChunkmusic_blog||[]).push([[905],{6388:function(t,e,n){n.d(e,{ST:function(){return d},cT:function(){return f}});var i=n(1413),a=n(9439),o=n(2791),r=n(9877),s=n(1440),c=n(7122),u=n(9012),l=n(1462),h=n(184),d=(0,o.createContext)({kbBackgroundHighlightEnabled:!0,kbSoundEnabled:!0,kbNoteNamesEnabled:!0}),v=function(t){var e=t.setGlobalOptions,n=(0,o.useState)(0),s=(0,a.Z)(n,2),l=s[0],v=s[1],f=(0,o.useState)(0),m=(0,a.Z)(f,2),y=m[0],k=m[1],b=(0,o.useContext)(d),g=(0,o.useState)(!1),_=(0,a.Z)(g,2),x=_[0],N=_[1],Z=(0,o.useState)(b.kbBackgroundHighlightEnabled),C=(0,a.Z)(Z,2),S=C[0],A=C[1],j=(0,o.useState)(b.kbNoteNamesEnabled),R=(0,a.Z)(j,2),T=R[0],w=R[1];(0,o.useEffect)((function(){v((function(t){return t+1}))}),[S,T]),(0,o.useEffect)((function(){l!==y&&(e((0,i.Z)((0,i.Z)({},b),{},{kbBackgroundHighlightEnabled:S,kbNoteNamesEnabled:T})),k(l))}),[y,S,T,b,l,e]);var E=x?"secondary":"default",L=x?"medium":"small";return(0,h.jsxs)("div",{className:"options-widget".concat(x?" active":""),onMouseLeave:function(){x&&N(!1)},children:[x?(0,h.jsx)("div",{className:"options-list",children:(0,h.jsxs)(u.Z,{children:[p("Show Note Names",T,(function(){w(!T)})),p("Highlight Wholetones",S,(function(){A(!S)}))]})}):void 0,(0,h.jsx)(r.Z,{color:E,size:L,onClick:function(){N(!x)},children:(0,h.jsx)(c.Z,{})})]})},f=function(t){var e=t.children,n=(0,o.useState)({kbBackgroundHighlightEnabled:!1,kbSoundEnabled:!0,kbNoteNamesEnabled:!0}),i=(0,a.Z)(n,2),r=i[0],s=i[1];return(0,h.jsxs)(d.Provider,{value:r,children:[e,(0,h.jsx)(v,{setGlobalOptions:s})]})};function p(t,e,n){return(0,h.jsx)(l.Z,{control:(0,h.jsx)(s.Z,{checked:e,onChange:n,inputProps:{"aria-label":"controlled"}}),label:t,labelPlacement:"end",componentsProps:{typography:{color:"#ddd"}}})}},6628:function(t,e,n){n.d(e,{N1:function(){return g}});var i=n(7762),a=n(9439),o=n(2791),r=n(6898),s=n(9137),c=n(3410),u=n(6388),l=n(184),h=function(t){var e,n=t.note,i=(0,o.useContext)(u.ST),a=(0,c._N)(n),r=null!==(e=n.highlight)&&void 0!==e?e:"",s=(0,c.V3)(n.bracket),h=n.bracketColor,d="note-".concat(n.name).concat(n.acc?"s":""),v=(0,c.Ky)(n);return(0,l.jsxs)("div",{className:"key ".concat(a," ").concat(r," ").concat(d),children:[(0,l.jsx)("div",{className:"key-bracket ".concat(s," ").concat(h),children:(0,l.jsx)("div",{className:"key-bracket-label",children:n.bracketLabel})}),!1===i.kbNoteNamesEnabled?null:(0,l.jsx)("span",{className:"note-label",children:v})]})},d=n(1146),v=n(958),f=n(8761),p=n(473),m=[new d.G8((0,c.hi)("C0")).AlternatingWholeTones().ColorDualLight().build()],y=[0,2,4,5,7,9,11],k=function(t){var e=Object.keys(d.Zq).indexOf(t);return y[e]},b=function(t){var e=t.scaleStart,n=t.scaleMode,i=t.namingConvention,a=t.patternConvention;if(void 0===e||void 0===n)return null;var o=(0,c.Ky)(e),r=(0,d.gl)(n,i);return(0,l.jsxs)("div",{className:"scale-info",children:[(0,l.jsxs)("div",{className:"scale-name",children:[o," ",r]}),"hide"===a?null:(0,l.jsxs)("div",{className:"pattern-info",children:[(0,l.jsx)("span",{className:"header",children:"Pattern"}),(0,l.jsx)("span",{className:"value",children:(0,d.m5)(n,a)})]})]})},g=function(t){var e=t.from,n=t.to,g=t.scaleStart,_=t.scaleMode,x=t.size,N=void 0===x?"large":x,Z=t.shouldAnimate,C=void 0!==Z&&Z,S=t.canTranspose,A=void 0!==S&&S,j=t.canChangeMode,R=void 0!==j&&j,T=t.staticHighlighters,w=void 0===T?[]:T,E=t.namingConvention,L=void 0===E?"both":E,D=t.patternConvention,M=void 0===D?"whole-clusters":D,B=(0,o.useContext)(u.ST),I=(0,o.useContext)(s.au),H=(0,o.useState)(0),V=(0,a.Z)(H,2),z=V[0],q=V[1],P=(0,o.useState)(-1),W=(0,a.Z)(P,2),G=W[0],O=W[1],F=(0,o.useState)(null),$=(0,a.Z)(F,2),K=$[0],J=$[1],Q=(0,o.useState)(!1),U=(0,a.Z)(Q,2),X=U[0],Y=U[1],tt=(0,o.useState)(!1),et=(0,a.Z)(tt,2),nt=et[0],it=et[1],at=(0,o.useState)(w),ot=(0,a.Z)(at,2),rt=ot[0],st=ot[1],ct=(0,o.useState)(g),ut=(0,a.Z)(ct,2),lt=ut[0],ht=ut[1],dt=(0,o.useState)(_),vt=(0,a.Z)(dt,2),ft=vt[0],pt=vt[1];(0,o.useEffect)((function(){var t=setTimeout((function(){q(1),Y(!0)}),300);return function(){return clearTimeout(t)}}),[]),(0,o.useEffect)((function(){if(!(w.length>0||void 0===lt||void 0===ft||null===K)){var t,e=B.kbBackgroundHighlightEnabled?m:[],n=new d.G8(lt).ModeNamed(ft).ColorDual().BracketsRunNumbers().Animate(C).build(),a=(0,i.Z)(K);try{for(a.s();!(t=a.n()).done;){t.value.playable=!1}}catch(o){a.e(o)}finally{a.f()}st([].concat(e,[n])),O(-1)}}),[ft,lt,B.kbBackgroundHighlightEnabled,K,C,w.length]),(0,o.useEffect)((function(){var t=(0,c.z$)(e),i=(0,c.z$)(n),a=Array(i-t).fill(0).map((function(e,n){return e+n+t})).map((function(t){return(0,c.dl)(t)}));J(a)}),[n,e]),(0,o.useEffect)((function(){O(-1)}),[B.kbBackgroundHighlightEnabled]),(0,o.useEffect)((function(){if(K){var t=z>=.001?Math.floor(z*K.length):-2;if(G!==t){O(t);var e,n=(0,i.Z)(K);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.bracket=void 0,a.bracketLabel=void 0,a.highlight=void 0}}catch(h){n.e(h)}finally{n.f()}var o,r=(0,i.Z)(rt);try{for(r.s();!(o=r.n()).done;){o.value.reset()}}catch(h){r.e(h)}finally{r.f()}var s,c=(0,i.Z)(rt);try{var u=function(){var e=s.value;K.forEach((function(n,i){e.opts.shouldAnimate?i<=t&&(null===e||void 0===e||e.accept(n)):null===e||void 0===e||e.accept(n)}))};for(c.s();!(s=c.n()).done;)u()}catch(h){c.e(h)}finally{c.f()}var l=K[t];X&&nt&&l&&l.playable&&(!function(t,e){e.playable&&(null===t||void 0===t||t.playNote(e,16))}(I,l),it(!1)),J((function(t){return t}))}}}),[K,z,X,G,rt,I,B,nt]);var mt="large"===N?"kb-80vw":"medium"===N?"kb-50vw":"kb-20vw";return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"keyboard-wrapper ".concat(mt),children:[(0,l.jsx)(b,{scaleStart:lt,scaleMode:ft,namingConvention:L,patternConvention:M}),(0,l.jsx)("div",{className:"keyboard ".concat(mt),children:null===K||void 0===K?void 0:K.map((function(t){return(0,l.jsx)(h,{note:t},(0,c.z$)(t))}))}),C?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"kb-slider",children:[(0,l.jsx)(v.Z,{}),(0,l.jsx)(r.ZP,{value:Math.floor(100*z),color:"secondary",size:"small",valueLabelDisplay:"off",onChange:function(t,e,n){var i=(Array.isArray(e)?e[0]:e)/100;it(!0),q(i)}})]}),A&&void 0!==lt?(0,l.jsxs)("div",{className:"kb-slider",children:[(0,l.jsx)(f.Z,{}),(0,l.jsx)(r.ZP,{color:"secondary",size:"small",value:(0,c.z$)(lt),marks:!0,min:0,max:11,valueLabelFormat:function(t,e){var n,i=(0,c.dl)(t);return"".concat(i.name).concat(null!==(n=i.acc)&&void 0!==n?n:"")},valueLabelDisplay:"on",onChange:function(t,n,i){if(null!==K){var a=Array.isArray(n)?n[0]:n,o=(0,c.z$)(e)+a,r=(0,c.dl)(o);ht(r)}}})]}):void 0,R&&void 0!==ft?(0,l.jsxs)("div",{className:"kb-slider",children:[(0,l.jsx)(p.Z,{}),(0,l.jsx)(r.ZP,{color:"secondary",size:"small",value:k(ft),min:0,max:11,marks:y.map((function(t){return{value:t,label:void 0}})),step:null,valueLabelDisplay:"on",valueLabelFormat:function(t,e){var n=[0,2,4,5,7,9,11].findIndex((function(e){return e===t}));return Object.keys(d.Zq)[n]},onChange:function(t,e,n){if(null!==K){var i=Array.isArray(e)?e[0]:e,a=y.findIndex((function(t){return t===i})),o=Object.keys(d.Zq)[a];pt(o)}}})]}):void 0]}):void 0]})})}},1146:function(t,e,n){n.d(e,{Zq:function(){return p},G8:function(){return y},gl:function(){return v},m5:function(){return f}});var i=n(5671),a=n(3144),o=n(1752),r=n(1120),s=n(136),c=n(7277),u=n(7762),l=n(3410),h=function(){function t(){(0,i.Z)(this,t),this._startNote={name:"C",oct:0},this._pattern=[3,4],this._oddColor="color-1",this._evenColor="color-2",this._shouldAnimate=!1,this._bracketStyle="none"}return(0,a.Z)(t,[{key:"startNote",value:function(t){return this._startNote=t,this}},{key:"pattern",value:function(t){return this._pattern=t,this}},{key:"oddColor",value:function(t){return this._oddColor=t,this}},{key:"evenColor",value:function(t){return this._evenColor=t,this}},{key:"shouldAnimate",value:function(t){return this._shouldAnimate=t,this}},{key:"bracketStyle",value:function(t){return this._bracketStyle=t,this}},{key:"build",value:function(){return{startNote:this._startNote,pattern:this._pattern,oddColor:this._oddColor,evenColor:this._evenColor,shouldAnimate:this._shouldAnimate,bracketStyle:this._bracketStyle,forceBG:!1}}}]),t}(),d=function(){function t(e){(0,i.Z)(this,t),this.opts=void 0,this.patternIndex=0,this.parity="searching",this.currentRun=0,this.scaleNumber=0,this.runTarget=0,this.halfSteps=0,this.step="root",this.opts=e}return(0,a.Z)(t,[{key:"reset",value:function(){this.parity="searching",this.currentRun=0,this.scaleNumber=0,this.halfSteps=0,this.patternIndex=0,this.step="root"}},{key:"startRun",value:function(t){var e=this.patternIndex>0||this.scaleNumber>1?"middle":"left";this.addBracket(t,e),this.halfSteps=0,this.runTarget=this.opts.pattern[this.patternIndex],this.patternIndex=this.patternIndex+1,this.doHighlight(t)}},{key:"addBracket",value:function(t,e){"none"!==this.opts.bracketStyle&&(t.bracket=e,t.bracketColor="odd"===this.parity?"bracket-".concat(this.opts.oddColor):"bracket-".concat(this.opts.evenColor))}},{key:"addBracketLabel",value:function(t){if("none"!==this.opts.bracketStyle){var e="";switch(this.opts.bracketStyle){case"run-num":e="".concat(this.currentRun);break;case"scale-num":e="".concat(this.scaleNumber);break;case"whole-half":e=""+this.step.charAt(0)}t.bracketLabel="".concat(e)}}},{key:"endRun",value:function(t){var e=1===this.scaleNumber?"left":this.scaleNumber>1&&this.scaleNumber<7?"middle":"right";this.addBracket(t,e),this.parity="odd"===this.parity?"even":"odd",this.patternIndex>=this.opts.pattern.length&&(this.parity="searching",this.step="root",this.patternIndex=0),this.currentRun=0}},{key:"doHighlight",value:function(t){var e="odd"===this.parity?"tone-".concat(this.opts.oddColor):"tone-".concat(this.opts.evenColor);this.currentRun+=1,this.scaleNumber+=1,this.opts.shouldAnimate&&(t.playable=!0),t.highlight=e,this.addBracketLabel(t),this.currentRun>=this.runTarget&&this.endRun(t)}},{key:"accept",value:function(t){var e,n,i=this.opts.startNote.name+(null!==(e=this.opts.startNote.acc)&&void 0!==e?e:""),a=t.name+(null!==(n=t.acc)&&void 0!==n?n:"");return t.bracket=void 0,"searching"===this.parity?i===a?(this.parity=(0,l.z$)(t)%2===0?"odd":"even",this.step=0===this.halfSteps?"root":"half",this.scaleNumber=0,void this.startRun(t)):void 0:(this.halfSteps+=1,this.currentRun<=0?(this.step="half",void this.startRun(t)):(this.addBracket(t,"middle"),this.halfSteps%2===0?(this.step="whole",void this.doHighlight(t)):void 0))}}]),t}();function v(t,e){switch(t){case"Ionian":return"easy"===e?"Major":"technical"===e?"Ionian":"Major (Ionian)";case"Aeolian":return"easy"===e?"Minor":"technical"===e?"Aeolian":" Minor (Aeolian)";default:return t}}function f(t,e){var n=p[t];if("whole-clusters"===e)return n.join(", ");var i,a="",o=0,r=[],s=(0,u.Z)(n);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.length>0&&(a+=", ");for(var l=1;l<c;l++)r.push("W"),o+=2;10===o?(r.push("W"),o+=2):(r.push("H"),o+=1)}}catch(h){s.e(h)}finally{s.f()}return r.join(", ")}var p={Ionian:[3,4],Dorian:[2,4,1],Phrygian:[1,4,2],Lydian:[4,3],Mixolydian:[3,3,1],Aeolian:[2,3,2],Locrian:[1,3,3],"Whole Tone":[6]},m=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,a.Z)(n,[{key:"mode",value:function(t){var e=p[t];return(0,o.Z)((0,r.Z)(n.prototype),"pattern",this).call(this,e),this}}]),n}(h),y=function(){function t(e){(0,i.Z)(this,t),this._opts=new m,this._opts.startNote(e)}return(0,a.Z)(t,[{key:"Note",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return this._opts.startNote(t),this}))},{key:"AlternatingWholeTones",value:function(){return this._opts.pattern(Array(12).fill(1)),this}},{key:"WholeTone",value:function(){return this._opts.pattern([6]),this}},{key:"ModeNamed",value:function(t){return this._opts.mode(t),this}},{key:"Ionian",value:function(){return this._opts.mode("Ionian"),this}},{key:"Dorian",value:function(){return this._opts.mode("Dorian"),this}},{key:"Phrygian",value:function(){return this._opts.mode("Phrygian"),this}},{key:"Lydian",value:function(){return this._opts.mode("Lydian"),this}},{key:"Mixolydian",value:function(){return this._opts.mode("Mixolydian"),this}},{key:"Aeolean",value:function(){return this._opts.mode("Aeolian"),this}},{key:"Locrean",value:function(){return this._opts.mode("Locrian"),this}},{key:"BracketsWholeHalf",value:function(){return this._opts.bracketStyle("whole-half"),this}},{key:"BracketsRunNumbers",value:function(){return this._opts.bracketStyle("run-num"),this}},{key:"BracketsScaleNumbers",value:function(){return this._opts.bracketStyle("scale-num"),this}},{key:"Animate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._opts.shouldAnimate(t),this}},{key:"ColorSingleFirst",value:function(){return this._opts.oddColor("color-1"),this._opts.evenColor("color-1"),this}},{key:"ColorSingleSecond",value:function(){return this._opts.oddColor("color-2"),this._opts.evenColor("color-2"),this}},{key:"ColorDual",value:function(){return this._opts.oddColor("color-1"),this._opts.evenColor("color-2"),this}},{key:"ColorDualLight",value:function(){return this._opts.oddColor("color-1 lighten"),this._opts.evenColor("color-2 lighten"),this}},{key:"build",value:function(){return new d(this._opts.build())}}]),t}()},3410:function(t,e,n){n.d(e,{Ky:function(){return o},V3:function(){return l},_N:function(){return u},dl:function(){return c},hi:function(){return r},z$:function(){return s}});var i="C_D_EF_G_A_B",a=function(t){return"#"===t?1:"b"===t?-1:0},o=function(t){var e=t.acc?t.acc:"";return"".concat(t.name).concat(e)},r=function(t){var e=t.substring(0,1),n=void 0,i=1,a=t[i];return"#"!==a&&"b"!==a||(n="".concat(a),i++),{name:e,acc:n,oct:i<t.length?parseInt(t.substring(i)):0}},s=function(t){var e=a(t.acc),n=i.indexOf(t.name)+e;return 12*t.oct+n},c=function(t){var e=Math.floor(t/12),n=t%12,a=i[n],o=void 0;return"_"===a&&(o="#",a=i[n-1]),{name:a,acc:o,oct:e}},u=function(t){return 0===a(t.acc)?"white":"black"};function l(t){var e;switch(t){case"left":e="left middle";break;case"middle":e="middle";break;case"right":e="middle right";break;case"solo":e="left middle right";break;default:e=""}return e}},9137:function(t,e,n){n.d(e,{au:function(){return u},tL:function(){return f}});var i=n(7762),a=n(5671),o=n(3144),r=n(2791),s=n(3410),c=n(184),u=(0,r.createContext)(null),l=function(){function t(e,n){(0,a.Z)(this,t),this.carrier=void 0,this.modulator=void 0,this.gain=void 0,this.modDepth=void 0,this.params=void 0,this.params=n,this.carrier=e.createOscillator(),this.modulator=e.createOscillator(),this.gain=e.createGain(),this.modDepth=e.createGain(),this.modulator.type="square",this.carrier.frequency.value=440*this.params.carrierRatio,this.modulator.frequency.value=440*this.params.modRatio,this.modulator.connect(this.modDepth).connect(this.carrier.frequency),this.carrier.connect(this.gain),this.gain.connect(e.destination),this.modDepth.gain.value=this.params.modDepth,this.gain.gain.value=0,this.carrier.start(),this.modulator.start()}return(0,o.Z)(t,[{key:"applyASDR",value:function(t,e,n,i,a){t.setValueAtTime(0,e),t.linearRampToValueAtTime(a,e+i.attack),t.linearRampToValueAtTime(i.sustain*a,e+i.attack+i.decay),t.linearRampToValueAtTime(0,e+n+i.release)}},{key:"setFrequencyAtTime",value:function(t,e){var n=this.params.carrierRatio*t,i=this.params.modRatio*t;this.carrier.frequency.setValueAtTime(n,e),this.modulator.frequency.setValueAtTime(i,e)}},{key:"setModulationDepth",value:function(t){this.gain.gain.value=t}},{key:"playNoteAt",value:function(t,e,n){var i=440*Math.pow(2,(e-69)/12);this.gain.gain.setValueAtTime(0,t),this.setFrequencyAtTime(i,t),this.applyASDR(this.gain.gain,t,n,this.params.asdr,this.params.gain)}}]),t}(),h=function(){function t(e){(0,a.Z)(this,t),this._voices=void 0,this._voices=e}return(0,o.Z)(t,[{key:"playNoteAt",value:function(t,e,n){var a,o=(0,i.Z)(this._voices);try{for(o.s();!(a=o.n()).done;){a.value.playNoteAt(t,e,n)}}catch(r){o.e(r)}finally{o.f()}}}]),t}(),d=function(){function t(){(0,a.Z)(this,t),this._context=void 0,this._voices=void 0,this._currentVoice=void 0;var e={asdr:{attack:.001,decay:.001,sustain:.01,release:.2},gain:.1,modDepth:200,modRatio:24,carrierRatio:3,carrierWave:"sine",modWave:"triangle"},n={asdr:{attack:.01,decay:.03,sustain:.3,release:.2},gain:.4,modDepth:10,modRatio:4,carrierRatio:1,carrierWave:"sine",modWave:"sine"};this._context=new AudioContext,this._voices=[],this._currentVoice=0;for(var i=0;i<3;i++){var o=new l(this._context,e),r=new l(this._context,n),s=new h([o,r]);this._voices.push(s)}}return(0,o.Z)(t,[{key:"isReady",value:function(){return"running"===this._context.state}},{key:"makeReady",value:function(){this.isReady()||this._context.resume()}},{key:"contextTime",value:function(){return this._context.currentTime}},{key:"playNoteAt",value:function(t,e,n){this._voices[this._currentVoice].playNoteAt(t,e,n),this._currentVoice=(this._currentVoice+1)%this._voices.length}}]),t}(),v=function(){function t(e){(0,a.Z)(this,t),this._synth=void 0,this._beatLength=void 0,this._nextNoteTime=void 0,this._octave=void 0,this._octave=4,this._beatLength=240/e,this._nextNoteTime=0}return(0,o.Z)(t,[{key:"isReady",value:function(){return void 0!==this._synth&&this._synth.isReady()}},{key:"playChord",value:function(t,e){var n=this;if(void 0===this._synth&&(this._synth=new d),this.isReady()){var i=Math.max(this._nextNoteTime,this._synth.contextTime()),a=this._beatLength/e,o=t.map((function(t){return(0,s.z$)(t)+12*n._octave}));this._synth.playNoteAt(i,o[0],a),this._nextNoteTime=i+a}else this._synth.makeReady()}},{key:"playNote",value:function(t,e){this.playChord([t],e)}}]),t}(),f=function(t){var e=t.children,n=new v(120);return(0,c.jsx)(u.Provider,{value:n,children:e})}},3508:function(){}}]);
//# sourceMappingURL=905.c66e446c.chunk.js.map